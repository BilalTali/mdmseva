import{r as t,j as e,H as R,L as c,a as b}from"./app-DRBkXReN.js";import{A as C}from"./AuthenticatedLayout-BiTeWwsr.js";import{F as j}from"./PlusIcon-dfn6H7nA.js";import{F as f}from"./DocumentTextIcon-BacUIAvy.js";import{F as x,a as E}from"./ChartBarIcon-BZztdOOU.js";import{F as D,a as S}from"./EyeIcon-tZj3qkUT.js";import{F as $}from"./TrashIcon-BpboNDA8.js";import"./transition-BmCLW5lY.js";import"./AuthLogo-D3md9iKk.js";import"./SupportChatWidget-CLddx8l1.js";import"./createLucideIcon-kOjxZlai.js";function A({title:n,titleId:a,...i},l){return t.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:l,"aria-labelledby":a},i),n?t.createElement("title",{id:a},n):null,t.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3 16.5v2.25A2.25 2.25 0 0 0 5.25 21h13.5A2.25 2.25 0 0 0 21 18.75V16.5M16.5 12 12 16.5m0 0L7.5 12m4.5 4.5V3"}))}const L=t.forwardRef(A);function P({title:n,titleId:a,...i},l){return t.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:l,"aria-labelledby":a},i),n?t.createElement("title",{id:a},n):null,t.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m19.5 8.25-7.5 7.5-7.5-7.5"}))}const T=t.forwardRef(P);function M({title:n,titleId:a,...i},l){return t.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:l,"aria-labelledby":a},i),n?t.createElement("title",{id:a},n):null,t.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m4.5 15.75 7.5-7.5 7.5 7.5"}))}const O=t.forwardRef(M);function X({auth:n,reports:a,availableMonths:i,statistics:l,schoolType:B,hasPrimary:h,hasMiddle:g}){const[w,p]=t.useState(null),[o,N]=t.useState(null),y=s=>{confirm("Are you sure you want to delete this report? This action cannot be undone.")&&(p(s),b.delete(route("amount-reports.destroy",s),{onFinish:()=>p(null)}))},v=s=>{confirm("Regenerate this report with current data? The existing report will be replaced.")&&b.post(route("amount-reports.regenerate",s))},_=s=>{window.open(`/amount-reports/${s}/generate-pdf?theme=bw&download=1`,"_blank")},k=s=>{window.open(route("amount-reports.view-pdf",s),"_blank")},F=s=>{N(o===s?null:s)},u=[{key:"common_salt",label:"Common Salt",icon:"ðŸ§‚"},{key:"chilli_powder",label:"Chilli",icon:"ðŸŒ¶ï¸"},{key:"turmeric",label:"Turmeric",icon:"ðŸ’›"},{key:"coriander",label:"Ingredients",icon:"ðŸŒ¿"},{key:"other_condiments",label:"Other",icon:"ðŸ§„"}];return e.jsxs(C,{user:n.user,children:[e.jsx(R,{title:"Amount Reports"}),e.jsx("div",{className:"py-12",children:e.jsxs("div",{className:"max-w-7xl mx-auto sm:px-6 lg:px-8",children:[e.jsx("div",{className:"mb-8",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Amount Reports"}),e.jsx("p",{className:"mt-2 text-sm text-gray-600",children:"Monthly consumption reports with detailed salt & condiments breakdown, using the unified percentages from your Amount Configuration (applied to both Primary and Middle)."})]}),e.jsxs(c,{href:route("amount-reports.create"),className:`inline-flex items-center px-4 py-2 bg-indigo-600 border border-transparent 
                                    rounded-md font-semibold text-xs text-white uppercase tracking-widest 
                                    hover:bg-indigo-700 focus:bg-indigo-700 active:bg-indigo-900 
                                    focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:ring-offset-2 
                                    transition-all ease-in-out duration-150`,children:[e.jsx(j,{className:"h-4 w-4 mr-2"}),"Generate New Report"]})]})}),l&&l.total_reports>0&&e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6 mb-8",children:[e.jsx("div",{className:"bg-white overflow-hidden shadow-sm rounded-lg p-6",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"flex-shrink-0 bg-indigo-500 rounded-md p-3",children:e.jsx(f,{className:"h-6 w-6 text-white"})}),e.jsxs("div",{className:"ml-4",children:[e.jsx("p",{className:"text-sm font-medium text-gray-500",children:"Total Reports"}),e.jsx("p",{className:"text-2xl font-semibold text-gray-900",children:l.total_reports})]})]})}),e.jsx("div",{className:"bg-white overflow-hidden shadow-sm rounded-lg p-6",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"flex-shrink-0 bg-green-500 rounded-md p-3",children:e.jsx(x,{className:"h-6 w-6 text-white"})}),e.jsxs("div",{className:"ml-4",children:[e.jsx("p",{className:"text-sm font-medium text-gray-500",children:"Total Amount"}),e.jsxs("p",{className:"text-2xl font-semibold text-gray-900",children:["â‚¹",l.total_amount_consumed.toFixed(2)]})]})]})}),e.jsx("div",{className:"bg-white overflow-hidden shadow-sm rounded-lg p-6",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"flex-shrink-0 bg-yellow-500 rounded-md p-3",children:e.jsx(x,{className:"h-6 w-6 text-white"})}),e.jsxs("div",{className:"ml-4",children:[e.jsx("p",{className:"text-sm font-medium text-gray-500",children:"Avg Monthly"}),e.jsxs("p",{className:"text-2xl font-semibold text-gray-900",children:["â‚¹",l.average_monthly_amount.toFixed(2)]})]})]})}),e.jsx("div",{className:"bg-white overflow-hidden shadow-sm rounded-lg p-6",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"flex-shrink-0 bg-purple-500 rounded-md p-3",children:e.jsx(x,{className:"h-6 w-6 text-white"})}),e.jsxs("div",{className:"ml-4",children:[e.jsx("p",{className:"text-sm font-medium text-gray-500",children:"Serving Days"}),e.jsx("p",{className:"text-2xl font-semibold text-gray-900",children:l.total_serving_days})]})]})})]}),e.jsxs("div",{className:"bg-white shadow-sm rounded-lg overflow-hidden",children:[a.data.length===0?e.jsxs("div",{className:"text-center py-12",children:[e.jsx(f,{className:"mx-auto h-12 w-12 text-gray-400"}),e.jsx("h3",{className:"mt-2 text-sm font-medium text-gray-900",children:"No reports"}),e.jsx("p",{className:"mt-1 text-sm text-gray-500",children:"Get started by generating your first amount report."}),e.jsx("div",{className:"mt-6",children:e.jsxs(c,{href:route("amount-reports.create"),className:`inline-flex items-center px-4 py-2 bg-indigo-600 border border-transparent 
                                            rounded-md font-semibold text-xs text-white uppercase tracking-widest 
                                            hover:bg-indigo-700`,children:[e.jsx(j,{className:"h-4 w-4 mr-2"}),"Generate Report"]})})]}):e.jsx("div",{className:"space-y-4 p-4",children:a.data.map(s=>e.jsxs("div",{className:"border border-gray-200 rounded-lg overflow-hidden hover:shadow-md transition-shadow",children:[e.jsx("div",{className:"bg-gray-50 px-6 py-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-bold text-gray-900",children:s.period}),e.jsxs("p",{className:"text-sm text-gray-500",children:[s.month_name," ",s.year," â€¢ Generated ",s.created_at_human]})]}),e.jsx("span",{className:"px-3 py-1 text-xs font-semibold rounded-full bg-blue-100 text-blue-800",children:s.school_type})]}),e.jsxs("div",{className:"mt-3 grid grid-cols-2 md:grid-cols-4 gap-4",children:[h&&e.jsxs("div",{className:"bg-white rounded px-3 py-2 border border-indigo-100",children:[e.jsx("p",{className:"text-xs text-gray-500",children:"Primary Students"}),e.jsx("p",{className:"text-lg font-bold text-indigo-600",children:s.total_primary_students})]}),g&&e.jsxs("div",{className:"bg-white rounded px-3 py-2 border border-purple-100",children:[e.jsx("p",{className:"text-xs text-gray-500",children:"Middle Students"}),e.jsx("p",{className:"text-lg font-bold text-purple-600",children:s.total_middle_students})]}),e.jsxs("div",{className:"bg-white rounded px-3 py-2 border border-green-100",children:[e.jsx("p",{className:"text-xs text-gray-500",children:"Serving Days"}),e.jsx("p",{className:"text-lg font-bold text-green-600",children:s.total_serving_days})]}),e.jsxs("div",{className:"bg-white rounded px-3 py-2 border border-yellow-100",children:[e.jsx("p",{className:"text-xs text-gray-500",children:"Grand Total"}),e.jsxs("p",{className:"text-lg font-bold text-yellow-600",children:["â‚¹",s.grand_total_amount.toFixed(2)]})]})]})]}),e.jsxs("div",{className:"flex items-center space-x-2 ml-4",children:[e.jsx("a",{href:`/amount-reports/export?month=${s.month}&year=${s.year}&format=xlsx`,className:"p-2 text-emerald-600 hover:bg-emerald-50 rounded-lg transition-colors",title:"Export to Excel",children:e.jsx(L,{className:"h-5 w-5"})}),e.jsx("button",{onClick:()=>_(s.id),className:"p-2 text-green-600 hover:bg-green-50 rounded-lg transition-colors",title:"Download PDF",children:e.jsx(D,{className:"h-5 w-5"})}),e.jsx("button",{type:"button",onClick:()=>k(s.id),className:"p-2 text-indigo-600 hover:bg-indigo-50 rounded-lg transition-colors",title:"Preview Report",children:e.jsx(S,{className:"h-5 w-5"})}),e.jsx("button",{onClick:()=>v(s.id),className:"p-2 text-yellow-600 hover:bg-yellow-50 rounded-lg transition-colors",title:"Regenerate Report",children:e.jsx(E,{className:"h-5 w-5"})}),e.jsx("button",{onClick:()=>y(s.id),disabled:w===s.id,className:"p-2 text-red-600 hover:bg-red-50 rounded-lg transition-colors disabled:opacity-50",title:"Delete Report",children:e.jsx($,{className:"h-5 w-5"})}),e.jsx("button",{onClick:()=>F(s.id),className:"p-2 text-gray-600 hover:bg-gray-100 rounded-lg transition-colors",title:o===s.id?"Collapse":"Expand Details",children:o===s.id?e.jsx(O,{className:"h-5 w-5"}):e.jsx(T,{className:"h-5 w-5"})})]})]})}),o===s.id&&e.jsx("div",{className:"px-6 py-4 bg-white border-t border-gray-200",children:e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[h&&s.primary_breakdown&&e.jsxs("div",{className:"space-y-4",children:[e.jsxs("h4",{className:"font-semibold text-gray-900 flex items-center",children:[e.jsx("span",{className:"w-2 h-2 bg-indigo-600 rounded-full mr-2"}),"Primary (Class 1-5) Breakdown"]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{className:"text-gray-600",children:"Pulses:"}),e.jsxs("span",{className:"font-semibold text-gray-900",children:["â‚¹",parseFloat(s.primary_breakdown?.pulses||0).toFixed(2)]})]}),e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{className:"text-gray-600",children:"Vegetables:"}),e.jsxs("span",{className:"font-semibold text-gray-900",children:["â‚¹",parseFloat(s.primary_breakdown?.vegetables||0).toFixed(2)]})]}),e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{className:"text-gray-600",children:"Oil/Fat:"}),e.jsxs("span",{className:"font-semibold text-gray-900",children:["â‚¹",parseFloat(s.primary_breakdown?.oil||0).toFixed(2)]})]}),e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{className:"text-gray-600",children:"Fuel:"}),e.jsxs("span",{className:"font-semibold text-gray-900",children:["â‚¹",parseFloat(s.primary_breakdown?.fuel||0).toFixed(2)]})]}),e.jsxs("div",{className:"flex justify-between text-sm pt-2 border-t border-indigo-100",children:[e.jsx("span",{className:"text-indigo-700 font-semibold",children:"Total Salt & Condiments:"}),e.jsxs("span",{className:"font-bold text-indigo-900",children:["â‚¹",parseFloat(s.primary_breakdown?.salt_total||0).toFixed(2)]})]})]}),s.primary_breakdown?.salt_breakdown&&e.jsxs("div",{className:"mt-4 p-3 bg-indigo-50 rounded-lg",children:[e.jsx("p",{className:"text-xs font-semibold text-indigo-900 mb-2",children:"Salt & Condiments Distribution"}),e.jsx("div",{className:"space-y-1",children:u.map(d=>{const r=parseFloat(s.primary_breakdown.salt_breakdown[d.key]||0),m=s.primary_breakdown.salt_total>0?(r/s.primary_breakdown.salt_total*100).toFixed(1):0;return r>0?e.jsxs("div",{className:"flex justify-between text-xs",children:[e.jsxs("span",{className:"text-gray-700",children:[d.icon," ",d.label,":"]}),e.jsxs("span",{className:"font-semibold text-gray-900",children:["â‚¹",r.toFixed(2)," (",m,"%)"]})]},d.key):null})})]})]}),g&&s.middle_breakdown&&e.jsxs("div",{className:"space-y-4",children:[e.jsxs("h4",{className:"font-semibold text-gray-900 flex items-center",children:[e.jsx("span",{className:"w-2 h-2 bg-purple-600 rounded-full mr-2"}),"Middle (Class 6-8) Breakdown"]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{className:"text-gray-600",children:"Pulses:"}),e.jsxs("span",{className:"font-semibold text-gray-900",children:["â‚¹",parseFloat(s.middle_breakdown?.pulses||0).toFixed(2)]})]}),e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{className:"text-gray-600",children:"Vegetables:"}),e.jsxs("span",{className:"font-semibold text-gray-900",children:["â‚¹",parseFloat(s.middle_breakdown?.vegetables||0).toFixed(2)]})]}),e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{className:"text-gray-600",children:"Oil/Fat:"}),e.jsxs("span",{className:"font-semibold text-gray-900",children:["â‚¹",parseFloat(s.middle_breakdown?.oil||0).toFixed(2)]})]}),e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{className:"text-gray-600",children:"Fuel:"}),e.jsxs("span",{className:"font-semibold text-gray-900",children:["â‚¹",parseFloat(s.middle_breakdown?.fuel||0).toFixed(2)]})]}),e.jsxs("div",{className:"flex justify-between text-sm pt-2 border-t border-purple-100",children:[e.jsx("span",{className:"text-purple-700 font-semibold",children:"Total Salt & Condiments:"}),e.jsxs("span",{className:"font-bold text-purple-900",children:["â‚¹",parseFloat(s.middle_breakdown?.salt_total||0).toFixed(2)]})]})]}),s.middle_breakdown?.salt_breakdown&&e.jsxs("div",{className:"mt-4 p-3 bg-purple-50 rounded-lg",children:[e.jsx("p",{className:"text-xs font-semibold text-purple-900 mb-2",children:"Salt & Condiments Distribution"}),e.jsx("div",{className:"space-y-1",children:u.map(d=>{const r=parseFloat(s.middle_breakdown.salt_breakdown[d.key]||0),m=s.middle_breakdown.salt_total>0?(r/s.middle_breakdown.salt_total*100).toFixed(1):0;return r>0?e.jsxs("div",{className:"flex justify-between text-xs",children:[e.jsxs("span",{className:"text-gray-700",children:[d.icon," ",d.label,":"]}),e.jsxs("span",{className:"font-semibold text-gray-900",children:["â‚¹",r.toFixed(2)," (",m,"%)"]})]},d.key):null})})]})]})]})})]},s.id))}),a.data.length>0&&a.last_page>1&&e.jsx("div",{className:"bg-white px-4 py-3 border-t border-gray-200 sm:px-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"text-sm text-gray-700",children:["Showing ",e.jsx("span",{className:"font-medium",children:a.from})," to"," ",e.jsx("span",{className:"font-medium",children:a.to})," of"," ",e.jsx("span",{className:"font-medium",children:a.total})," results"]}),e.jsxs("div",{className:"flex space-x-2",children:[a.current_page>1&&e.jsx(c,{href:route("amount-reports.index",{page:a.current_page-1}),className:"px-3 py-1 border border-gray-300 rounded-md text-sm font-medium text-gray-700 hover:bg-gray-50",children:"Previous"}),a.current_page<a.last_page&&e.jsx(c,{href:route("amount-reports.index",{page:a.current_page+1}),className:"px-3 py-1 border border-gray-300 rounded-md text-sm font-medium text-gray-700 hover:bg-gray-50",children:"Next"})]})]})})]})]})})]})}export{X as default};
