import{r as t,j as e,H as C,L as o,a as p}from"./app-B9edM2Qa.js";import{A as E}from"./AuthenticatedLayout-P_Kojleq.js";import{F as f}from"./PlusIcon-B9lRvUvK.js";import{F as j}from"./DocumentTextIcon-BG06X0Zt.js";import{F as x,a as B}from"./ChartBarIcon-DbsIeKkq.js";import{F as L,a as w}from"./EyeIcon-yqZSuKvu.js";import{F as $}from"./TrashIcon-NjGXPXyQ.js";import{F as D}from"./ShoppingBagIcon-Zzs87-9v.js";import"./transition-DO8YY8hp.js";import"./AuthLogo-CGgWzjxn.js";import"./SupportChatWidget-BeZgyYS4.js";import"./createLucideIcon-BkKsdSct.js";function A({title:l,titleId:a,...r},n){return t.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:n,"aria-labelledby":a},r),l?t.createElement("title",{id:a},l):null,t.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3 16.5v2.25A2.25 2.25 0 0 0 5.25 21h13.5A2.25 2.25 0 0 0 21 18.75V16.5M16.5 12 12 16.5m0 0L7.5 12m4.5 4.5V3"}))}const S=t.forwardRef(A);function P({title:l,titleId:a,...r},n){return t.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:n,"aria-labelledby":a},r),l?t.createElement("title",{id:a},l):null,t.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m3.75 13.5 10.5-11.25L12 10.5h8.25L9.75 21.75 12 13.5H3.75Z"}))}const V=t.forwardRef(P);function T({title:l,titleId:a,...r},n){return t.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:n,"aria-labelledby":a},r),l?t.createElement("title",{id:a},l):null,t.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m19.5 8.25-7.5 7.5-7.5-7.5"}))}const M=t.forwardRef(T);function O({title:l,titleId:a,...r},n){return t.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:n,"aria-labelledby":a},r),l?t.createElement("title",{id:a},l):null,t.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m4.5 15.75 7.5-7.5 7.5 7.5"}))}const Z=t.forwardRef(O);function G({title:l,titleId:a,...r},n){return t.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:n,"aria-labelledby":a},r),l?t.createElement("title",{id:a},l):null,t.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m9 14.25 6-6m4.5-3.493V21.75l-3.75-1.5-3.75 1.5-3.75-1.5-3.75 1.5V4.757c0-1.108.806-2.057 1.907-2.185a48.507 48.507 0 0 1 11.186 0c1.1.128 1.907 1.077 1.907 2.185ZM9.75 9h.008v.008H9.75V9Zm.375 0a.375.375 0 1 1-.75 0 .375.375 0 0 1 .75 0Zm4.125 4.5h.008v.008h-.008V13.5Zm.375 0a.375.375 0 1 1-.75 0 .375.375 0 0 1 .75 0Z"}))}const W=t.forwardRef(G);function te({auth:l,reports:a,availableMonths:r,statistics:n,schoolType:H,hasPrimary:h,hasMiddle:g}){const[N,u]=t.useState(null),[c,y]=t.useState(null),v=s=>{confirm("Are you sure you want to delete this report? This action cannot be undone.")&&(u(s),p.delete(route("amount-reports.destroy",s),{onFinish:()=>u(null)}))},k=s=>{confirm("Regenerate this report with current data? The existing report will be replaced.")&&p.post(route("amount-reports.regenerate",s))},_=s=>{window.open(`/amount-reports/${s}/generate-pdf?theme=bw&download=1`,"_blank")},F=s=>{window.open(route("amount-reports.view-pdf",s),"_blank")},R=s=>{y(c===s?null:s)},b=[{key:"common_salt",label:"Common Salt",icon:"ðŸ§‚"},{key:"chilli_powder",label:"Chilli",icon:"ðŸŒ¶ï¸"},{key:"turmeric",label:"Turmeric",icon:"ðŸ’›"},{key:"coriander",label:"Ingredients",icon:"ðŸŒ¿"},{key:"other_condiments",label:"Other",icon:"ðŸ§„"}];return e.jsxs(E,{user:l.user,children:[e.jsx(C,{title:"Amount Reports"}),e.jsx("div",{className:"py-12",children:e.jsxs("div",{className:"max-w-7xl mx-auto sm:px-6 lg:px-8",children:[e.jsx("div",{className:"mb-8",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Amount Reports"}),e.jsx("p",{className:"mt-2 text-sm text-gray-600",children:"Monthly consumption reports with detailed salt & condiments breakdown, using the unified percentages from your Amount Configuration (applied to both Primary and Middle)."})]}),e.jsxs(o,{href:route("amount-reports.create"),className:`inline-flex items-center px-4 py-2 bg-indigo-600 border border-transparent 
                                    rounded-md font-semibold text-xs text-white uppercase tracking-widest 
                                    hover:bg-indigo-700 focus:bg-indigo-700 active:bg-indigo-900 
                                    focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:ring-offset-2 
                                    transition-all ease-in-out duration-150`,children:[e.jsx(f,{className:"h-4 w-4 mr-2"}),"Generate New Report"]})]})}),n&&n.total_reports>0&&e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6 mb-8",children:[e.jsx("div",{className:"bg-white overflow-hidden shadow-sm rounded-lg p-6",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"flex-shrink-0 bg-indigo-500 rounded-md p-3",children:e.jsx(j,{className:"h-6 w-6 text-white"})}),e.jsxs("div",{className:"ml-4",children:[e.jsx("p",{className:"text-sm font-medium text-gray-500",children:"Total Reports"}),e.jsx("p",{className:"text-2xl font-semibold text-gray-900",children:n.total_reports})]})]})}),e.jsx("div",{className:"bg-white overflow-hidden shadow-sm rounded-lg p-6",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"flex-shrink-0 bg-green-500 rounded-md p-3",children:e.jsx(x,{className:"h-6 w-6 text-white"})}),e.jsxs("div",{className:"ml-4",children:[e.jsx("p",{className:"text-sm font-medium text-gray-500",children:"Total Amount"}),e.jsxs("p",{className:"text-2xl font-semibold text-gray-900",children:["â‚¹",n.total_amount_consumed.toFixed(2)]})]})]})}),e.jsx("div",{className:"bg-white overflow-hidden shadow-sm rounded-lg p-6",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"flex-shrink-0 bg-yellow-500 rounded-md p-3",children:e.jsx(x,{className:"h-6 w-6 text-white"})}),e.jsxs("div",{className:"ml-4",children:[e.jsx("p",{className:"text-sm font-medium text-gray-500",children:"Avg Monthly"}),e.jsxs("p",{className:"text-2xl font-semibold text-gray-900",children:["â‚¹",n.average_monthly_amount.toFixed(2)]})]})]})}),e.jsx("div",{className:"bg-white overflow-hidden shadow-sm rounded-lg p-6",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"flex-shrink-0 bg-purple-500 rounded-md p-3",children:e.jsx(x,{className:"h-6 w-6 text-white"})}),e.jsxs("div",{className:"ml-4",children:[e.jsx("p",{className:"text-sm font-medium text-gray-500",children:"Serving Days"}),e.jsx("p",{className:"text-2xl font-semibold text-gray-900",children:n.total_serving_days})]})]})})]}),e.jsxs("div",{className:"bg-white shadow-sm rounded-lg overflow-hidden",children:[a.data.length===0?e.jsxs("div",{className:"text-center py-12",children:[e.jsx(j,{className:"mx-auto h-12 w-12 text-gray-400"}),e.jsx("h3",{className:"mt-2 text-sm font-medium text-gray-900",children:"No reports"}),e.jsx("p",{className:"mt-1 text-sm text-gray-500",children:"Get started by generating your first amount report."}),e.jsx("div",{className:"mt-6",children:e.jsxs(o,{href:route("amount-reports.create"),className:`inline-flex items-center px-4 py-2 bg-indigo-600 border border-transparent 
                                            rounded-md font-semibold text-xs text-white uppercase tracking-widest 
                                            hover:bg-indigo-700`,children:[e.jsx(f,{className:"h-4 w-4 mr-2"}),"Generate Report"]})})]}):e.jsx("div",{className:"space-y-4 p-4",children:a.data.map(s=>e.jsxs("div",{className:"border border-gray-200 rounded-lg overflow-hidden hover:shadow-md transition-shadow",children:[e.jsx("div",{className:"bg-gray-50 px-6 py-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-bold text-gray-900",children:s.period}),e.jsxs("p",{className:"text-sm text-gray-500",children:[s.month_name," ",s.year," â€¢ Generated ",s.created_at_human]})]}),e.jsx("span",{className:"px-3 py-1 text-xs font-semibold rounded-full bg-blue-100 text-blue-800",children:s.school_type})]}),e.jsxs("div",{className:"mt-3 grid grid-cols-2 md:grid-cols-4 gap-4",children:[h&&e.jsxs("div",{className:"bg-white rounded px-3 py-2 border border-indigo-100",children:[e.jsx("p",{className:"text-xs text-gray-500",children:"Primary Students"}),e.jsx("p",{className:"text-lg font-bold text-indigo-600",children:s.total_primary_students})]}),g&&e.jsxs("div",{className:"bg-white rounded px-3 py-2 border border-purple-100",children:[e.jsx("p",{className:"text-xs text-gray-500",children:"Middle Students"}),e.jsx("p",{className:"text-lg font-bold text-purple-600",children:s.total_middle_students})]}),e.jsxs("div",{className:"bg-white rounded px-3 py-2 border border-green-100",children:[e.jsx("p",{className:"text-xs text-gray-500",children:"Serving Days"}),e.jsx("p",{className:"text-lg font-bold text-green-600",children:s.total_serving_days})]}),e.jsxs("div",{className:"bg-white rounded px-3 py-2 border border-yellow-100",children:[e.jsx("p",{className:"text-xs text-gray-500",children:"Grand Total"}),e.jsxs("p",{className:"text-lg font-bold text-yellow-600",children:["â‚¹",s.grand_total_amount.toFixed(2)]})]})]})]}),e.jsxs("div",{className:"flex items-center space-x-2 ml-4",children:[e.jsx("a",{href:`/amount-reports/export?month=${s.month}&year=${s.year}&format=xlsx`,className:"p-2 text-emerald-600 hover:bg-emerald-50 rounded-lg transition-colors",title:"Export to Excel",children:e.jsx(S,{className:"h-5 w-5"})}),e.jsx("button",{onClick:()=>_(s.id),className:"p-2 text-green-600 hover:bg-green-50 rounded-lg transition-colors",title:"Download PDF",children:e.jsx(L,{className:"h-5 w-5"})}),e.jsx("button",{type:"button",onClick:()=>F(s.id),className:"p-2 text-indigo-600 hover:bg-indigo-50 rounded-lg transition-colors",title:"Preview Report",children:e.jsx(w,{className:"h-5 w-5"})}),e.jsx("button",{onClick:()=>k(s.id),className:"p-2 text-yellow-600 hover:bg-yellow-50 rounded-lg transition-colors",title:"Regenerate Report",children:e.jsx(B,{className:"h-5 w-5"})}),e.jsx("button",{onClick:()=>v(s.id),disabled:N===s.id,className:"p-2 text-red-600 hover:bg-red-50 rounded-lg transition-colors disabled:opacity-50",title:"Delete Report",children:e.jsx($,{className:"h-5 w-5"})}),e.jsx("button",{onClick:()=>R(s.id),className:"p-2 text-gray-600 hover:bg-gray-100 rounded-lg transition-colors",title:c===s.id?"Collapse":"Expand Details",children:c===s.id?e.jsx(Z,{className:"h-5 w-5"}):e.jsx(M,{className:"h-5 w-5"})})]})]})}),e.jsx("div",{className:"bg-gradient-to-r from-amber-50 to-orange-50 px-6 py-3 border-t border-amber-200",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(W,{className:"h-5 w-5 text-amber-600"}),e.jsx("span",{className:"text-sm font-semibold text-gray-700",children:"Vendor Bills"}),s.bills_count>0&&e.jsxs("span",{className:"px-2 py-0.5 text-xs font-semibold rounded-full bg-amber-200 text-amber-800",children:[s.bills_count," ",s.bills_count===1?"Bill":"Bills"]})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsxs(o,{href:route("amount-reports.bills.create",[s.id,"kiryana"]),className:`inline-flex items-center px-3 py-1.5 bg-blue-600 hover:bg-blue-700 
                                                            text-white text-xs font-semibold rounded-lg transition-colors shadow-sm`,title:"Create Kiryana Bill",children:[e.jsx(D,{className:"h-4 w-4 mr-1.5"}),"Kiryana Bill"]}),e.jsxs(o,{href:route("amount-reports.bills.create",[s.id,"fuel"]),className:`inline-flex items-center px-3 py-1.5 bg-orange-600 hover:bg-orange-700 
                                                            text-white text-xs font-semibold rounded-lg transition-colors shadow-sm`,title:"Create Fuel Bill",children:[e.jsx(V,{className:"h-4 w-4 mr-1.5"}),"Fuel Bill"]}),s.bills_count>0&&e.jsxs(o,{href:route("amount-reports.bills.index",s.id),className:`inline-flex items-center px-3 py-1.5 bg-gray-600 hover:bg-gray-700 
                                                                text-white text-xs font-semibold rounded-lg transition-colors shadow-sm`,title:"View All Bills",children:[e.jsx(w,{className:"h-4 w-4 mr-1.5"}),"View Bills"]})]})]})}),c===s.id&&e.jsx("div",{className:"px-6 py-4 bg-white border-t border-gray-200",children:e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[h&&s.primary_breakdown&&e.jsxs("div",{className:"space-y-4",children:[e.jsxs("h4",{className:"font-semibold text-gray-900 flex items-center",children:[e.jsx("span",{className:"w-2 h-2 bg-indigo-600 rounded-full mr-2"}),"Primary (Class 1-5) Breakdown"]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{className:"text-gray-600",children:"Pulses:"}),e.jsxs("span",{className:"font-semibold text-gray-900",children:["â‚¹",parseFloat(s.primary_breakdown?.pulses||0).toFixed(2)]})]}),e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{className:"text-gray-600",children:"Vegetables:"}),e.jsxs("span",{className:"font-semibold text-gray-900",children:["â‚¹",parseFloat(s.primary_breakdown?.vegetables||0).toFixed(2)]})]}),e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{className:"text-gray-600",children:"Oil/Fat:"}),e.jsxs("span",{className:"font-semibold text-gray-900",children:["â‚¹",parseFloat(s.primary_breakdown?.oil||0).toFixed(2)]})]}),e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{className:"text-gray-600",children:"Fuel:"}),e.jsxs("span",{className:"font-semibold text-gray-900",children:["â‚¹",parseFloat(s.primary_breakdown?.fuel||0).toFixed(2)]})]}),e.jsxs("div",{className:"flex justify-between text-sm pt-2 border-t border-indigo-100",children:[e.jsx("span",{className:"text-indigo-700 font-semibold",children:"Total Salt & Condiments:"}),e.jsxs("span",{className:"font-bold text-indigo-900",children:["â‚¹",parseFloat(s.primary_breakdown?.salt_total||0).toFixed(2)]})]})]}),s.primary_breakdown?.salt_breakdown&&e.jsxs("div",{className:"mt-4 p-3 bg-indigo-50 rounded-lg",children:[e.jsx("p",{className:"text-xs font-semibold text-indigo-900 mb-2",children:"Salt & Condiments Distribution"}),e.jsx("div",{className:"space-y-1",children:b.map(i=>{const d=parseFloat(s.primary_breakdown.salt_breakdown[i.key]||0),m=s.primary_breakdown.salt_total>0?(d/s.primary_breakdown.salt_total*100).toFixed(1):0;return d>0?e.jsxs("div",{className:"flex justify-between text-xs",children:[e.jsxs("span",{className:"text-gray-700",children:[i.icon," ",i.label,":"]}),e.jsxs("span",{className:"font-semibold text-gray-900",children:["â‚¹",d.toFixed(2)," (",m,"%)"]})]},i.key):null})})]})]}),g&&s.middle_breakdown&&e.jsxs("div",{className:"space-y-4",children:[e.jsxs("h4",{className:"font-semibold text-gray-900 flex items-center",children:[e.jsx("span",{className:"w-2 h-2 bg-purple-600 rounded-full mr-2"}),"Middle (Class 6-8) Breakdown"]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{className:"text-gray-600",children:"Pulses:"}),e.jsxs("span",{className:"font-semibold text-gray-900",children:["â‚¹",parseFloat(s.middle_breakdown?.pulses||0).toFixed(2)]})]}),e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{className:"text-gray-600",children:"Vegetables:"}),e.jsxs("span",{className:"font-semibold text-gray-900",children:["â‚¹",parseFloat(s.middle_breakdown?.vegetables||0).toFixed(2)]})]}),e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{className:"text-gray-600",children:"Oil/Fat:"}),e.jsxs("span",{className:"font-semibold text-gray-900",children:["â‚¹",parseFloat(s.middle_breakdown?.oil||0).toFixed(2)]})]}),e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{className:"text-gray-600",children:"Fuel:"}),e.jsxs("span",{className:"font-semibold text-gray-900",children:["â‚¹",parseFloat(s.middle_breakdown?.fuel||0).toFixed(2)]})]}),e.jsxs("div",{className:"flex justify-between text-sm pt-2 border-t border-purple-100",children:[e.jsx("span",{className:"text-purple-700 font-semibold",children:"Total Salt & Condiments:"}),e.jsxs("span",{className:"font-bold text-purple-900",children:["â‚¹",parseFloat(s.middle_breakdown?.salt_total||0).toFixed(2)]})]})]}),s.middle_breakdown?.salt_breakdown&&e.jsxs("div",{className:"mt-4 p-3 bg-purple-50 rounded-lg",children:[e.jsx("p",{className:"text-xs font-semibold text-purple-900 mb-2",children:"Salt & Condiments Distribution"}),e.jsx("div",{className:"space-y-1",children:b.map(i=>{const d=parseFloat(s.middle_breakdown.salt_breakdown[i.key]||0),m=s.middle_breakdown.salt_total>0?(d/s.middle_breakdown.salt_total*100).toFixed(1):0;return d>0?e.jsxs("div",{className:"flex justify-between text-xs",children:[e.jsxs("span",{className:"text-gray-700",children:[i.icon," ",i.label,":"]}),e.jsxs("span",{className:"font-semibold text-gray-900",children:["â‚¹",d.toFixed(2)," (",m,"%)"]})]},i.key):null})})]})]})]})})]},s.id))}),a.data.length>0&&a.last_page>1&&e.jsx("div",{className:"bg-white px-4 py-3 border-t border-gray-200 sm:px-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"text-sm text-gray-700",children:["Showing ",e.jsx("span",{className:"font-medium",children:a.from})," to"," ",e.jsx("span",{className:"font-medium",children:a.to})," of"," ",e.jsx("span",{className:"font-medium",children:a.total})," results"]}),e.jsxs("div",{className:"flex space-x-2",children:[a.current_page>1&&e.jsx(o,{href:route("amount-reports.index",{page:a.current_page-1}),className:"px-3 py-1 border border-gray-300 rounded-md text-sm font-medium text-gray-700 hover:bg-gray-50",children:"Previous"}),a.current_page<a.last_page&&e.jsx(o,{href:route("amount-reports.index",{page:a.current_page+1}),className:"px-3 py-1 border border-gray-300 rounded-md text-sm font-medium text-gray-700 hover:bg-gray-50",children:"Next"})]})]})})]})]})})]})}export{te as default};
