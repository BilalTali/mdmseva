import{c as S,j as e,H as $,L as i,a as j}from"./app-DHCAgeO8.js";import{A as L}from"./AuthenticatedLayout-dBQysIGU.js";import{T as R}from"./trending-down-CeSOmO-w.js";import{C as P}from"./calendar-CHi90Qvn.js";import{P as E}from"./plus-D7_72eyU.js";import{C as O}from"./circle-check-big-RHf8pWPH.js";import"./ApplicationLogo-Da_2dMoK.js";import"./transition-jgp50ovQ.js";import"./createLucideIcon-DQAdNBRm.js";import"./send-BtT_p_gw.js";function Z({auth:f,consumptions:d=[],schoolType:z,sections:B,enrollment:H,currentMonth:n,currentYear:s,monthName:r="",openingBalance:v=0,closingBalance:l=0,totalPrimaryStudents:o=0,totalMiddleStudents:c=0,totalStudents:m=0,totalRiceConsumed:p=0,totalAmountConsumed:h=0,totalAmountPrimary:w=0,totalAmountMiddle:k=0,totalDays:g=0,primaryRiceRate:_=.1,middleRiceRate:F=.15,primaryAmountRate:C=0,middleAmountRate:D=0,error:y,riceConfig:x,amountConfig:b}){const{props:T}=S(),u=T.flash?.success,N=!!(x&&!x.is_completed&&!x.is_locked&&b?.is_completed),A=t=>{confirm(`Delete daily consumption for ${t.date}?`)&&j.delete(route("daily-consumptions.destroy",t.id),{preserveScroll:!0})},M=()=>{if(!x){alert("Rice configuration not found for this month.");return}if(x.is_locked){alert("Unlock the rice configuration before completing the month.");return}if(!b?.is_completed){alert("Confirm the amount configuration before completing the month.");return}confirm(`Complete ${r} ${s}? This will finalize rice balances and create the next month.`)&&j.post(route("monthly-rice-config.complete"),{month:n,year:s},{preserveScroll:!0})};return e.jsxs(L,{user:f.user,header:e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("h2",{className:"font-semibold text-xl leading-tight",children:["Daily Consumption - ",r," ",s]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(i,{href:route("daily-consumptions.index"),className:"inline-flex items-center px-4 py-2 bg-gray-600 border border-transparent rounded-md font-semibold text-xs text-white uppercase tracking-widest hover:bg-gray-700 transition",children:[e.jsx(P,{className:"w-4 h-4 mr-2"}),"Change Month"]}),e.jsxs(i,{href:route("daily-consumptions.create",{month:n,year:s}),className:"inline-flex items-center px-4 py-2 bg-blue-600 border border-transparent rounded-md font-semibold text-xs text-white uppercase tracking-widest hover:bg-blue-700 transition",children:[e.jsx(E,{className:"w-4 h-4 mr-2"}),"Add Entry"]}),e.jsxs("button",{type:"button",onClick:M,disabled:!N,className:`inline-flex items-center px-4 py-2 rounded-md font-semibold text-xs uppercase tracking-widest transition ${N?"bg-green-600 text-white hover:bg-green-700":"bg-gray-200 text-gray-500 cursor-not-allowed"}`,children:[e.jsx(O,{className:"w-4 h-4 mr-2"}),"Complete Month"]})]})]}),children:[e.jsx($,{title:`Daily Consumption - ${r} ${s}`}),e.jsx("div",{className:"py-12",children:e.jsxs("div",{className:"max-w-7xl mx-auto sm:px-6 lg:px-8 space-y-6",children:[u&&e.jsx("div",{className:"bg-green-50 border-l-4 border-green-500 p-4 rounded",children:e.jsx("p",{className:"text-green-800 text-sm font-semibold",children:u})}),x?.is_completed&&e.jsx("div",{className:"bg-green-50 border-l-4 border-green-500 p-4 rounded",children:e.jsxs("p",{className:"text-green-800 text-sm",children:["Month completed on ",new Date(x.completed_at).toLocaleDateString(),"."]})}),y&&e.jsx("div",{className:"bg-red-50 border-l-4 border-red-500 p-4 rounded",children:e.jsx("p",{className:"text-red-700",children:y})}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[e.jsxs("div",{className:"bg-white rounded-lg shadow p-4",children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Opening Balance"}),e.jsxs("p",{className:"text-2xl font-bold text-blue-600",children:[Number(v).toFixed(2)," kg"]})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow p-4",children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Total Rice Consumed"}),e.jsxs("p",{className:"text-2xl font-bold text-orange-600",children:[Number(p).toFixed(2)," kg"]})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow p-4",children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Closing Balance"}),e.jsxs("p",{className:`text-2xl font-bold ${Number(l)<0?"text-red-600":"text-green-600"}`,children:[Number(l).toFixed(2)," kg"]}),Number(l)<0&&e.jsxs("div",{className:"flex items-center text-red-600 text-xs mt-1",children:[e.jsx(R,{className:"w-3 h-3 mr-1"}),"Deficit"]})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow p-4",children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Total Amount Spent"}),e.jsxs("p",{className:"text-2xl font-bold text-purple-600",children:["₹",Number(h).toFixed(2)]})]})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow overflow-hidden",children:[e.jsx("div",{className:"bg-gradient-to-r from-blue-600 to-blue-700 px-6 py-4",children:e.jsxs("h3",{className:"text-lg font-bold text-white",children:["Rice Consumption Details - ",r," ",s]})}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-3 text-center text-xs font-semibold text-gray-700 uppercase",children:"S.No."}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-semibold text-gray-700 uppercase",children:"Date"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-semibold text-gray-700 uppercase",children:"Day"}),e.jsx("th",{className:"px-4 py-3 text-right text-xs font-semibold text-gray-700 uppercase",children:"Primary"}),e.jsx("th",{className:"px-4 py-3 text-right text-xs font-semibold text-gray-700 uppercase",children:"Middle"}),e.jsx("th",{className:"px-4 py-3 text-right text-xs font-semibold text-gray-700 uppercase",children:"Total"}),e.jsx("th",{className:"px-4 py-3 text-right text-xs font-semibold text-gray-700 uppercase",children:"Primary Rice (kg)"}),e.jsx("th",{className:"px-4 py-3 text-right text-xs font-semibold text-gray-700 uppercase",children:"Middle Rice (kg)"}),e.jsx("th",{className:"px-4 py-3 text-right text-xs font-semibold text-gray-700 uppercase",children:"Total Rice (kg)"}),e.jsx("th",{className:"px-4 py-3 text-right text-xs font-semibold text-gray-700 uppercase",children:"Balance (kg)"}),e.jsx("th",{className:"px-4 py-3 text-center text-xs font-semibold text-gray-700 uppercase",children:"Actions"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:d.length===0?e.jsx("tr",{children:e.jsxs("td",{colSpan:"11",className:"px-4 py-8 text-center text-gray-500",children:["No consumption records for ",r," ",s,'. Click "Add Entry" to start.']})}):d.map((t,a)=>e.jsxs("tr",{className:"hover:bg-gray-50 transition",children:[e.jsx("td",{className:"px-4 py-3 text-sm text-center text-gray-600 font-medium",children:a+1}),e.jsx("td",{className:"px-4 py-3 text-sm text-gray-900",children:t.date||""}),e.jsx("td",{className:"px-4 py-3 text-sm text-gray-600",children:t.dayName||t.day||""}),e.jsx("td",{className:"px-4 py-3 text-sm text-right text-gray-900",children:t.served_primary||0}),e.jsx("td",{className:"px-4 py-3 text-sm text-right text-gray-900",children:t.served_middle||0}),e.jsx("td",{className:"px-4 py-3 text-sm text-right font-semibold text-gray-900",children:t.total_served||0}),e.jsx("td",{className:"px-4 py-3 text-sm text-right text-blue-600 font-medium",children:Number(t.rice_primary||0).toFixed(2)}),e.jsx("td",{className:"px-4 py-3 text-sm text-right text-indigo-600 font-medium",children:Number(t.rice_middle||0).toFixed(2)}),e.jsx("td",{className:"px-4 py-3 text-sm text-right text-orange-600 font-semibold",children:Number(t.rice_consumed||0).toFixed(2)}),e.jsx("td",{className:`px-4 py-3 text-sm text-right font-semibold ${Number(t.rice_balance||0)<0?"text-red-600":"text-green-600"}`,children:Number(t.rice_balance||0).toFixed(2)}),e.jsx("td",{className:"px-4 py-3 text-sm text-center",children:e.jsxs("div",{className:"flex items-center justify-center gap-2",children:[e.jsx(i,{href:route("daily-consumptions.edit",t.id),className:"text-blue-600 hover:text-blue-800 font-medium",children:"Edit"}),e.jsx("button",{type:"button",onClick:()=>A(t),className:"text-red-600 hover:text-red-800 font-medium",children:"Delete"})]})})]},t.id||a))}),d.length>0&&e.jsx("tfoot",{className:"bg-blue-50 border-t-2 border-blue-200",children:e.jsxs("tr",{children:[e.jsxs("td",{className:"px-4 py-3 text-sm font-bold text-gray-900",colSpan:"3",children:["TOTAL (",g," days)"]}),e.jsx("td",{className:"px-4 py-3 text-sm font-bold text-right text-gray-900",children:o}),e.jsx("td",{className:"px-4 py-3 text-sm font-bold text-right text-gray-900",children:c}),e.jsx("td",{className:"px-4 py-3 text-sm font-bold text-right text-gray-900",children:m}),e.jsx("td",{className:"px-4 py-3 text-sm font-bold text-right text-blue-600",children:"-"}),e.jsx("td",{className:"px-4 py-3 text-sm font-bold text-right text-indigo-600",children:"-"}),e.jsx("td",{className:"px-4 py-3 text-sm font-bold text-right text-orange-600",children:Number(p).toFixed(2)}),e.jsx("td",{className:`px-4 py-3 text-sm font-bold text-right ${Number(l)<0?"text-red-600":"text-green-600"}`,children:Number(l).toFixed(2)}),e.jsx("td",{className:"px-4 py-3"})]})})]})})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow overflow-hidden",children:[e.jsx("div",{className:"bg-gradient-to-r from-purple-600 to-purple-700 px-6 py-4",children:e.jsxs("h3",{className:"text-lg font-bold text-white",children:["Amount Consumption Details - ",r," ",s]})}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-3 text-center text-xs font-semibold text-gray-700 uppercase",children:"S.No."}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-semibold text-gray-700 uppercase",children:"Date"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-semibold text-gray-700 uppercase",children:"Day"}),e.jsx("th",{className:"px-4 py-3 text-right text-xs font-semibold text-gray-700 uppercase",children:"Primary Students"}),e.jsx("th",{className:"px-4 py-3 text-right text-xs font-semibold text-gray-700 uppercase",children:"Middle Students"}),e.jsx("th",{className:"px-4 py-3 text-right text-xs font-semibold text-gray-700 uppercase",children:"Total Students"}),e.jsxs("th",{className:"px-4 py-3 text-right text-xs font-semibold text-gray-700 uppercase",children:[e.jsx("div",{children:"Primary Amount (₹)"}),e.jsxs("div",{className:"text-[10px] text-gray-500 font-normal",children:["@ ₹",Number(C).toFixed(2)," / student"]})]}),e.jsxs("th",{className:"px-4 py-3 text-right text-xs font-semibold text-gray-700 uppercase",children:[e.jsx("div",{children:"Middle Amount (₹)"}),e.jsxs("div",{className:"text-[10px] text-gray-500 font-normal",children:["@ ₹",Number(D).toFixed(2)," / student"]})]}),e.jsx("th",{className:"px-4 py-3 text-right text-xs font-semibold text-gray-700 uppercase",children:"Total Amount (₹)"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:d.length===0?e.jsx("tr",{children:e.jsxs("td",{colSpan:"9",className:"px-4 py-8 text-center text-gray-500",children:["No consumption records for ",r," ",s,'. Click "Add Entry" to start.']})}):d.map((t,a)=>e.jsxs("tr",{className:"hover:bg-gray-50 transition",children:[e.jsx("td",{className:"px-4 py-3 text-sm text-center text-gray-600 font-medium",children:a+1}),e.jsx("td",{className:"px-4 py-3 text-sm text-gray-900",children:t.date||""}),e.jsx("td",{className:"px-4 py-3 text-sm text-gray-600",children:t.dayName||t.day||""}),e.jsx("td",{className:"px-4 py-3 text-sm text-right text-gray-900",children:t.served_primary||0}),e.jsx("td",{className:"px-4 py-3 text-sm text-right text-gray-900",children:t.served_middle||0}),e.jsx("td",{className:"px-4 py-3 text-sm text-right font-semibold text-gray-900",children:t.total_served||0}),e.jsxs("td",{className:"px-4 py-3 text-sm text-right text-blue-600 font-medium",children:["₹",Number(t.amount_primary||0).toFixed(2)]}),e.jsxs("td",{className:"px-4 py-3 text-sm text-right text-indigo-600 font-medium",children:["₹",Number(t.amount_middle||0).toFixed(2)]}),e.jsxs("td",{className:"px-4 py-3 text-sm text-right text-purple-600 font-semibold",children:["₹",Number(t.amount_consumed||0).toFixed(2)]})]},t.id||a))}),d.length>0&&e.jsx("tfoot",{className:"bg-purple-50 border-t-2 border-purple-200",children:e.jsxs("tr",{children:[e.jsxs("td",{className:"px-4 py-3 text-sm font-bold text-gray-900",colSpan:"3",children:["TOTAL (",g," days)"]}),e.jsx("td",{className:"px-4 py-3 text-sm font-bold text-right text-gray-900",children:o}),e.jsx("td",{className:"px-4 py-3 text-sm font-bold text-right text-gray-900",children:c}),e.jsx("td",{className:"px-4 py-3 text-sm font-bold text-right text-gray-900",children:m}),e.jsxs("td",{className:"px-4 py-3 text-sm font-bold text-right text-blue-600",children:["₹",Number(w).toFixed(2)]}),e.jsxs("td",{className:"px-4 py-3 text-sm font-bold text-right text-indigo-600",children:["₹",Number(k).toFixed(2)]}),e.jsxs("td",{className:"px-4 py-3 text-sm font-bold text-right text-purple-600",children:["₹",Number(h).toFixed(2)]})]})})]})})]}),e.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:e.jsxs("div",{className:"flex items-start",children:[e.jsx("svg",{className:"w-5 h-5 text-blue-600 mr-2 flex-shrink-0 mt-0.5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),e.jsxs("div",{className:"text-sm text-blue-800",children:[e.jsx("p",{className:"font-semibold mb-1",children:"Rice Consumption Rates:"}),e.jsxs("p",{children:["• Primary: ",(Number(_)*1e3).toFixed(0),"g per student per day"]}),e.jsxs("p",{children:["• Middle: ",(Number(F)*1e3).toFixed(0),"g per student per day"]})]})]})})]})})]})}export{Z as default};
