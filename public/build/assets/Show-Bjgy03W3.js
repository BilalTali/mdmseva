import{u,j as e,H as j,L as b}from"./app-CsYsEJej.js";import{A as N}from"./AdminLayout-Ej69H2OJ.js";import{A as v}from"./arrow-left-C9m0dGw8.js";import{M as f}from"./SupportChatWidget-BqMpaivd.js";import{S as y}from"./star-CV7rP6x4.js";import{C as o}from"./circle-check-big-BV49VQvH.js";import{U as i}from"./user-5Ho1bpMb.js";import{M as w,P as _,S}from"./school-DuxTeWX5.js";import{C}from"./clock-BQbxZYpo.js";import{C as R}from"./circle-alert-Bq2Yy1ho.js";import"./AuthenticatedLayout-B6Y-dB0A.js";import"./transition-mBUwcw_M.js";import"./AuthLogo-BIIIqCR0.js";import"./createLucideIcon-DQfYwHjk.js";function W({feedback:s}){const{data:l,setData:a,post:d,processing:n,errors:r,reset:c,recentlySuccessful:m}=u({response:"",status:s.status==="resolved"?"resolved":s.status==="closed"?"closed":"in_progress"}),x=t=>{t.preventDefault(),d(route("admin.feedback.respond",s.id),{onSuccess:()=>{c("response")}})},p=t=>({new:"bg-blue-100 text-blue-800",in_progress:"bg-yellow-100 text-yellow-800",resolved:"bg-green-100 text-green-800",closed:"bg-gray-100 text-gray-800"})[t]||"bg-gray-100 text-gray-800",h=t=>({low:"bg-emerald-100 text-emerald-800",medium:"bg-amber-100 text-amber-800",high:"bg-orange-100 text-orange-800",urgent:"bg-red-100 text-red-800"})[t]||"bg-stone-100 text-stone-700";return e.jsxs(N,{children:[e.jsx(j,{title:`Feedback #${s.id}`}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsxs("p",{className:"text-sm text-stone-500",children:["Feedback ID #",s.id]}),e.jsx("h1",{className:"text-2xl font-bold text-stone-900",children:"Feedback Details"})]}),e.jsxs(b,{href:route("admin.feedback.index"),className:"inline-flex items-center gap-2 px-4 py-2 rounded-lg border border-stone-200 text-stone-700 hover:bg-stone-50",children:[e.jsx(v,{className:"w-4 h-4"}),"Back to list"]})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[e.jsxs("div",{className:"lg:col-span-2 space-y-6",children:[e.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-stone-200 p-6",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[e.jsx("div",{className:"p-3 bg-amber-50 rounded-lg",children:e.jsx(f,{className:"w-6 h-6 text-amber-600"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm uppercase tracking-wide text-stone-500",children:"Feedback Type"}),e.jsx("p",{className:"text-lg font-semibold text-stone-900",children:s.type?.replace("_"," ")??"General"})]})]}),e.jsxs("div",{className:"flex flex-wrap gap-2 mb-4",children:[e.jsx("span",{className:`px-3 py-1 rounded-full text-xs font-semibold ${p(s.status)}`,children:s.status.replace("_"," ").toUpperCase()}),e.jsxs("span",{className:`px-3 py-1 rounded-full text-xs font-semibold ${h(s.priority)}`,children:["Priority: ",s.priority??"medium"]}),e.jsxs("span",{className:"flex items-center px-3 py-1 rounded-full text-xs font-semibold bg-purple-100 text-purple-800",children:[e.jsx(y,{className:"w-4 h-4 mr-1 fill-current"}),s.rating,"/5"]})]}),e.jsxs("div",{className:"bg-stone-50 rounded-xl p-5",children:[e.jsx("p",{className:"text-sm uppercase tracking-wide text-stone-500 mb-2",children:"Message"}),e.jsx("p",{className:"text-stone-800 whitespace-pre-line leading-relaxed",children:s.message})]})]}),s.admin_response&&e.jsxs("div",{className:"bg-green-50 border border-green-200 rounded-xl p-6",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[e.jsx(o,{className:"text-green-600"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-semibold text-green-900",children:"Admin Response"}),e.jsxs("p",{className:"text-xs text-green-700",children:[s.responded_by?`Responded by ${s.responded_by.name}`:"Response",s.responded_at&&` • ${new Date(s.responded_at).toLocaleString()}`]})]})]}),e.jsx("p",{className:"text-green-900 whitespace-pre-line",children:s.admin_response})]})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-stone-200 p-6 space-y-4",children:[e.jsxs("h2",{className:"text-lg font-semibold text-stone-900 flex items-center gap-2",children:[e.jsx(i,{className:"w-5 h-5 text-stone-500"}),"Reporter Details"]}),e.jsxs("div",{className:"space-y-3 text-sm text-stone-700",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(i,{className:"w-4 h-4 text-stone-400"}),s.name]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(w,{className:"w-4 h-4 text-stone-400"}),s.email]}),s.phone&&e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(_,{className:"w-4 h-4 text-stone-400"}),s.phone]}),s.school_name&&e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(S,{className:"w-4 h-4 text-stone-400"}),s.school_name]}),e.jsxs("div",{className:"flex items-center gap-2 text-xs text-stone-500",children:[e.jsx(C,{className:"w-4 h-4"}),"Submitted on ",new Date(s.created_at).toLocaleString()]})]})]}),e.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-stone-200 p-6",children:[e.jsx("h2",{className:"text-lg font-semibold text-stone-900 mb-4",children:"Add Admin Response"}),e.jsxs("form",{onSubmit:x,className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-stone-700 mb-1",children:"Status"}),e.jsxs("select",{value:l.status,onChange:t=>a("status",t.target.value),className:"w-full rounded-lg border border-stone-300 px-3 py-2 focus:ring-2 focus:ring-amber-500",children:[e.jsx("option",{value:"in_progress",children:"In Progress"}),e.jsx("option",{value:"resolved",children:"Resolved"}),e.jsx("option",{value:"closed",children:"Closed"})]}),r.status&&e.jsx("p",{className:"text-sm text-red-600 mt-1",children:r.status})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-stone-700 mb-1",children:"Response *"}),e.jsx("textarea",{value:l.response,onChange:t=>a("response",t.target.value),rows:4,className:"w-full rounded-lg border border-stone-300 px-3 py-2 focus:ring-2 focus:ring-amber-500",placeholder:"Write your reply to the reporter..."}),r.response&&e.jsx("p",{className:"text-sm text-red-600 mt-1",children:r.response})]}),e.jsx("button",{type:"submit",disabled:n,className:"w-full inline-flex items-center justify-center gap-2 px-4 py-2 rounded-lg bg-amber-600 text-white font-semibold hover:bg-amber-700 focus:ring-2 focus:ring-amber-500 disabled:opacity-60",children:n?"Submitting…":"Send Response"}),m&&e.jsxs("div",{className:"flex items-center gap-2 text-green-700 text-sm",children:[e.jsx(o,{className:"w-4 h-4"}),"Response saved successfully."]}),r.submit&&e.jsxs("div",{className:"flex items-center gap-2 text-red-700 text-sm",children:[e.jsx(R,{className:"w-4 h-4"}),r.submit]})]})]})]})]})]})]})}export{W as default};
