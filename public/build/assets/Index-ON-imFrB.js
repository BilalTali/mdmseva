import{j as e,r as p,H as L,L as d,a as m}from"./app-DHCAgeO8.js";import{A as _}from"./AuthenticatedLayout-dBQysIGU.js";import{F as A}from"./FilterPanel-D57W6NgD.js";import{h as j}from"./dialog-uS2gDlxV.js";import{K as v}from"./transition-jgp50ovQ.js";import"./ApplicationLogo-Da_2dMoK.js";import"./createLucideIcon-DQAdNBRm.js";import"./send-BtT_p_gw.js";import"./with-selector-ClQDlPES.js";import"./index-Ba4gUWok.js";function F({status:i,size:s="md"}){const r=i==="active"||i===!0||i===1,h={sm:"px-2 py-0.5 text-xs",md:"px-2.5 py-1 text-sm",lg:"px-3 py-1.5 text-base"},a="inline-flex items-center font-medium rounded-full",n=r?"bg-green-100 text-green-800":"bg-red-100 text-red-800";return e.jsxs("span",{className:`${a} ${h[s]} ${n}`,children:[e.jsx("span",{className:`w-1.5 h-1.5 mr-1.5 rounded-full ${r?"bg-green-600":"bg-red-600"}`}),r?"Active":"Inactive"]})}function b({isOpen:i,onClose:s,onConfirm:r,title:h,message:a,variant:n="info",confirmText:u="Confirm",cancelText:o="Cancel",processing:x=!1}){const g={info:{icon:"text-blue-600",button:"bg-blue-600 hover:bg-blue-700 focus:ring-blue-500"},warning:{icon:"text-yellow-600",button:"bg-yellow-600 hover:bg-yellow-700 focus:ring-yellow-500"},danger:{icon:"text-red-600",button:"bg-red-600 hover:bg-red-700 focus:ring-red-500"}},c=g[n]||g.info;return e.jsx(v,{appear:!0,show:i,as:p.Fragment,children:e.jsxs(j,{as:"div",className:"relative z-50",onClose:s,children:[e.jsx(v.Child,{as:p.Fragment,enter:"ease-out duration-300",enterFrom:"opacity-0",enterTo:"opacity-100",leave:"ease-in duration-200",leaveFrom:"opacity-100",leaveTo:"opacity-0",children:e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-25"})}),e.jsx("div",{className:"fixed inset-0 overflow-y-auto",children:e.jsx("div",{className:"flex min-h-full items-center justify-center p-4 text-center",children:e.jsx(v.Child,{as:p.Fragment,enter:"ease-out duration-300",enterFrom:"opacity-0 scale-95",enterTo:"opacity-100 scale-100",leave:"ease-in duration-200",leaveFrom:"opacity-100 scale-100",leaveTo:"opacity-0 scale-95",children:e.jsxs(j.Panel,{className:"w-full max-w-md transform overflow-hidden rounded-2xl bg-white p-6 text-left align-middle shadow-xl transition-all",children:[e.jsxs("div",{className:"flex items-start",children:[e.jsx("div",{className:"flex-shrink-0",children:n==="warning"||n==="danger"?e.jsx("svg",{className:`h-6 w-6 ${c.icon}`,fill:"none",viewBox:"0 0 24 24",strokeWidth:"1.5",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 9v3.75m-9.303 3.376c-.866 1.5.217 3.374 1.948 3.374h14.71c1.73 0 2.813-1.874 1.948-3.374L13.949 3.378c-.866-1.5-3.032-1.5-3.898 0L2.697 16.126zM12 15.75h.007v.008H12v-.008z"})}):e.jsx("svg",{className:`h-6 w-6 ${c.icon}`,fill:"none",viewBox:"0 0 24 24",strokeWidth:"1.5",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M11.25 11.25l.041-.02a.75.75 0 011.063.852l-.708 2.836a.75.75 0 001.063.853l.041-.021M21 12a9 9 0 11-18 0 9 9 0 0118 0zm-9-3.75h.008v.008H12V8.25z"})})}),e.jsxs("div",{className:"ml-4 flex-1",children:[e.jsx(j.Title,{as:"h3",className:"text-lg font-medium leading-6 text-gray-900",children:h}),e.jsx("div",{className:"mt-2",children:e.jsx("p",{className:"text-sm text-gray-500",children:a})})]})]}),e.jsxs("div",{className:"mt-6 flex items-center justify-end space-x-3",children:[e.jsx("button",{type:"button",className:"inline-flex justify-center rounded-md border border-gray-300 bg-white px-4 py-2 text-sm font-medium text-gray-700 hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-gray-500 focus:ring-offset-2",onClick:s,disabled:x,children:o}),e.jsx("button",{type:"button",className:`inline-flex justify-center rounded-md border border-transparent px-4 py-2 text-sm font-medium text-white focus:outline-none focus:ring-2 focus:ring-offset-2 disabled:opacity-50 ${c.button}`,onClick:r,disabled:x,children:x?e.jsxs(e.Fragment,{children:[e.jsxs("svg",{className:"animate-spin -ml-1 mr-2 h-4 w-4 text-white",fill:"none",viewBox:"0 0 24 24",children:[e.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),e.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Processing..."]}):u})]})]})})})})]})})}const N=i=>{if(typeof i!="string")return"";const s=document.createElement("textarea");return s.innerHTML=i,s.value.replace(/<[^>]*>/g,"")};function V({auth:i,schools:s,filters:r={},stats:h={}}){const[a,n]=p.useState({isOpen:!1,school:null,action:null}),[u,o]=p.useState(!1),x=t=>{m.get(route("admin.schools.index"),t,{preserveState:!0,preserveScroll:!0})},g=()=>{m.get(route("admin.schools.index"),{},{preserveState:!0,preserveScroll:!0})},c=t=>{const l=r.sort===t&&r.direction==="asc"?"desc":"asc";m.get(route("admin.schools.index"),{...r,sort:t,direction:l},{preserveState:!0,preserveScroll:!0})},w=(t,l)=>{n({isOpen:!0,school:t,action:l})},f=()=>{n({isOpen:!1,school:null,action:null})},k=()=>{o(!0),m.post(route("admin.schools.activate",a.school.id),{},{onSuccess:()=>{f(),o(!1)},onError:()=>{o(!1)}})},C=()=>{o(!0),m.post(route("admin.schools.deactivate",a.school.id),{},{onSuccess:()=>{f(),o(!1)},onError:()=>{o(!1)}})},S=()=>{window.location.href=route("admin.schools.export",r)},y=t=>r.sort!==t?e.jsx("svg",{className:"w-4 h-4 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M7 16V4m0 0L3 8m4-4l4 4m6 0v12m0 0l4-4m-4 4l-4-4"})}):r.direction==="asc"?e.jsx("svg",{className:"w-4 h-4 text-indigo-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M5 15l7-7 7 7"})}):e.jsx("svg",{className:"w-4 h-4 text-indigo-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M19 9l-7 7-7-7"})});return e.jsxs(_,{header:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-semibold leading-tight text-gray-800",children:"Manage Schools"}),e.jsxs("p",{className:"mt-1 text-sm text-gray-600",children:["Showing ",s.data.length," of ",s.total," schools"]})]}),e.jsxs("button",{onClick:S,className:"inline-flex items-center px-4 py-2 bg-indigo-600 border border-transparent rounded-md font-semibold text-xs text-white uppercase tracking-widest hover:bg-indigo-700 active:bg-indigo-900 focus:outline-none focus:border-indigo-900 focus:ring ring-indigo-300 transition-all ease-in-out duration-150",children:[e.jsx("svg",{className:"w-4 h-4 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M12 10v6m0 0l-3-3m3 3l3-3m2 8H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),"Export CSV"]})]}),children:[e.jsx(L,{title:"Manage Schools"}),e.jsxs("div",{className:"py-6",children:[e.jsx(A,{onApply:x,onReset:g,showDateFilters:!1,showSchoolTypeFilter:!0,showStatusFilter:!0,defaultFilters:r}),e.jsxs("div",{className:"bg-white rounded-lg shadow overflow-hidden",children:[e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"#"}),e.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider cursor-pointer hover:bg-gray-100",onClick:()=>c("school_name"),children:e.jsxs("div",{className:"flex items-center space-x-1",children:[e.jsx("span",{children:"School Name"}),y("school_name")]})}),e.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"User Name"}),e.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"UDISE"}),e.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider cursor-pointer hover:bg-gray-100",onClick:()=>c("district"),children:e.jsxs("div",{className:"flex items-center space-x-1",children:[e.jsx("span",{children:"Location"}),y("district")]})}),e.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"School Type"}),e.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),e.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider cursor-pointer hover:bg-gray-100",onClick:()=>c("created_at"),children:e.jsxs("div",{className:"flex items-center space-x-1",children:[e.jsx("span",{children:"Registered"}),y("created_at")]})}),e.jsx("th",{scope:"col",className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Profile"}),e.jsx("th",{scope:"col",className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:s.data.length>0?s.data.map((t,l)=>e.jsxs("tr",{className:"hover:bg-gray-50",children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:s.from+l}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx(d,{href:route("admin.schools.show",t.id),className:"text-sm font-medium text-indigo-600 hover:text-indigo-900",children:t.school_name})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:t.name}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:t.udise}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:e.jsxs("div",{children:[e.jsx("div",{className:"font-medium text-gray-900",children:t.district?.name||t.district||"N/A"}),e.jsxs("div",{className:"text-xs text-gray-500",children:[t.zone?.name||t.zone||"N/A"," Â· ",t.state]})]})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("span",{className:"px-2 inline-flex text-xs leading-5 font-semibold rounded-full bg-blue-100 text-blue-800 capitalize",children:t.school_type})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx(F,{status:t.is_active})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:new Date(t.created_at).toLocaleDateString("en-IN",{day:"2-digit",month:"short",year:"numeric"})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium",children:e.jsx(d,{href:route("admin.schools.show",t.id)+"#profile",className:"text-indigo-600 hover:text-indigo-900",children:"Profile"})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium",children:e.jsxs("div",{className:"flex items-center justify-end space-x-2",children:[e.jsx(d,{href:route("admin.schools.show",t.id),className:"text-indigo-600 hover:text-indigo-900",children:"View"}),t.is_active?e.jsx("button",{onClick:()=>w(t,"deactivate"),className:"text-red-600 hover:text-red-900",children:"Deactivate"}):e.jsx("button",{onClick:()=>w(t,"activate"),className:"text-green-600 hover:text-green-900",children:"Activate"})]})})]},t.id)):e.jsx("tr",{children:e.jsx("td",{colSpan:"9",className:"px-6 py-12 text-center text-sm text-gray-500",children:"No schools found matching your filters."})})})]})}),s.total>s.per_page&&e.jsxs("div",{className:"bg-white px-4 py-3 flex items-center justify-between border-t border-gray-200 sm:px-6",children:[e.jsxs("div",{className:"flex-1 flex justify-between sm:hidden",children:[s.prev_page_url&&e.jsx(d,{href:s.prev_page_url,className:"relative inline-flex items-center px-4 py-2 border border-gray-300 text-sm font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50",children:"Previous"}),s.next_page_url&&e.jsx(d,{href:s.next_page_url,className:"ml-3 relative inline-flex items-center px-4 py-2 border border-gray-300 text-sm font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50",children:"Next"})]}),e.jsxs("div",{className:"hidden sm:flex-1 sm:flex sm:items-center sm:justify-between",children:[e.jsx("div",{children:e.jsxs("p",{className:"text-sm text-gray-700",children:["Showing ",e.jsx("span",{className:"font-medium",children:s.from})," to"," ",e.jsx("span",{className:"font-medium",children:s.to})," of"," ",e.jsx("span",{className:"font-medium",children:s.total})," results"]})}),e.jsx("div",{children:e.jsx("nav",{className:"relative z-0 inline-flex rounded-md shadow-sm -space-x-px","aria-label":"Pagination",children:s.links.map((t,l)=>t.url?e.jsx(d,{href:t.url,className:`relative inline-flex items-center px-4 py-2 border text-sm font-medium ${t.active?"z-10 bg-indigo-50 border-indigo-500 text-indigo-600":"bg-white border-gray-300 text-gray-500 hover:bg-gray-50"}`,children:N(t.label)},l):e.jsx("span",{className:"relative inline-flex items-center px-4 py-2 border border-gray-300 bg-gray-100 text-sm font-medium text-gray-400",children:N(t.label)},l))})})]})]})]})]}),a.action==="activate"&&e.jsx(b,{isOpen:a.isOpen,onClose:f,onConfirm:k,title:"Activate School",message:`Are you sure you want to activate ${a.school?.school_name}? This will allow the school to access the system again.`,variant:"info",confirmText:"Activate",processing:u}),a.action==="deactivate"&&e.jsx(b,{isOpen:a.isOpen,onClose:f,onConfirm:C,title:"Deactivate School",message:`Are you sure you want to deactivate ${a.school?.school_name}? This will prevent the school from accessing the system. The school's data will be preserved and can be accessed when reactivated.`,variant:"danger",confirmText:"Deactivate",processing:u})]})}export{V as default};
