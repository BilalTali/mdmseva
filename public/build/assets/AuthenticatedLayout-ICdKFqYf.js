import{r as i,j as e,L as l,c as X,a as ue,b,R as ze}from"./app-cHtLohZW.js";import{K as Fe}from"./transition-3zuZziW7.js";import{A as Ee}from"./AuthLogo-DTYP0PHO.js";import{M as $,X as R,a as pe,f as Be,C as Re,b as Te,E as Ie,S as Ve,c as He,d as Oe,i as fe,e as T,g as ve,h as Ue}from"./SupportChatWidget-DGKaH8G_.js";import{c as Z}from"./createLucideIcon-BgoVBqqv.js";const J=i.createContext(),u=({children:s})=>{const[n,o]=i.useState(!1),x=()=>{o(c=>!c)};return e.jsx(J.Provider,{value:{open:n,setOpen:o,toggleOpen:x},children:e.jsx("div",{className:"relative",children:s})})},Pe=({children:s})=>{const{open:n,setOpen:o,toggleOpen:x}=i.useContext(J);return e.jsxs(e.Fragment,{children:[e.jsx("div",{onClick:x,children:s}),n&&e.jsx("div",{className:"fixed inset-0 z-40",onClick:()=>o(!1)})]})},Qe=({align:s="right",width:n="48",contentClasses:o="py-1 bg-[var(--surface-00)]",children:x})=>{const{open:c,setOpen:m}=i.useContext(J);let p="origin-top";s==="left"?p="ltr:origin-top-left rtl:origin-top-right start-0":s==="right"&&(p="ltr:origin-top-right rtl:origin-top-left end-0");let f="";return n==="48"&&(f="w-48"),e.jsx(e.Fragment,{children:e.jsx(Fe,{show:c,enter:"transition ease-out duration-200",enterFrom:"opacity-0 scale-95",enterTo:"opacity-100 scale-100",leave:"transition ease-in duration-75",leaveFrom:"opacity-100 scale-100",leaveTo:"opacity-0 scale-95",children:e.jsx("div",{className:`absolute z-50 mt-2 rounded-md shadow-lg ${p} ${f}`,onClick:()=>m(!1),children:e.jsx("div",{className:"rounded-md ring-1 ring-black ring-opacity-5 "+o,children:x})})})})},Ge=({className:s="",children:n,...o})=>e.jsx(l,{...o,className:"block w-full px-4 py-2 text-start text-sm leading-5 text-[var(--text-secondary)] transition duration-150 ease-in-out hover:bg-[var(--surface-10)] focus:bg-[var(--surface-10)] focus:outline-none "+s,children:n});u.Trigger=Pe;u.Content=Qe;u.Link=Ge;function K({active:s=!1,className:n="",children:o,...x}){return e.jsx(l,{...x,className:`flex w-full items-start border-l-4 py-2 pe-4 ps-3 ${s?"border-primary-400 bg-primary-50 text-primary-700 focus:border-primary-700 focus:bg-primary-100 focus:text-primary-800":"border-transparent text-secondary-600 hover:border-secondary-300 hover:bg-secondary-50 hover:text-secondary-800 focus:border-secondary-300 focus:bg-secondary-50 focus:text-secondary-800"} text-base font-medium transition duration-150 ease-in-out focus:outline-none ${n}`,children:o})}function Ye({currentRoute:s}){const[n,o]=i.useState(!1),x=()=>{const j=["roll-statements.index","roll-statements.create","roll-statements.edit","roll-statements.show"],_=["monthly-rice-config.index","monthly-rice-config.create","monthly-rice-config.edit"],k=["amount-config.index","amount-config.create","amount-config.edit","amount-config.show"];return j.some(w=>s&&s.startsWith(w))||_.some(w=>s&&s.startsWith(w))||k.some(w=>s&&s.startsWith(w))},c=()=>s&&(s.startsWith("rice-reports")||s.startsWith("amount-reports")),[m,p]=i.useState(x()),[f,y]=i.useState(c());i.useEffect(()=>{p(x()),y(c())},[s]),i.useEffect(()=>{o(!1)},[s]),i.useEffect(()=>(n?document.body.style.overflow="hidden":document.body.style.overflow="unset",()=>{document.body.style.overflow="unset"}),[n]);const L=j=>s===j,h=()=>x(),I=()=>c(),S=()=>e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"p-6 border-b border-[var(--sidebar-border)] bg-gradient-to-r from-[var(--primary-600)] to-[var(--primary-700)]",children:e.jsx(Ee,{className:"text-white"})}),e.jsxs("nav",{className:"p-4 overflow-y-auto flex-1 bg-[var(--sidebar-bg)] scrollbar-thin scrollbar-thumb-[var(--border-medium)]",children:[e.jsxs(l,{href:route("dashboard"),className:`flex items-center px-4 py-3 rounded-xl mb-2 transition-all duration-200 font-medium ${L("dashboard")?"bg-[var(--sidebar-item-active)] text-[var(--sidebar-text-active)] shadow-md shadow-primary-500/20":"text-[var(--sidebar-text)] hover:bg-[var(--sidebar-item-hover)] hover:text-[var(--primary-600)]"}`,children:[e.jsx("svg",{className:"w-5 h-5 mr-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 12l2-2m0 0l7-7 7 7M5 10v10a1 1 0 001 1h3m10-11l2 2m-2-2v10a1 1 0 01-1 1h-3m-6 0a1 1 0 001-1v-4a1 1 0 011-1h2a1 1 0 011 1v4a1 1 0 001 1m-6 0h6"})}),e.jsx("span",{children:"Dashboard"})]}),e.jsxs("div",{className:"mb-2",children:[e.jsxs("button",{onClick:()=>p(!m),className:`w-full flex items-center justify-between px-4 py-3 rounded-xl transition-all duration-200 font-medium ${h()?"bg-[var(--primary-50)] text-[var(--primary-700)]":"text-[var(--sidebar-text)] hover:bg-[var(--sidebar-item-hover)]"}`,children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx("svg",{className:"w-5 h-5 mr-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 21V5a2 2 0 00-2-2H7a2 2 0 00-2 2v16m14 0h2m-2 0h-5m-9 0H3m2 0h5M9 7h1m-1 4h1m4-4h1m-1 4h1m-5 10v-5a1 1 0 011-1h2a1 1 0 011 1v5m-4 0h4"})}),e.jsx("span",{children:"School Configuration"})]}),e.jsx("svg",{className:`w-4 h-4 transition-transform duration-200 ${m?"rotate-180":""}`,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})]}),e.jsx("div",{className:`overflow-hidden transition-all duration-300 ${m?"max-h-[500px] opacity-100":"max-h-0 opacity-0"}`,children:e.jsxs("div",{className:"ml-4 mt-2 space-y-1 pl-4 border-l-2 border-[var(--border-light)]",children:[e.jsxs("div",{children:[e.jsxs(l,{href:route("roll-statements.index"),className:`flex items-center px-4 py-2.5 rounded-lg transition-all duration-200 ${s&&s.startsWith("roll-statements")?"bg-[var(--primary-100)] text-[var(--primary-700)] font-medium":"text-[var(--text-secondary)] hover:bg-[var(--surface-10)] hover:text-[var(--primary-600)]"}`,children:[e.jsx("svg",{className:"w-4 h-4 mr-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),e.jsx("span",{className:"text-sm",children:"Roll Statements"})]}),s&&s.startsWith("roll-statements")&&e.jsxs("div",{className:"ml-6 mt-1 space-y-1 pl-3 border-l-2 border-[var(--primary-200)]",children:[e.jsxs(l,{href:route("roll-statements.create"),className:"flex items-center px-3 py-1.5 text-xs text-[var(--primary-600)] hover:text-[var(--primary-800)] hover:bg-[var(--primary-50)] rounded transition-all",children:[e.jsx("svg",{className:"w-3 h-3 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})}),"Create New"]}),e.jsxs("a",{href:route("roll-statements.print"),className:"flex items-center px-3 py-1.5 text-xs text-[var(--primary-600)] hover:text-[var(--primary-800)] hover:bg-[var(--primary-50)] rounded transition-all",children:[e.jsx("svg",{className:"w-3 h-3 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17 17h2a2 2 0 002-2v-4a2 2 0 00-2-2H5a2 2 0 00-2 2v4a2 2 0 002 2h2m2 4h6a2 2 0 002-2v-4a2 2 0 00-2-2H9a2 2 0 00-2 2v4a2 2 0 002 2zm8-12V5a2 2 0 00-2-2H9a2 2 0 00-2 2v4h10z"})}),"Print PDF"]})]})]}),e.jsxs("div",{children:[e.jsxs(l,{href:route("monthly-rice-config.index"),className:`flex items-center px-4 py-2.5 rounded-lg transition-all duration-200 ${s&&s.startsWith("monthly-rice-config")?"bg-[var(--primary-100)] text-[var(--primary-700)] font-medium":"text-[var(--text-secondary)] hover:bg-[var(--surface-10)] hover:text-[var(--primary-600)]"}`,children:[e.jsx("svg",{className:"w-4 h-4 mr-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 6V4m0 2a2 2 0 100 4m0-4a2 2 0 110 4m-6 8a2 2 0 100-4m0 4a2 2 0 110-4m0 4v2m0-6V4m6 6v10m6-2a2 2 0 100-4m0 4a2 2 0 110-4m0 4v2m0-6V4"})}),e.jsx("span",{className:"text-sm",children:"Rice Configuration"})]}),s&&s.startsWith("monthly-rice-config")&&e.jsxs("div",{className:"ml-6 mt-1 space-y-1 pl-3 border-l-2 border-[var(--primary-200)]",children:[e.jsxs(l,{href:route("monthly-rice-config.edit"),className:"flex items-center px-3 py-1.5 text-xs text-[var(--primary-600)] hover:text-[var(--primary-800)] hover:bg-[var(--primary-50)] rounded transition-all",children:[e.jsx("svg",{className:"w-3 h-3 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})}),"Edit Config"]}),e.jsxs(l,{href:route("monthly-rice-config.create"),className:"flex items-center px-3 py-1.5 text-xs text-[var(--primary-600)] hover:text-[var(--primary-800)] hover:bg-[var(--primary-50)] rounded transition-all",children:[e.jsx("svg",{className:"w-3 h-3 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})}),"Create New"]})]})]}),e.jsxs("div",{children:[e.jsxs(l,{href:route("amount-config.index"),className:`flex items-center px-4 py-2.5 rounded-lg transition-all duration-200 ${s&&s.startsWith("amount-config")?"bg-[var(--primary-100)] text-[var(--primary-700)] font-medium":"text-[var(--text-secondary)] hover:bg-[var(--surface-10)] hover:text-[var(--primary-600)]"}`,children:[e.jsx("svg",{className:"w-4 h-4 mr-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),e.jsx("span",{className:"text-sm",children:"Amount Configuration"})]}),s&&s.startsWith("amount-config")&&e.jsx("div",{className:"ml-6 mt-1 space-y-1 pl-3 border-l-2 border-[var(--primary-200)]",children:e.jsxs(l,{href:route("amount-config.create"),className:"flex items-center px-3 py-1.5 text-xs text-[var(--primary-600)] hover:text-[var(--primary-800)] hover:bg-[var(--primary-50)] rounded transition-all",children:[e.jsx("svg",{className:"w-3 h-3 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})}),"Create New"]})})]})]})})]}),e.jsxs("div",{className:"mb-2",children:[e.jsxs(l,{href:route("daily-consumptions.index"),className:`flex items-center px-4 py-3 rounded-xl transition-all duration-200 font-medium ${s&&s.startsWith("daily-consumptions")?"bg-[var(--sidebar-item-active)] text-[var(--sidebar-text-active)] shadow-md shadow-primary-500/20":"text-[var(--sidebar-text)] hover:bg-[var(--sidebar-item-hover)] hover:text-[var(--primary-600)]"}`,children:[e.jsx("svg",{className:"w-5 h-5 mr-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2m-3 7h3m-3 4h3m-6-4h.01M9 16h.01"})}),e.jsx("span",{children:"Daily Consumption"})]}),s&&s.startsWith("daily-consumptions")&&e.jsx("div",{className:"ml-8 mt-1 space-y-1 pl-3 border-l-2 border-[var(--primary-200)]",children:e.jsxs(l,{href:route("daily-consumptions.create"),className:"flex items-center px-3 py-1.5 text-xs text-[var(--primary-600)] hover:text-[var(--primary-800)] hover:bg-[var(--primary-50)] rounded transition-all",children:[e.jsx("svg",{className:"w-3 h-3 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})}),"Add New Entry"]})})]}),e.jsxs("div",{className:"mb-2",children:[e.jsxs("button",{onClick:()=>y(!f),className:`w-full flex items-center justify-between px-4 py-3 rounded-xl transition-all duration-200 font-medium ${I()?"bg-[var(--primary-50)] text-[var(--primary-700)]":"text-[var(--sidebar-text)] hover:bg-[var(--sidebar-item-hover)]"}`,children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx("svg",{className:"w-5 h-5 mr-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 17v-2m3 2v-4m3 4v-6m2 10H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),e.jsx("span",{children:"Monthly Reports"})]}),e.jsx("svg",{className:`w-4 h-4 transition-transform duration-200 ${f?"rotate-180":""}`,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})]}),e.jsx("div",{className:`overflow-hidden transition-all duration-300 ${f?"max-h-[500px] opacity-100":"max-h-0 opacity-0"}`,children:e.jsxs("div",{className:"ml-4 mt-2 space-y-1 border-l-2 border-[var(--border-light)] pl-4",children:[e.jsxs("div",{children:[e.jsxs(l,{href:route("rice-reports.index"),className:`flex items-center px-4 py-2.5 rounded-lg transition-all duration-200 ${s&&s.startsWith("rice-reports")?"bg-[var(--primary-100)] text-[var(--primary-700)] font-medium":"text-[var(--text-secondary)] hover:bg-[var(--surface-10)] hover:text-[var(--primary-600)]"}`,children:[e.jsx("svg",{className:"w-4 h-4 mr-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 17v-2m3 2v-4m3 4v-6m2 10H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),e.jsx("span",{className:"text-sm",children:"Rice Report"})]}),s&&s.startsWith("rice-reports")&&e.jsx("div",{className:"ml-6 mt-1 space-y-1 pl-3 border-l-2 border-[var(--primary-200)]",children:e.jsxs(l,{href:route("rice-reports.create"),className:"flex items-center px-3 py-1.5 text-xs text-[var(--primary-600)] hover:text-[var(--primary-800)] hover:bg-[var(--primary-50)] rounded transition-all",children:[e.jsx("svg",{className:"w-3 h-3 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})}),"Generate Report"]})})]}),e.jsxs("div",{children:[e.jsxs(l,{href:route("amount-reports.index"),className:`flex items-center px-4 py-2.5 rounded-lg transition-all duration-200 ${s&&s.startsWith("amount-reports")?"bg-[var(--primary-100)] text-[var(--primary-700)] font-medium":"text-[var(--text-secondary)] hover:bg-[var(--surface-10)] hover:text-[var(--primary-600)]"}`,children:[e.jsx("svg",{className:"w-4 h-4 mr-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),e.jsx("span",{className:"text-sm",children:"Amount Report"})]}),s&&s.startsWith("amount-reports")&&e.jsx("div",{className:"ml-6 mt-1 space-y-1 pl-3 border-l-2 border-[var(--primary-200)]",children:e.jsxs(l,{href:route("amount-reports.create"),className:"flex items-center px-3 py-1.5 text-xs text-[var(--primary-600)] hover:text-[var(--primary-800)] hover:bg-[var(--primary-50)] rounded transition-all",children:[e.jsx("svg",{className:"w-3 h-3 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})}),"Generate Report"]})})]})]})})]}),e.jsx("div",{className:"border-t border-[var(--border-light)] my-4"}),e.jsx("div",{className:"px-4 mb-3",children:e.jsxs("h3",{className:"text-xs font-semibold text-[var(--text-tertiary)] uppercase tracking-wider flex items-center",children:[e.jsx("svg",{className:"w-4 h-4 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 7v8a2 2 0 002 2h6M8 7V5a2 2 0 012-2h4.586a1 1 0 01.707.293l4.414 4.414a1 1 0 01.293.707V15a2 2 0 01-2 2h-2M8 7H6a2 2 0 00-2 2v10a2 2 0 002 2h8a2 2 0 002-2v-2"})}),"Documents"]})}),e.jsxs("a",{href:"/user-guide",className:"flex items-center px-4 py-2.5 text-[var(--text-secondary)] hover:bg-[var(--sidebar-item-hover)] hover:text-[var(--primary-600)] rounded-lg mb-1 transition-all duration-200 group",children:[e.jsx("svg",{className:"w-4 h-4 mr-3 group-hover:scale-110 transition-transform",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 6.253v13m0-13C10.832 5.477 9.246 5 7.5 5S4.168 5.477 3 6.253v13C4.168 18.477 5.754 18 7.5 18s3.332.477 4.5 1.253m0-13C13.168 5.477 14.754 5 16.5 5c1.746 0 3.332.477 4.5 1.253v13C19.832 18.477 18.246 18 16.5 18c-1.746 0-3.332.477-4.5 1.253"})}),e.jsx("span",{className:"text-sm font-medium",children:"User Guide"})]}),e.jsxs("a",{href:"/guidelines",className:"flex items-center px-4 py-2.5 text-[var(--text-secondary)] hover:bg-[var(--sidebar-item-hover)] hover:text-[var(--primary-600)] rounded-lg mb-1 transition-all duration-200 group",children:[e.jsx("svg",{className:"w-4 h-4 mr-3 group-hover:scale-110 transition-transform",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),e.jsx("span",{className:"text-sm font-medium",children:"MDM Guidelines"})]})]})]});return e.jsxs(e.Fragment,{children:[e.jsx("button",{onClick:()=>o(!n),className:"lg:hidden fixed top-4 left-4 z-50 p-2.5 rounded-xl shadow-lg hover:shadow-xl transition-all duration-200 bg-[var(--surface-00)] border border-[var(--border-light)] text-[var(--text-primary)]","aria-label":"Toggle menu",children:e.jsx("svg",{className:`w-6 h-6 transition-transform duration-300 ${n?"rotate-90":""}`,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:n?e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"}):e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 6h16M4 12h16M4 18h16"})})}),n&&e.jsx("div",{className:"lg:hidden fixed inset-0 bg-black/50 backdrop-blur-sm z-40 transition-opacity duration-300",onClick:()=>o(!1)}),e.jsx("aside",{className:"hidden lg:flex lg:flex-col w-full h-full shadow-xl bg-[var(--sidebar-bg)] border-r border-[var(--border-light)]",children:e.jsx(S,{})}),e.jsx("aside",{className:`lg:hidden fixed top-0 left-0 z-40 w-80 max-w-[85vw] h-screen flex flex-col transform transition-transform duration-300 ease-in-out shadow-2xl bg-[var(--sidebar-bg)] ${n?"translate-x-0":"-translate-x-full"}`,children:e.jsx(S,{})})]})}function Ke({user:s}){const[n,o]=i.useState(!1),{url:x}=X(),c=m=>x.startsWith(m);return e.jsxs("nav",{className:"bg-primary-800 border-b border-primary-900 transition-colors duration-200",children:[e.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:e.jsxs("div",{className:"flex justify-between h-16",children:[e.jsxs("div",{className:"flex",children:[e.jsx("div",{className:"shrink-0 flex items-center",children:e.jsxs(l,{href:route("admin.dashboard"),className:"text-white font-bold text-xl flex items-center gap-2",children:[e.jsx("span",{className:"bg-white/10 p-1.5 rounded-lg",children:"MDM"}),e.jsx("span",{children:"Admin"})]})}),e.jsxs("div",{className:"hidden space-x-8 sm:-my-px sm:ml-10 sm:flex",children:[e.jsx(l,{href:route("admin.dashboard"),className:`inline-flex items-center px-1 pt-1 border-b-2 text-sm font-medium leading-5 transition duration-150 ease-in-out ${c("/admin/dashboard")?"border-white text-white":"border-transparent text-primary-200 hover:text-white hover:border-primary-300"}`,children:"Dashboard"}),e.jsx(l,{href:route("admin.schools.index"),className:`inline-flex items-center px-1 pt-1 border-b-2 text-sm font-medium leading-5 transition duration-150 ease-in-out ${c("/admin/schools")?"border-white text-white":"border-transparent text-primary-200 hover:text-white hover:border-primary-300"}`,children:"Schools"}),e.jsx("div",{className:"inline-flex items-center",children:e.jsxs(u,{children:[e.jsx(u.Trigger,{children:e.jsxs("button",{className:"inline-flex items-center px-1 pt-1 border-b-2 border-transparent text-sm font-medium leading-5 text-primary-200 hover:text-white hover:border-primary-300 transition duration-150 ease-in-out",children:[e.jsx("span",{children:"Reports"}),e.jsx("svg",{className:"ml-2 -mr-0.5 h-4 w-4",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",children:e.jsx("path",{fillRule:"evenodd",d:"M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z",clipRule:"evenodd"})})]})}),e.jsxs(u.Content,{children:[e.jsx(u.Link,{href:"/admin/rice-reports",children:"Rice Reports"}),e.jsx(u.Link,{href:"/admin/amount-reports",children:"Amount Reports"}),e.jsx(u.Link,{href:"/admin/daily-consumptions",children:"Daily Consumptions"})]})]})}),e.jsx(l,{href:route("admin.ai-config.index"),className:`inline-flex items-center px-1 pt-1 border-b-2 text-sm font-medium leading-5 transition duration-150 ease-in-out ${c("/admin/ai-config")?"border-white text-white":"border-transparent text-primary-200 hover:text-white hover:border-primary-300"}`,children:"AI Config"}),e.jsx(l,{href:route("admin.developer-messages.index"),className:`inline-flex items-center px-1 pt-1 border-b-2 text-sm font-medium leading-5 transition duration-150 ease-in-out ${c("/admin/developer-messages")?"border-white text-white":"border-transparent text-primary-200 hover:text-white hover:border-primary-300"}`,children:"Messages"})]})]}),e.jsx("div",{className:"hidden sm:flex sm:items-center sm:ml-6 gap-4",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("span",{className:"bg-primary-700 text-white text-xs font-semibold px-2.5 py-1 rounded mr-3 border border-primary-600",children:"Admin"}),e.jsxs(u,{children:[e.jsx(u.Trigger,{children:e.jsxs("button",{className:"inline-flex items-center px-3 py-2 border border-transparent text-sm leading-4 font-medium rounded-md text-white hover:bg-primary-700 focus:outline-none transition-all ease-in-out duration-150",children:[s.name,e.jsx("svg",{className:"ml-2 -mr-0.5 h-4 w-4",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",children:e.jsx("path",{fillRule:"evenodd",d:"M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z",clipRule:"evenodd"})})]})}),e.jsxs(u.Content,{children:[e.jsx(u.Link,{href:route("profile.edit"),children:"Profile"}),e.jsx("button",{onClick:m=>{m.preventDefault(),ue.post(route("logout"))},className:"block w-full text-left px-4 py-2 text-sm leading-5 text-secondary-700 hover:bg-secondary-100 focus:outline-none focus:bg-secondary-100 transition duration-150 ease-in-out",children:"Log Out"})]})]})]})}),e.jsx("div",{className:"-mr-2 flex items-center sm:hidden gap-2",children:e.jsx("button",{onClick:()=>o(m=>!m),className:"inline-flex items-center justify-center p-2 rounded-md text-primary-200 hover:text-white hover:bg-primary-700 focus:outline-none focus:bg-primary-700 focus:text-white transition duration-150 ease-in-out",children:e.jsxs("svg",{className:"h-6 w-6",stroke:"currentColor",fill:"none",viewBox:"0 0 24 24",children:[e.jsx("path",{className:n?"hidden":"inline-flex",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M4 6h16M4 12h16M4 18h16"}),e.jsx("path",{className:n?"inline-flex":"hidden",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M6 18L18 6M6 6l12 12"})]})})})]})}),e.jsxs("div",{className:(n?"block":"hidden")+" sm:hidden bg-primary-800",children:[e.jsxs("div",{className:"pt-2 pb-3 space-y-1",children:[e.jsx(l,{href:route("admin.dashboard"),className:"block w-full pl-3 pr-4 py-2 border-l-4 text-left text-base font-medium text-primary-200 hover:text-white hover:bg-primary-700 hover:border-white focus:outline-none focus:text-white focus:bg-primary-700 focus:border-white transition duration-150 ease-in-out",children:"Dashboard"}),e.jsx(l,{href:route("admin.schools.index"),className:"block w-full pl-3 pr-4 py-2 border-l-4 text-left text-base font-medium text-primary-200 hover:text-white hover:bg-primary-700 hover:border-white focus:outline-none focus:text-white focus:bg-primary-700 focus:border-white transition duration-150 ease-in-out",children:"Schools"}),e.jsx("div",{className:"pl-3 pr-4 py-2 text-xs font-semibold text-primary-300 uppercase tracking-wide",children:"Reports"}),e.jsx(l,{href:"/admin/rice-reports",className:"block w-full pl-6 pr-4 py-2 border-l-4 text-left text-base font-medium text-primary-200 hover:text-white hover:bg-primary-700 hover:border-white focus:outline-none focus:text-white focus:bg-primary-700 focus:border-white transition duration-150 ease-in-out",children:"Rice Reports"}),e.jsx(l,{href:"/admin/amount-reports",className:"block w-full pl-6 pr-4 py-2 border-l-4 text-left text-base font-medium text-primary-200 hover:text-white hover:bg-primary-700 hover:border-white focus:outline-none focus:text-white focus:bg-blue-700 focus:border-white transition duration-150 ease-in-out",children:"Amount Reports"}),e.jsx(l,{href:"/admin/daily-consumptions",className:"block w-full pl-6 pr-4 py-2 border-l-4 text-left text-base font-medium text-primary-200 hover:text-white hover:bg-primary-700 hover:border-white focus:outline-none focus:text-white focus:bg-blue-700 focus:border-white transition duration-150 ease-in-out",children:"Daily Consumptions"}),e.jsx(l,{href:route("admin.ai-config.index"),className:"block w-full pl-3 pr-4 py-2 border-l-4 text-left text-base font-medium text-primary-200 hover:text-white hover:bg-primary-700 hover:border-white focus:outline-none focus:text-white focus:bg-blue-700 focus:border-white transition duration-150 ease-in-out",children:"AI Configuration"}),e.jsx(l,{href:route("admin.developer-messages.index"),className:"block w-full pl-3 pr-4 py-2 border-l-4 text-left text-base font-medium text-primary-200 hover:text-white hover:bg-primary-700 hover:border-white focus:outline-none focus:text-white focus:bg-blue-700 focus:border-white transition duration-150 ease-in-out",children:"Developer Messages"})]}),e.jsxs("div",{className:"pt-4 pb-1 border-t border-primary-700",children:[e.jsxs("div",{className:"px-4",children:[e.jsxs("div",{className:"font-medium text-base text-white flex items-center",children:[s.name,e.jsx("span",{className:"ml-2 bg-primary-600 text-white text-xs font-semibold px-2 py-0.5 rounded",children:"Admin"})]}),e.jsx("div",{className:"font-medium text-sm text-primary-300",children:s.email})]}),e.jsxs("div",{className:"mt-3 space-y-1",children:[e.jsx(l,{href:route("profile.edit"),className:"block w-full pl-3 pr-4 py-2 border-l-4 text-left text-base font-medium text-primary-200 hover:text-white hover:bg-primary-700 hover:border-white focus:outline-none focus:text-white focus:bg-primary-700 focus:border-white transition duration-150 ease-in-out",children:"Profile"}),e.jsx("button",{onClick:()=>ue.post(route("logout")),className:"block w-full pl-3 pr-4 py-2 border-l-4 text-left text-base font-medium text-primary-200 hover:text-white hover:bg-primary-700 hover:border-white focus:outline-none focus:text-white focus:bg-primary-700 focus:border-white transition duration-150 ease-in-out",children:"Log Out"})]})]})]})]})}/**
 * @license lucide-react v0.552.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qe=[["path",{d:"M12 8V4H8",key:"hb8ula"}],["rect",{width:"16",height:"12",x:"4",y:"8",rx:"2",key:"enze0r"}],["path",{d:"M2 14h2",key:"vft8re"}],["path",{d:"M20 14h2",key:"4cs60a"}],["path",{d:"M15 13v2",key:"1xurst"}],["path",{d:"M9 13v2",key:"rq6x2g"}]],q=Z("bot",qe);/**
 * @license lucide-react v0.552.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xe=[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"12",cy:"5",r:"1",key:"gxeob9"}],["circle",{cx:"12",cy:"19",r:"1",key:"lyex9k"}]],Ze=Z("ellipsis-vertical",Xe);/**
 * @license lucide-react v0.552.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Je=[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]],er=Z("search",Je);function rr(){const{props:s}=X(),n=s.auth?.user,[o,x]=i.useState(!1),[c,m]=i.useState(!1),[p,f]=i.useState([]),[y,L]=i.useState(""),[h,I]=i.useState(null),[S,j]=i.useState(!1),[_,k]=i.useState(0),[w,ee]=i.useState(!1),[ge,re]=i.useState(!1),[C,V]=i.useState([]),[M,be]=i.useState(null),[se,te]=i.useState(!1),[H,ye]=i.useState(""),[O,ae]=i.useState(null),[W,ie]=i.useState(null),[U,ne]=i.useState(!1),[P,D]=i.useState(!1),[sr,oe]=i.useState(null),z=i.useRef(null),Q=i.useRef(null),le=i.useRef(null),de=i.useRef(null),N=i.useRef(null),F=i.useRef(null),E=i.useRef([]);i.useEffect(()=>{o&&!h&&je()},[o]),i.useEffect(()=>{z.current?.scrollIntoView({behavior:"smooth"})},[p]),i.useEffect(()=>{if(h&&window.Echo){const r=`support-chat.${h}`,a=window.Echo.private(r);return a.listen(".support.message",t=>{f(d=>[...d,t]),o||k(d=>d+1),z.current?.scrollIntoView({behavior:"smooth"})}),a.listen(".user-typing",t=>{t.user_id!==(n?.id??null)&&(re(t.is_typing),t.is_typing&&setTimeout(()=>re(!1),3e3))}),()=>{a.stopListening(".support.message"),a.stopListening(".user-typing"),window.Echo&&window.Echo.leave(r)}}},[h,o]),i.useEffect(()=>{if(o&&h){const r=setInterval(()=>{we(h)},5e3);return()=>clearInterval(r)}},[o,h]);const je=async()=>{j(!0);try{const a=(await b.get("/api/admin/support-chat"))?.data?.data?.chats||[];V(a);const t=a[0];t&&await ce(t.id,a)}catch(r){console.error("Failed to initialize admin chat:",r)}finally{j(!1)}},ce=async(r,a=null)=>{if(r){j(!0);try{const t=await b.get(`/api/admin/support-chat/${r}`);I(r),be(r),f(t?.data?.data?.messages||[]);const v=(a||C).find(g=>g.id===r);k(v?.unread_count||0)}catch(t){console.error("Failed to load admin chat:",t)}finally{j(!1)}}},we=async r=>{try{const t=(await b.get("/api/admin/support-chat"))?.data?.data?.chats||[];V(t);const d=r||M;if(d){const v=await b.get(`/api/admin/support-chat/${d}`);f(v?.data?.data?.messages||[]);const g=t.find(Y=>Y.id===d);k(g?.unread_count||0)}}catch(a){console.error("Failed to refresh admin chats/messages:",a)}},Ne=async r=>{if(r.preventDefault(),!y.trim()||!h||!n?.id)return;const a={id:Date.now(),message:y,user_id:n?.id,sender_name:n?.name,is_admin:!0,created_at:new Date().toISOString(),temp:!0};f(d=>[...d,a]);const t=y;L(""),me(),te(!1);try{const d=await b.post("/api/admin/support-chat/message",{chat_id:h,message:t});d.data.success&&f(v=>v.map(g=>g.id===a.id?d.data.data:g))}catch(d){console.error("Failed to send admin message:",d),f(v=>v.filter(g=>g.id!==a.id))}},ke=()=>{!w&&h&&(ee(!0),b.post("/api/admin/support-chat/typing",{chat_id:h,is_typing:!0})),Q.current&&clearTimeout(Q.current),Q.current=setTimeout(()=>{me()},2e3)},me=()=>{w&&h&&(ee(!1),b.post("/api/admin/support-chat/typing",{chat_id:h,is_typing:!1}))},G=()=>{x(!o),o||(m(!1),k(0))},Ce=r=>{L(a=>a+r.emoji),le.current?.focus()},xe=()=>{ie(null),de.current&&(de.current.value="")},Me=async()=>{if(!W||!h)return;ne(!0);const r=new FormData;r.append("file",W),r.append("chat_id",h);try{const a=await b.post("/api/admin/support-chat/upload",r,{headers:{"Content-Type":"multipart/form-data"}});a.data.success&&(f(t=>[...t,a.data.data]),xe(),z.current?.scrollIntoView({behavior:"smooth"}))}catch(a){console.error("Failed to upload file:",a),alert("Failed to upload file. Please try again.")}finally{ne(!1)}},Le=r=>{const a=new Date(r);return fe(a)?T(a,"h:mm a"):ve(a)?"Yesterday "+T(a,"h:mm a"):T(a,"MMM d, h:mm a")},Se=r=>{const a=new Date(r);return fe(a)?"Today":ve(a)?"Yesterday":T(a,"MMMM d, yyyy")},_e=r=>{if(r===0)return!0;const a=new Date(p[r].created_at).toDateString(),t=new Date(p[r-1].created_at).toDateString();return a!==t},B=()=>{N.current&&(N.current.ondataavailable=null,N.current.onstop=null,N.current=null),F.current&&(F.current.getTracks().forEach(r=>r.stop()),F.current=null),E.current=[]},We=async()=>{if(!h){alert("Please select a conversation before recording.");return}if(!navigator.mediaDevices||!navigator.mediaDevices.getUserMedia){alert("Your browser does not support audio recording.");return}try{oe(null);const r=await navigator.mediaDevices.getUserMedia({audio:!0});F.current=r;const a=MediaRecorder.isTypeSupported("audio/ogg;codecs=opus")?"audio/ogg;codecs=opus":"",t=new MediaRecorder(r,a?{mimeType:a}:void 0);E.current=[],t.ondataavailable=d=>{d.data&&d.data.size>0&&E.current.push(d.data)},t.onstop=()=>{const d=new Blob(E.current,{type:"audio/ogg"});if(d.size===0){B(),D(!1);return}const v=new File([d],`voice-message-${Date.now()}.ogg`,{type:"audio/ogg"});ie(v),B(),D(!1)},N.current=t,t.start(),D(!0)}catch(r){console.error("Error starting recording (admin):",r),oe("Could not start recording. Please check microphone permissions."),B(),D(!1)}},De=()=>{try{N.current&&N.current.state!=="inactive"&&N.current.stop()}catch(r){console.error("Error stopping recording (admin):",r),B(),D(!1)}},Ae=()=>{P?De():We()},he=C.filter(r=>r.user?.name?.toLowerCase().includes(H.toLowerCase())||r.subject?.toLowerCase().includes(H.toLowerCase())),A=C.find(r=>r.id===M),$e=async()=>{if(M)try{await b.post(`/api/admin/support-chat/${M}/disable-ai`),V(r=>r.map(a=>a.id===M?{...a,ai_enabled:!1}:a))}catch(r){console.error("Failed to disable AI:",r)}};return e.jsxs(e.Fragment,{children:[!o&&e.jsxs("button",{onClick:G,className:"fixed bottom-6 right-6 w-16 h-16 bg-gradient-to-br from-[#00a884] to-[#008069] text-white rounded-full shadow-2xl hover:shadow-3xl hover:scale-105 transform transition-all duration-200 z-50 flex items-center justify-center",children:[e.jsx($,{className:"w-7 h-7"}),_>0&&e.jsx("span",{className:"absolute -top-1 -right-1 min-w-[24px] h-6 bg-red-500 text-white text-xs font-bold rounded-full flex items-center justify-center px-1.5 animate-bounce",children:_>99?"99+":_})]}),o&&e.jsx("div",{className:`fixed bottom-4 right-4 bg-white rounded-2xl shadow-2xl z-50 flex transition-all duration-300 ${c?"w-[340px] h-14":"w-[720px] h-[540px]"}`,children:c?e.jsxs("div",{className:"bg-[#008069] text-white p-4 rounded-2xl flex items-center justify-between w-full",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx($,{className:"w-5 h-5"}),e.jsxs("span",{className:"font-semibold text-sm",children:["Admin Support (",C.length,")"]})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("button",{onClick:()=>m(!1),className:"p-1.5 hover:bg-white/10 rounded-full transition-colors",children:e.jsx(pe,{className:"w-4 h-4"})}),e.jsx("button",{onClick:G,className:"p-1.5 hover:bg-white/10 rounded-full transition-colors",children:e.jsx(R,{className:"w-5 h-5"})})]})]}):e.jsxs(e.Fragment,{children:[O&&e.jsx("div",{className:"absolute inset-0 bg-black/60 flex items-center justify-center z-40 rounded-2xl",children:e.jsxs("div",{className:"relative max-w-full max-h-full p-4",children:[e.jsx("button",{type:"button",onClick:()=>ae(null),className:"absolute -top-2 -right-2 bg-black/70 text-white rounded-full p-1 hover:bg-black/90",children:e.jsx(R,{className:"w-4 h-4"})}),e.jsx("img",{src:O.src,alt:O.alt||"",className:"max-h-[420px] max-w-[520px] rounded-lg shadow-lg object-contain bg-black"})]})}),e.jsxs("div",{className:"w-[340px] border-r border-gray-200 flex flex-col rounded-l-2xl",children:[e.jsxs("div",{className:"bg-[#008069] text-white p-4 flex items-center justify-between rounded-tl-2xl",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("div",{className:"w-10 h-10 bg-white/20 rounded-full flex items-center justify-center",children:e.jsx($,{className:"w-5 h-5"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-sm",children:"Admin Support"}),e.jsxs("p",{className:"text-xs text-white/70",children:[C.length," conversations"]})]})]}),e.jsx("button",{onClick:()=>m(!0),className:"p-1.5 hover:bg-white/10 rounded-full transition-colors",children:e.jsx(pe,{className:"w-4 h-4"})})]}),e.jsx("div",{className:"p-2 bg-gray-50 border-b border-gray-200",children:e.jsxs("div",{className:"relative",children:[e.jsx(er,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-gray-400"}),e.jsx("input",{type:"text",value:H,onChange:r=>ye(r.target.value),placeholder:"Search conversations...",className:"w-full pl-10 pr-4 py-2 bg-white border border-gray-200 rounded-lg text-sm focus:outline-none focus:ring-2 focus:ring-[#00a884] focus:border-transparent"})]})}),e.jsx("div",{className:"flex-1 overflow-y-auto",children:S&&C.length===0?e.jsx("div",{className:"flex items-center justify-center h-full",children:e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-4 border-[#00a884] border-t-transparent"})}):he.length===0?e.jsx("div",{className:"text-center text-gray-500 mt-20 px-4",children:e.jsx("p",{className:"text-sm",children:"No conversations found"})}):he.map(r=>e.jsx("div",{onClick:()=>ce(r.id),className:`px-4 py-3 border-b border-gray-100 cursor-pointer transition-colors ${M===r.id?"bg-[#f0f2f5]":"hover:bg-gray-50"}`,children:e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"w-12 h-12 bg-[#00a884] text-white rounded-full flex items-center justify-center font-semibold flex-shrink-0",children:r.user?.name?.charAt(0).toUpperCase()||"U"}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-center justify-between mb-1",children:[e.jsxs("h4",{className:"font-semibold text-sm text-gray-900 truncate flex items-center",children:[r.user?.name||"Unknown User",r.ai_enabled&&e.jsx(q,{className:"w-3 h-3 ml-1 text-purple-500"})]}),r.last_message_at&&e.jsx("span",{className:"text-xs text-gray-500 ml-2",children:Be(new Date(r.last_message_at),{addSuffix:!0})})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("p",{className:"text-sm text-gray-600 truncate",children:r.latest_message?.message||"No messages yet"}),r.unread_count>0&&e.jsx("span",{className:"ml-2 min-w-[20px] h-5 bg-[#00a884] text-white text-xs font-semibold rounded-full flex items-center justify-center px-1.5",children:r.unread_count})]})]})]})},r.id))})]}),e.jsx("div",{className:"flex-1 flex flex-col rounded-r-2xl",children:A?e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"bg-[#f0f2f5] px-4 py-3 border-b border-gray-200 flex items-center justify-between rounded-tr-2xl",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"w-10 h-10 bg-[#00a884] text-white rounded-full flex items-center justify-center font-semibold",children:A.user?.name?.charAt(0).toUpperCase()||"U"}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-sm text-gray-900",children:A.user?.name||"Unknown User"}),e.jsx("p",{className:"text-xs text-gray-500",children:A.user?.email||""})]})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[A.ai_enabled&&e.jsxs("button",{onClick:$e,className:"px-3 py-1 bg-purple-100 text-purple-700 text-xs rounded-full hover:bg-purple-200 transition-colors mr-2 flex items-center",title:"Disable AI and take over chat",children:[e.jsx(q,{className:"w-3 h-3 mr-1"}),"Take Over"]}),e.jsx("button",{className:"p-2 hover:bg-gray-200 rounded-full transition-colors",children:e.jsx(Ze,{className:"w-5 h-5 text-gray-600"})}),e.jsx("button",{onClick:G,className:"p-2 hover:bg-gray-200 rounded-full transition-colors",children:e.jsx(R,{className:"w-5 h-5 text-gray-600"})})]})]}),e.jsx("div",{className:"flex-1 overflow-y-auto p-4 space-y-2",style:{backgroundImage:`url("data:image/svg+xml,%3Csvg width='100' height='100' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='M0 0h100v100H0z' fill='%23efeae2'/%3E%3Cpath d='M25 25h50v50H25z' fill='%23e5ddd5'/%3E%3C/svg%3E")`,backgroundSize:"100px 100px",backgroundColor:"#efeae2"},children:S&&p.length===0?e.jsx("div",{className:"flex items-center justify-center h-full",children:e.jsx("div",{className:"animate-spin rounded-full h-10 w-10 border-4 border-[#00a884] border-t-transparent"})}):p.length===0?e.jsxs("div",{className:"text-center text-gray-600 mt-32",children:[e.jsx("div",{className:"w-20 h-20 bg-[#00a884]/10 rounded-full flex items-center justify-center mx-auto mb-4",children:e.jsx($,{className:"w-10 h-10 text-[#00a884]"})}),e.jsx("p",{className:"text-sm",children:"No messages in this conversation"})]}):e.jsxs(e.Fragment,{children:[p.map((r,a)=>e.jsxs(ze.Fragment,{children:[_e(a)&&e.jsx("div",{className:"flex justify-center my-3",children:e.jsx("div",{className:"bg-white/90 shadow-sm rounded-md px-3 py-1 text-xs font-medium text-gray-600",children:Se(r.created_at)})}),e.jsx("div",{className:`flex ${r.is_admin?"justify-end":"justify-start"} mb-1`,children:e.jsxs("div",{className:`max-w-[75%] rounded-lg px-4 py-3 shadow-sm relative ${r.is_admin?"bg-[#d9fdd3]":"bg-white"} ${r.temp?"opacity-60":""}`,style:{borderTopLeftRadius:r.is_admin?"8px":"0px",borderTopRightRadius:r.is_admin?"0px":"8px"},children:[!r.is_admin&&e.jsx("p",{className:"text-xs text-[#00a884] font-semibold mb-1",children:r.sender_name||"User"}),Array.isArray(r.attachments)&&r.attachments.length>0&&e.jsx("div",{className:"mb-1 space-y-1",children:r.attachments.map(t=>{const d=t.file_url||(t.file_path?`/storage/${t.file_path}`:""),v=t.file_type==="image"||t.mime_type&&t.mime_type.startsWith("image/"),g=t.file_type==="video"||t.mime_type&&t.mime_type.startsWith("video/"),Y=t.file_type==="audio"||t.mime_type&&t.mime_type.startsWith("audio/");return e.jsx("div",{className:"max-w-full",children:v?e.jsx("button",{type:"button",onClick:()=>ae({src:d,alt:t.file_name}),className:"block focus:outline-none",children:e.jsx("img",{src:d,alt:t.file_name,className:"rounded-lg max-h-48 object-cover border border-gray-200"})}):g?e.jsx("video",{controls:!0,className:"w-full max-h-56 rounded-lg border border-gray-200",children:e.jsx("source",{src:d,type:t.mime_type||"video/mp4"})}):Y?e.jsx("audio",{controls:!0,className:"w-full",children:e.jsx("source",{src:d,type:t.mime_type||"audio/mpeg"})}):e.jsxs("a",{href:d,target:"_blank",rel:"noopener noreferrer",className:"flex items-center space-x-2 text-xs text-[#008069] hover:underline",children:[e.jsx("span",{className:"font-medium truncate max-w-[220px]",children:t.file_name}),t.human_file_size&&e.jsx("span",{className:"text-gray-500",children:t.human_file_size})]})},t.id)})}),!(Array.isArray(r.attachments)&&r.attachments.length>0&&r.message===r.attachments[0].file_name)&&e.jsx("p",{className:"text-sm text-gray-900 break-words",children:r.message}),e.jsxs("div",{className:`flex items-center justify-end space-x-1 mt-1 ${r.is_admin?"text-gray-600":"text-gray-400"}`,children:[r.is_ai_generated&&e.jsxs("span",{className:"bg-purple-100 text-purple-700 text-[10px] font-medium px-1.5 py-0.5 rounded mr-1 border border-purple-200 flex items-center",children:[e.jsx(q,{className:"w-3 h-3 mr-1"})," AI"]}),e.jsx("span",{className:"text-[10px]",children:Le(r.created_at)}),r.is_admin&&e.jsx("span",{children:r.is_read?e.jsx(Re,{className:"w-3.5 h-3.5 text-[#53bdeb]"}):e.jsx(Te,{className:"w-3.5 h-3.5"})})]})]})})]},r.id)),ge&&e.jsx("div",{className:"flex justify-start mb-1",children:e.jsx("div",{className:"bg-white rounded-lg px-4 py-3 shadow-sm",children:e.jsxs("div",{className:"flex space-x-1",children:[e.jsx("div",{className:"w-2 h-2 bg-gray-400 rounded-full animate-bounce",style:{animationDelay:"0ms"}}),e.jsx("div",{className:"w-2 h-2 bg-gray-400 rounded-full animate-bounce",style:{animationDelay:"150ms"}}),e.jsx("div",{className:"w-2 h-2 bg-gray-400 rounded-full animate-bounce",style:{animationDelay:"300ms"}})]})})}),e.jsx("div",{ref:z})]})}),se&&e.jsx("div",{className:"absolute bottom-20 right-4 z-10",children:e.jsx(Ie,{onEmojiClick:Ce,width:320,height:400})}),e.jsxs("form",{onSubmit:Ne,className:"p-3 bg-gray-50 border-t border-gray-200 rounded-br-2xl",children:[P&&e.jsxs("div",{className:"mb-2 px-3 py-1.5 rounded-lg bg-red-50 border border-red-200 text-xs text-red-700 flex items-center justify-between",children:[e.jsx("span",{children:"Recording voice message... Tap the mic again to stop."}),e.jsx("span",{className:"w-2 h-2 rounded-full bg-red-500 animate-pulse"})]}),W&&e.jsx("div",{className:"mb-3 p-3 bg-white rounded-lg border border-gray-200",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"w-16 h-16 bg-gray-100 rounded flex items-center justify-center",children:e.jsx(Paperclip,{className:"w-8 h-8 text-gray-400"})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"text-sm font-medium text-gray-900 truncate",children:W.name}),e.jsxs("p",{className:"text-xs text-gray-500",children:[(W.size/1024).toFixed(1)," KB"]})]})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("button",{type:"button",onClick:Me,disabled:U,className:"px-4 py-2 bg-[#00a884] text-white rounded-lg hover:bg-[#008069] disabled:opacity-50 text-sm font-medium",children:U?"Uploading...":"Send"}),e.jsx("button",{type:"button",onClick:xe,disabled:U,className:"p-2 hover:bg-gray-100 rounded-full transition-colors",children:e.jsx(R,{className:"w-4 h-4 text-gray-600"})})]})]})}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("button",{type:"button",onClick:()=>te(!se),className:"p-2 text-gray-500 hover:text-[#00a884] rounded-full hover:bg-gray-100 transition-colors",children:e.jsx(Ve,{className:"w-5 h-5"})}),e.jsx("button",{type:"button",onClick:Ae,className:`p-2 rounded-full transition-colors ${P?"bg-red-100 text-red-600":"text-gray-500 hover:text-[#00a884] hover:bg-gray-100"}`,children:e.jsx(He,{className:"w-5 h-5"})}),e.jsx("input",{ref:le,type:"text",value:y,onChange:r=>{L(r.target.value),ke()},placeholder:"Type a message",className:"flex-1 px-4 py-2.5 bg-white border border-gray-200 rounded-full focus:outline-none focus:ring-2 focus:ring-[#00a884] focus:border-transparent text-sm"}),e.jsx("button",{type:"submit",disabled:!y.trim(),className:"p-2.5 bg-[#00a884] text-white rounded-full hover:bg-[#008069] disabled:opacity-50 disabled:cursor-not-allowed transition-all shadow-md hover:shadow-lg disabled:hover:shadow-md",children:e.jsx(Oe,{className:"w-5 h-5"})})]})]})]}):e.jsx("div",{className:"flex-1 flex items-center justify-center bg-gray-50 rounded-r-2xl",children:e.jsxs("div",{className:"text-center text-gray-500",children:[e.jsx($,{className:"w-16 h-16 mx-auto mb-4 text-gray-300"}),e.jsx("p",{className:"text-lg font-medium",children:"Select a conversation"}),e.jsx("p",{className:"text-sm",children:"Choose from the list to start chatting"})]})})})]})})]})}function lr({header:s,children:n,navActions:o=null}){const{auth:x}=X().props,c=x.user,[m,p]=i.useState(!1);return x.isAdmin===!0?e.jsxs("div",{className:"min-h-screen bg-secondary-50",children:[e.jsx(Ke,{user:c}),s&&e.jsx("header",{className:"bg-card shadow-sm border-b border-secondary-200",children:e.jsx("div",{className:"mx-auto max-w-7xl px-4 py-6 sm:px-6 lg:px-8",children:s})}),e.jsx("main",{className:"min-h-screen bg-secondary-50",children:e.jsx("div",{className:"mx-auto max-w-7xl px-4 py-6 sm:px-6 lg:px-8",children:n})}),e.jsx(rr,{})]}):e.jsxs("div",{className:"min-h-screen bg-secondary-50",children:[e.jsx("a",{href:"#main-content",className:"sr-only focus:not-sr-only focus:absolute focus:top-4 focus:left-4 focus:z-50 focus:px-4 focus:py-2 focus:bg-primary-600 focus:text-white focus:rounded-md focus:outline-none focus:ring-2 focus:ring-primary-500",children:"Skip to main content"}),e.jsxs("div",{className:"lg:flex",children:[e.jsx("div",{className:"lg:w-[20%]",children:e.jsx("div",{className:"lg:fixed lg:left-0 lg:top-0 lg:h-screen lg:w-[20%] lg:overflow-y-auto",children:e.jsx(Ye,{currentRoute:route().current()})})}),e.jsxs("div",{className:"flex-1 flex flex-col min-h-screen",children:[e.jsxs("nav",{className:"bg-gradient-to-r from-[#fde68a] via-[#fdba74] to-[#fecdd3] border-b border-[var(--border-light)] sticky top-0 z-40 transition-colors duration-200",role:"navigation","aria-label":"Main navigation",children:[e.jsx("div",{className:"w-full max-w-6xl mx-auto px-4 sm:px-6 lg:px-8",children:e.jsxs("div",{className:"flex h-16 justify-between",children:[e.jsx("div",{className:"flex items-center gap-3 overflow-x-auto pr-4",children:o}),e.jsx("div",{className:"hidden sm:ms-6 sm:flex sm:items-center gap-4",children:e.jsx("div",{className:"relative ms-3",children:e.jsxs(u,{children:[e.jsx(u.Trigger,{children:e.jsx("span",{className:"inline-flex rounded-md",children:e.jsxs("button",{type:"button",className:"inline-flex items-center gap-2 rounded-full border border-transparent px-3 py-2 text-sm font-medium leading-4 transition duration-150 ease-in-out focus:outline-none text-[var(--text-secondary)] bg-[var(--surface-00)] hover:text-[var(--text-primary)] hover:bg-[var(--surface-10)]",children:[e.jsx("div",{className:"w-8 h-8 rounded-full bg-[var(--primary-100)] flex items-center justify-center text-[var(--primary-700)] font-bold",children:c.name.charAt(0)}),e.jsx("span",{className:"hidden md:inline-block",children:c.name}),e.jsx("svg",{className:"-me-0.5 ms-2 h-4 w-4 text-secondary-400",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",children:e.jsx("path",{fillRule:"evenodd",d:"M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z",clipRule:"evenodd"})})]})})}),e.jsxs(u.Content,{children:[e.jsxs("div",{className:"px-4 py-3 border-b border-[var(--border-light)]",children:[e.jsx("p",{className:"text-sm font-medium text-[var(--text-primary)] truncate",children:c.name}),e.jsx("p",{className:"text-xs text-[var(--text-secondary)] truncate",children:c.email})]}),e.jsx(u.Link,{href:route("profile.edit"),children:"Profile Settings"}),e.jsx(u.Link,{href:route("logout"),method:"post",as:"button",children:"Log Out"})]})]})})}),e.jsx("div",{className:"-me-2 flex items-center sm:hidden gap-2",children:e.jsx("button",{onClick:()=>p(!m),className:"inline-flex items-center justify-center rounded-md p-2 transition duration-150 ease-in-out text-[var(--text-secondary)] hover:bg-[var(--surface-10)] hover:text-[var(--text-primary)] focus:bg-[var(--surface-10)] focus:text-[var(--text-primary)] focus:outline-none",children:e.jsxs("svg",{className:"h-6 w-6",stroke:"currentColor",fill:"none",viewBox:"0 0 24 24",children:[e.jsx("path",{className:m?"hidden":"inline-flex",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M4 6h16M4 12h16M4 18h16"}),e.jsx("path",{className:m?"inline-flex":"hidden",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M6 18L18 6M6 6l12 12"})]})})})]})}),e.jsxs("div",{className:(m?"block":"hidden")+" sm:hidden bg-[var(--surface-00)] border-b border-[var(--border-light)]",children:[e.jsx("div",{className:"space-y-1 pb-3 pt-2",children:e.jsx(K,{href:route("dashboard"),active:route().current("dashboard"),children:"Dashboard"})}),e.jsxs("div",{className:"border-t border-[var(--border-light)] pb-1 pt-4",children:[e.jsxs("div",{className:"px-4 flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 rounded-lg bg-gradient-to-br from-[var(--primary-500)] to-[var(--primary-600)] flex items-center justify-center shadow-md",children:e.jsxs("svg",{className:"w-6 h-6",viewBox:"0 0 60 60",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[e.jsx("path",{d:"M 10 25 Q 10 35, 20 40 Q 25 42, 30 42 Q 35 42, 40 40 Q 50 35, 50 25 L 50 22 L 10 22 Z",fill:"white",opacity:"0.9"}),e.jsx("ellipse",{cx:"20",cy:"28",rx:"2.5",ry:"3.5",fill:"#FFF8E7",opacity:"0.9"}),e.jsx("ellipse",{cx:"30",cy:"26",rx:"2.5",ry:"3.5",fill:"#FFF8E7",opacity:"0.9"}),e.jsx("ellipse",{cx:"40",cy:"28",rx:"2.5",ry:"3.5",fill:"#FFF8E7",opacity:"0.9"}),e.jsx("rect",{x:"38",y:"15",width:"8",height:"6",rx:"1",fill:"white",opacity:"0.8"})]})}),e.jsx("span",{className:"text-lg font-bold text-gray-800",children:"MDM SEVA"})]}),e.jsxs("div",{className:"mt-3 space-y-1",children:[e.jsx(K,{href:route("profile.edit"),children:"Profile"}),e.jsx(K,{method:"post",href:route("logout"),as:"button",children:"Log Out"})]})]})]})]}),e.jsxs("div",{className:"flex-1 min-w-0 overflow-x-hidden",children:[s&&e.jsx("header",{className:"bg-card shadow-sm border-b border-secondary-200",children:e.jsx("div",{className:"mx-auto max-w-7xl px-4 py-6 sm:px-6 lg:px-8",children:s})}),e.jsx("main",{id:"main-content",role:"main",className:"min-h-screen bg-secondary-50",children:n})]})]})]}),e.jsx(Ue,{})]})}export{lr as A,er as S};
