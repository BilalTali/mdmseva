import{r as d,j as e,H as $,L as i,a as P}from"./app-cHtLohZW.js";import{A as _}from"./AuthenticatedLayout-ICdKFqYf.js";import{F as R}from"./ArrowLeftIcon-Fclx3z7n.js";import{F as o,a as c}from"./ShoppingBagIcon-CjbkeBtq.js";import{F as h}from"./DocumentTextIcon-CU0PUY3x.js";import{a as C,F as w}from"./EyeIcon-CRyPNLBE.js";import{F as A}from"./TrashIcon-Cw6PI8uA.js";import{F as D}from"./XMarkIcon-Bn2_bxSz.js";import"./transition-3zuZziW7.js";import"./AuthLogo-DTYP0PHO.js";import"./SupportChatWidget-DGKaH8G_.js";import"./createLucideIcon-BgoVBqqv.js";function O({auth:v,report:r,bills:l,hasKiryanaBill:K,hasFuelBill:S}){const[k,g]=d.useState(null),[a,m]=d.useState("all"),[t,p]=d.useState(null),[n,u]=d.useState("bw"),F=s=>{confirm("Are you sure you want to delete this bill? This action cannot be undone.")&&(g(s),P.delete(route("bills.destroy",s),{onFinish:()=>g(null)}))},f=(s,x="bw")=>{window.open(`/bills/${s}/pdf?theme=${x}&download=1`,"_blank")},B=(s,x="bw")=>{p(s),u(x)},j=()=>{p(null)},b=l.filter(s=>a==="all"?!0:s.type===a),y=l.filter(s=>s.type==="kiryana"),N=l.filter(s=>s.type==="fuel");return e.jsxs(_,{user:v.user,children:[e.jsx($,{title:`Bills - ${r.period}`}),e.jsx("div",{className:"py-12",children:e.jsxs("div",{className:"max-w-7xl mx-auto sm:px-6 lg:px-8",children:[e.jsxs("div",{className:"mb-8",children:[e.jsxs(i,{href:route("amount-reports.view-pdf",r.id),className:"inline-flex items-center text-sm text-gray-600 hover:text-gray-900 mb-4",children:[e.jsx(R,{className:"h-4 w-4 mr-2"}),"Back to Amount Report"]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Vendor Bills"}),e.jsxs("p",{className:"mt-2 text-sm text-gray-600",children:["Purchase bills for ",r.period]})]}),e.jsxs("div",{className:"flex space-x-3",children:[e.jsxs(i,{href:route("amount-reports.bills.create",{amountReport:r.id,type:"kiryana"}),className:`inline-flex items-center px-4 py-2 bg-indigo-600 border border-transparent \r
                                        rounded-md font-semibold text-xs text-white uppercase tracking-widest \r
                                        hover:bg-indigo-700 transition-colors`,children:[e.jsx(o,{className:"h-4 w-4 mr-2"}),"Add Kiryana Bill"]}),e.jsxs(i,{href:route("amount-reports.bills.create",{amountReport:r.id,type:"fuel"}),className:`inline-flex items-center px-4 py-2 bg-orange-600 border border-transparent \r
                                        rounded-md font-semibold text-xs text-white uppercase tracking-widest \r
                                        hover:bg-orange-700 transition-colors`,children:[e.jsx(c,{className:"h-4 w-4 mr-2"}),"Add Fuel Bill"]})]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-8",children:[e.jsx("div",{className:"bg-white overflow-hidden shadow-sm rounded-lg p-6",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"flex-shrink-0 bg-indigo-500 rounded-md p-3",children:e.jsx(h,{className:"h-6 w-6 text-white"})}),e.jsxs("div",{className:"ml-4",children:[e.jsx("p",{className:"text-sm font-medium text-gray-500",children:"Total Bills"}),e.jsx("p",{className:"text-2xl font-semibold text-gray-900",children:l.length})]})]})}),e.jsx("div",{className:"bg-white overflow-hidden shadow-sm rounded-lg p-6",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"flex-shrink-0 bg-green-500 rounded-md p-3",children:e.jsx(o,{className:"h-6 w-6 text-white"})}),e.jsxs("div",{className:"ml-4",children:[e.jsx("p",{className:"text-sm font-medium text-gray-500",children:"Kiryana Bills"}),e.jsx("p",{className:"text-2xl font-semibold text-gray-900",children:y.length})]})]})}),e.jsx("div",{className:"bg-white overflow-hidden shadow-sm rounded-lg p-6",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"flex-shrink-0 bg-orange-500 rounded-md p-3",children:e.jsx(c,{className:"h-6 w-6 text-white"})}),e.jsxs("div",{className:"ml-4",children:[e.jsx("p",{className:"text-sm font-medium text-gray-500",children:"Fuel Bills"}),e.jsx("p",{className:"text-2xl font-semibold text-gray-900",children:N.length})]})]})})]}),l.length>0&&e.jsx("div",{className:"mb-6",children:e.jsx("div",{className:"border-b border-gray-200",children:e.jsxs("nav",{className:"-mb-px flex space-x-8",children:[e.jsxs("button",{onClick:()=>m("all"),className:`${a==="all"?"border-indigo-500 text-indigo-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"} whitespace-nowrap py-4 px-1 border-b-2 font-medium text-sm`,children:["All Bills (",l.length,")"]}),e.jsxs("button",{onClick:()=>m("kiryana"),className:`${a==="kiryana"?"border-green-500 text-green-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"} whitespace-nowrap py-4 px-1 border-b-2 font-medium text-sm`,children:["Kiryana (",y.length,")"]}),e.jsxs("button",{onClick:()=>m("fuel"),className:`${a==="fuel"?"border-orange-500 text-orange-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"} whitespace-nowrap py-4 px-1 border-b-2 font-medium text-sm`,children:["Fuel (",N.length,")"]})]})})}),b.length===0?e.jsxs("div",{className:"bg-white shadow-sm rounded-lg p-12 text-center",children:[e.jsx(h,{className:"mx-auto h-12 w-12 text-gray-400"}),e.jsx("h3",{className:"mt-2 text-sm font-medium text-gray-900",children:"No bills found"}),e.jsx("p",{className:"mt-1 text-sm text-gray-500",children:a==="all"?"Get started by creating a kiryana or fuel bill.":`No ${a} bills found. Create one to get started.`}),e.jsxs("div",{className:"mt-6 flex justify-center space-x-3",children:[e.jsxs(i,{href:route("amount-reports.bills.create",{amountReport:r.id,type:"kiryana"}),className:"inline-flex items-center px-4 py-2 bg-indigo-600 text-white rounded-md hover:bg-indigo-700",children:[e.jsx(o,{className:"h-4 w-4 mr-2"}),"Add Kiryana Bill"]}),e.jsxs(i,{href:route("amount-reports.bills.create",{amountReport:r.id,type:"fuel"}),className:"inline-flex items-center px-4 py-2 bg-orange-600 text-white rounded-md hover:bg-orange-700",children:[e.jsx(c,{className:"h-4 w-4 mr-2"}),"Add Fuel Bill"]})]})]}):e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:b.map(s=>e.jsx("div",{className:"bg-white shadow-sm rounded-lg overflow-hidden hover:shadow-md transition-shadow",children:e.jsxs("div",{className:`p-6 border-l-4 ${s.type==="kiryana"?"border-green-500":"border-orange-500"}`,children:[e.jsxs("div",{className:"flex items-start justify-between mb-4",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center space-x-2 mb-1",children:[s.type==="kiryana"?e.jsx(o,{className:"h-5 w-5 text-green-600"}):e.jsx(c,{className:"h-5 w-5 text-orange-600"}),e.jsx("span",{className:`px-2 py-1 text-xs font-semibold rounded-full ${s.type==="kiryana"?"bg-green-100 text-green-800":"bg-orange-100 text-orange-800"}`,children:s.type_label})]}),e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:s.bill_number})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:s.formatted_total}),e.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:[s.items_count," items"]})]})]}),e.jsx("div",{className:"border-t border-gray-200 pt-4 mb-4",children:e.jsxs("div",{className:"space-y-2 text-sm",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Shop:"}),e.jsx("span",{className:"font-medium text-gray-900",children:s.shop_name})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Vendor:"}),e.jsx("span",{className:"font-medium text-gray-900",children:s.shopkeeper_name})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Phone:"}),e.jsx("span",{className:"font-medium text-gray-900",children:s.phone})]}),s.address&&e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Address:"}),e.jsx("span",{className:"font-medium text-gray-900 text-right max-w-xs truncate",children:s.address})]})]})}),e.jsxs("div",{className:"text-xs text-gray-500 mb-4",children:["Created ",s.created_at_human]}),e.jsxs("div",{className:"flex items-center space-x-2 pt-4 border-t border-gray-200",children:[e.jsxs(i,{href:route("bills.show",s.id),className:`flex-1 inline-flex items-center justify-center px-3 py-2 border border-gray-300 \r
                                                    rounded-md text-sm font-medium text-gray-700 bg-white hover:bg-gray-50`,children:[e.jsx(C,{className:"h-4 w-4 mr-2"}),"View"]}),e.jsxs("button",{onClick:()=>B(s),className:`flex-1 inline-flex items-center justify-center px-3 py-2 border border-indigo-600 \r
                                                    rounded-md text-sm font-medium text-indigo-600 bg-white hover:bg-indigo-50`,children:[e.jsx(h,{className:"h-4 w-4 mr-2"}),"Preview"]}),e.jsx("button",{onClick:()=>f(s.id),className:`px-3 py-2 border border-green-600 rounded-md text-sm font-medium \r
                                                    text-green-600 bg-white hover:bg-green-50`,title:"Download PDF",children:e.jsx(w,{className:"h-4 w-4"})}),e.jsx("button",{onClick:()=>F(s.id),disabled:k===s.id,className:`px-3 py-2 border border-red-300 rounded-md text-sm font-medium \r
                                                    text-red-600 bg-white hover:bg-red-50 disabled:opacity-50`,title:"Delete Bill",children:e.jsx(A,{className:"h-4 w-4"})})]})]})},s.id))})]})}),t&&e.jsx("div",{className:"fixed inset-0 z-50 overflow-y-auto",children:e.jsxs("div",{className:"flex min-h-screen items-center justify-center p-4",children:[e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-75 transition-opacity",onClick:j}),e.jsxs("div",{className:"relative w-full max-w-6xl bg-white rounded-lg shadow-xl",children:[e.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-gray-200",children:[e.jsxs("div",{children:[e.jsxs("h3",{className:"text-lg font-semibold text-gray-900",children:["PDF Preview: ",t.bill_number]}),e.jsxs("p",{className:"text-sm text-gray-500 mt-1",children:[t.shop_name," - ",t.formatted_total]})]}),e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsxs("select",{value:n,onChange:s=>u(s.target.value),className:"px-3 py-2 border border-gray-300 rounded-md text-sm focus:outline-none focus:ring-2 focus:ring-indigo-500",children:[e.jsx("option",{value:"bw",children:"Black & White"}),e.jsx("option",{value:"blue",children:"Blue"}),e.jsx("option",{value:"green",children:"Green"}),e.jsx("option",{value:"purple",children:"Purple"})]}),e.jsxs("button",{onClick:()=>f(t.id,n),className:"inline-flex items-center px-4 py-2 bg-indigo-600 text-white rounded-md hover:bg-indigo-700",children:[e.jsx(w,{className:"h-4 w-4 mr-2"}),"Download"]}),e.jsx("button",{onClick:j,className:"text-gray-400 hover:text-gray-600",children:e.jsx(D,{className:"h-6 w-6"})})]})]}),e.jsx("div",{className:"p-4 bg-gray-100",style:{height:"80vh"},children:e.jsx("iframe",{src:`/bills/${t.id}/pdf?theme=${n}&download=0`,className:"w-full h-full rounded border-2 border-gray-300",title:`PDF Preview: ${t.bill_number}`},`${t.id}-${n}`)})]})]})})]})}export{O as default};
