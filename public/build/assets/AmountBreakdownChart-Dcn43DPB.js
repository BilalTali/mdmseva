import{r as s,j as i}from"./app-DhNoL3JN.js";import{u as ce}from"./ThemeContext-ClUgvr7a.js";import{c as B,g as I,a as te,s as ue,b as de,r as ae,d as re,R as me,S as pe,u as $,e as fe,L as C,f as ve,G as ge,h as be,J as he,i as xe,j as X,k as Y,m as F,p as W,P as ye,l as Ae,D as Pe,n as je,o as Ee,q as Oe,t as Te,v as M,w as Z,C as we,T as Ne,x as Re,y as Se,z as Le}from"./CategoricalChart-Kmyb1PCj.js";import{s as Ie,P as Ce}from"./PolarChart-Bheyz90d.js";import{c as V}from"./clsx-B-dksMZM.js";import{C as G,u as ke,a as _e,b as De,S as Me}from"./tooltipContext-C4MJ-XPM.js";import{f as ne}from"./ReactUtils-DoRO6knW.js";import"./index-FKN27PPZ.js";import"./with-selector-BoTW-uwY.js";function H(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),a.push.apply(a,r)}return a}function Q(e){for(var t=1;t<arguments.length;t++){var a=arguments[t]!=null?arguments[t]:{};t%2?H(Object(a),!0).forEach(function(r){Ke(e,r,a[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):H(Object(a)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(a,r))})}return e}function Ke(e,t,a){return(t=Fe(t))in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function Fe(e){var t=Be(e,"string");return typeof t=="symbol"?t:t+""}function Be(e,t){if(typeof e!="object"||!e)return e;var a=e[Symbol.toPrimitive];if(a!==void 0){var r=a.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var We=(e,t)=>t,U=B([Ie,We],(e,t)=>e.filter(a=>a.type==="pie").find(a=>a.id===t)),$e=[],q=(e,t,a)=>a?.length===0?$e:a,le=B([de,U,q],(e,t,a)=>{var{chartData:r}=e;if(t!=null){var n;if(t?.data!=null&&t.data.length>0?n=t.data:n=r,(!n||!n.length)&&a!=null&&(n=a.map(l=>Q(Q({},t.presentationProps),l.props))),n!=null)return n}}),Ve=B([le,U,q],(e,t,a)=>{if(!(e==null||t==null))return e.map((r,n)=>{var l,m=I(r,t.nameKey,t.name),c;return a!=null&&(l=a[n])!==null&&l!==void 0&&(l=l.props)!==null&&l!==void 0&&l.fill?c=a[n].props.fill:typeof r=="object"&&r!=null&&"fill"in r?c=r.fill:c=t.fill,{value:te(m,t.dataKey),color:c,payload:r,type:t.legendType}})}),Ge=B([le,U,q,ue],(e,t,a,r)=>{if(!(t==null||e==null))return ut({offset:r,pieSettings:t,displayedData:e,cells:a})}),Ue=["onMouseEnter","onClick","onMouseLeave"],qe=["id"],Je=["id"];function J(e,t){if(e==null)return{};var a,r,n=ze(e,t);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);for(r=0;r<l.length;r++)a=l[r],t.indexOf(a)===-1&&{}.propertyIsEnumerable.call(e,a)&&(n[a]=e[a])}return n}function ze(e,t){if(e==null)return{};var a={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)!==-1)continue;a[r]=e[r]}return a}function ee(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),a.push.apply(a,r)}return a}function p(e){for(var t=1;t<arguments.length;t++){var a=arguments[t]!=null?arguments[t]:{};t%2?ee(Object(a),!0).forEach(function(r){Xe(e,r,a[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):ee(Object(a)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(a,r))})}return e}function Xe(e,t,a){return(t=Ye(t))in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function Ye(e){var t=Ze(e,"string");return typeof t=="symbol"?t:t+""}function Ze(e,t){if(typeof e!="object"||!e)return e;var a=e[Symbol.toPrimitive];if(a!==void 0){var r=a.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function E(){return E=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var r in a)({}).hasOwnProperty.call(a,r)&&(e[r]=a[r])}return e},E.apply(null,arguments)}function He(e){var t=s.useMemo(()=>ne(e.children,G),[e.children]),a=$(r=>Ve(r,e.id,t));return a==null?null:s.createElement(fe,{legendPayload:a})}function Qe(e){var{dataKey:t,nameKey:a,sectors:r,stroke:n,strokeWidth:l,fill:m,name:c,hide:v,tooltipType:f}=e;return{dataDefinedOnItem:r.map(g=>g.tooltipPayload),positions:r.map(g=>g.tooltipPosition),settings:{stroke:n,strokeWidth:l,fill:m,dataKey:t,nameKey:a,name:te(c,t),hide:v,type:f,color:m,unit:""}}}var et=(e,t)=>e>t?"start":e<t?"end":"middle",tt=(e,t,a)=>typeof t=="function"?M(t(e),a,a*.8):M(t,a,a*.8),at=(e,t,a)=>{var{top:r,left:n,width:l,height:m}=t,c=Te(l,m),v=n+M(e.cx,l,l/2),f=r+M(e.cy,m,m/2),g=M(e.innerRadius,c,0),x=tt(a,e.outerRadius,c),d=e.maxRadius||Math.sqrt(l*l+m*m)/2;return{cx:v,cy:f,innerRadius:g,outerRadius:x,maxRadius:d}},rt=(e,t)=>{var a=F(t-e),r=Math.min(Math.abs(t-e),360);return a*r};function nt(e){return e&&typeof e=="object"&&"className"in e&&typeof e.className=="string"?e.className:""}var lt=(e,t)=>{if(s.isValidElement(e))return s.cloneElement(e,t);if(typeof e=="function")return e(t);var a=V("recharts-pie-label-line",typeof e!="boolean"?e.className:"");return s.createElement(we,E({},t,{type:"linear",className:a}))},ot=(e,t,a)=>{if(s.isValidElement(e))return s.cloneElement(e,t);var r=a;if(typeof e=="function"&&(r=e(t),s.isValidElement(r)))return r;var n=V("recharts-pie-label-text",nt(e));return s.createElement(Ne,E({},t,{alignmentBaseline:"middle",className:n}),r)};function st(e){var{sectors:t,props:a,showLabels:r}=e,{label:n,labelLine:l,dataKey:m}=a;if(!r||!n||!t)return null;var c=re(a),v=Z(n),f=Z(l),g=typeof n=="object"&&"offsetRadius"in n&&typeof n.offsetRadius=="number"&&n.offsetRadius||20,x=t.map((d,o)=>{var u=(d.startAngle+d.endAngle)/2,b=W(d.cx,d.cy,d.outerRadius+g,u),P=p(p(p(p({},c),d),{},{stroke:"none"},v),{},{index:o,textAnchor:et(b.x,d.cx)},b),O=p(p(p(p({},c),d),{},{fill:"none",stroke:d.fill},f),{},{index:o,points:[W(d.cx,d.cy,d.outerRadius,u),b],key:"line"});return s.createElement(C,{key:"label-".concat(d.startAngle,"-").concat(d.endAngle,"-").concat(d.midAngle,"-").concat(o)},l&&lt(l,O),ot(n,P,I(d,m)))});return s.createElement(C,{className:"recharts-pie-labels"},x)}function it(e){var{sectors:t,props:a,showLabels:r}=e,{label:n}=a;return typeof n=="object"&&n!=null&&"position"in n?s.createElement(Oe,{label:n}):s.createElement(st,{sectors:t,props:a,showLabels:r})}function ct(e){var{sectors:t,activeShape:a,inactiveShape:r,allOtherPieProps:n}=e,l=$(Ae),{onMouseEnter:m,onClick:c,onMouseLeave:v}=n,f=J(n,Ue),g=ke(m,n.dataKey),x=_e(v),d=De(c,n.dataKey);return t==null||t.length===0?null:s.createElement(s.Fragment,null,t.map((o,u)=>{if(o?.startAngle===0&&o?.endAngle===0&&t.length!==1)return null;var b=a&&String(u)===l,P=l?r:null,O=b?a:P,S=p(p({},o),{},{stroke:o.stroke,tabIndex:-1,[je]:u,[Pe]:n.dataKey});return s.createElement(C,E({key:"sector-".concat(o?.startAngle,"-").concat(o?.endAngle,"-").concat(o.midAngle,"-").concat(u),tabIndex:-1,className:"recharts-pie-sector"},Ee(f,o,u),{onMouseEnter:g(o,u),onMouseLeave:x(o,u),onClick:d(o,u)}),s.createElement(Me,E({option:O,isActive:b,shapeType:"sector"},S)))}))}function ut(e){var t,{pieSettings:a,displayedData:r,cells:n,offset:l}=e,{cornerRadius:m,startAngle:c,endAngle:v,dataKey:f,nameKey:g,tooltipType:x}=a,d=Math.abs(a.minAngle),o=rt(c,v),u=Math.abs(o),b=r.length<=1?0:(t=a.paddingAngle)!==null&&t!==void 0?t:0,P=r.filter(h=>I(h,f,0)!==0).length,O=(u>=360?P:P-1)*b,S=u-P*d-O,T=r.reduce((h,j)=>{var y=I(j,f,0);return h+(Y(y)?y:0)},0),L;if(T>0){var A;L=r.map((h,j)=>{var y=I(h,f,0),w=I(h,g,j),N=at(a,l,h),k=(Y(y)?y:0)/T,R,_=p(p({},h),n&&n[j]&&n[j].props);j?R=A.endAngle+F(o)*b*(y!==0?1:0):R=c;var K=R+F(o)*((y!==0?d:0)+k*S),D=(R+K)/2,z=(N.innerRadius+N.outerRadius)/2,se=[{name:w,value:y,payload:_,dataKey:f,type:x}],ie=W(N.cx,N.cy,z,D);return A=p(p(p(p({},a.presentationProps),{},{percent:k,cornerRadius:m,name:w,tooltipPayload:se,midAngle:D,middleRadius:z,tooltipPosition:ie},_),N),{},{value:y,startAngle:R,endAngle:K,payload:_,paddingAngle:F(o)*b}),A})}return L}function dt(e){var{showLabels:t,sectors:a,children:r}=e,n=s.useMemo(()=>!t||!a?[]:a.map(l=>({value:l.value,payload:l.payload,clockWise:!1,parentViewBox:void 0,viewBox:{cx:l.cx,cy:l.cy,innerRadius:l.innerRadius,outerRadius:l.outerRadius,startAngle:l.startAngle,endAngle:l.endAngle,clockWise:!1},fill:l.fill})),[a,t]);return s.createElement(ye,{value:t?n:void 0},r)}function mt(e){var{props:t,previousSectorsRef:a}=e,{sectors:r,isAnimationActive:n,animationBegin:l,animationDuration:m,animationEasing:c,activeShape:v,inactiveShape:f,onAnimationStart:g,onAnimationEnd:x}=t,d=be(t,"recharts-pie-"),o=a.current,[u,b]=s.useState(!1),P=s.useCallback(()=>{typeof x=="function"&&x(),b(!1)},[x]),O=s.useCallback(()=>{typeof g=="function"&&g(),b(!0)},[g]);return s.createElement(dt,{showLabels:!u,sectors:r},s.createElement(he,{animationId:d,begin:l,duration:m,isActive:n,easing:c,onAnimationStart:O,onAnimationEnd:P,key:d},S=>{var T=[],L=r&&r[0],A=L?.startAngle;return r?.forEach((h,j)=>{var y=o&&o[j],w=j>0?xe(h,"paddingAngle",0):0;if(y){var N=X(y.endAngle-y.startAngle,h.endAngle-h.startAngle,S),k=p(p({},h),{},{startAngle:A+w,endAngle:A+N+w});T.push(k),A=k.endAngle}else{var{endAngle:R,startAngle:_}=h,K=X(0,R-_,S),D=p(p({},h),{},{startAngle:A+w,endAngle:A+K+w});T.push(D),A=D.endAngle}}),a.current=T,s.createElement(C,null,s.createElement(ct,{sectors:T,activeShape:v,inactiveShape:f,allOtherPieProps:t}))}),s.createElement(it,{showLabels:!u,sectors:r,props:t}),t.children)}var pt={animationBegin:400,animationDuration:1500,animationEasing:"ease",cx:"50%",cy:"50%",dataKey:"value",endAngle:360,fill:"#808080",hide:!1,innerRadius:0,isAnimationActive:!ge.isSsr,labelLine:!0,legendType:"rect",minAngle:0,nameKey:"name",outerRadius:"80%",paddingAngle:0,rootTabIndex:0,startAngle:0,stroke:"#fff"};function ft(e){var{id:t}=e,a=J(e,qe),{hide:r,className:n,rootTabIndex:l}=e,m=s.useMemo(()=>ne(e.children,G),[e.children]),c=$(g=>Ge(g,t,m)),v=s.useRef(null),f=V("recharts-pie",n);return r||c==null?(v.current=null,s.createElement(C,{tabIndex:l,className:f})):s.createElement(s.Fragment,null,s.createElement(ve,{fn:Qe,args:p(p({},e),{},{sectors:c})}),s.createElement(C,{tabIndex:l,className:f},s.createElement(mt,{props:p(p({},a),{},{sectors:c}),previousSectorsRef:v})))}function oe(e){var t=ae(e,pt),{id:a}=t,r=J(t,Je),n=re(r);return s.createElement(me,{id:a,type:"pie"},l=>s.createElement(s.Fragment,null,s.createElement(pe,{type:"pie",id:l,data:r.data,dataKey:r.dataKey,hide:r.hide,angleAxisId:0,radiusAxisId:0,name:r.name,nameKey:r.nameKey,tooltipType:r.tooltipType,legendType:r.legendType,fill:r.fill,cx:r.cx,cy:r.cy,startAngle:r.startAngle,endAngle:r.endAngle,paddingAngle:r.paddingAngle,minAngle:r.minAngle,innerRadius:r.innerRadius,outerRadius:r.outerRadius,cornerRadius:r.cornerRadius,presentationProps:n,maxRadius:t.maxRadius}),s.createElement(He,E({},r,{id:l})),s.createElement(ft,E({},r,{id:l}))))}oe.displayName="Pie";var vt=["item"],gt={layout:"centric",startAngle:0,endAngle:360,cx:"50%",cy:"50%",innerRadius:0,outerRadius:"80%"},bt=s.forwardRef((e,t)=>{var a=ae(e,gt);return s.createElement(Ce,{chartName:"PieChart",defaultTooltipEventType:"item",validateTooltipEventTypes:vt,tooltipPayloadSearcher:Re,categoricalChartProps:a,ref:t})});const wt=({data:e={},isDonut:t=!0,showPercentages:a=!0})=>{const{theme:r}=ce(),n=r==="dark",l={tooltipBg:n?"#1f2937":"#ffffff",tooltipBorder:n?"#374151":"#e5e7eb",tooltipText:n?"#f3f4f6":"#111827",text:n?"#d1d5db":"#374151",textSecondary:n?"#9ca3af":"#6b7280",totalText:n?"#f3f4f6":"#111827",totalLabel:n?"#9ca3af":"#6b7280",border:n?"#374151":"#e5e7eb"},m={pulses:"#3b82f6",vegetables:"#10b981",oil:"#f59e0b",salt:"#ec4899",fuel:"#8b5cf6"},c=[{name:"Pulses",value:parseFloat(e.pulses_total)||0,color:m.pulses},{name:"Vegetables",value:parseFloat(e.vegetables_total)||0,color:m.vegetables},{name:"Oil",value:parseFloat(e.oil_total)||0,color:m.oil},{name:"Salt",value:parseFloat(e.salt_total)||0,color:m.salt},{name:"Fuel",value:parseFloat(e.fuel_total)||0,color:m.fuel}].filter(o=>o.value>0),v=c.reduce((o,u)=>o+u.value,0),f=o=>v===0?0:(o/v*100).toFixed(1),g=({active:o,payload:u})=>{if(o&&u&&u.length){const b=u[0];return i.jsxs("div",{className:"p-3 rounded-lg shadow-lg border",style:{backgroundColor:l.tooltipBg,borderColor:l.tooltipBorder},children:[i.jsx("p",{className:"font-semibold mb-1",style:{color:l.tooltipText},children:b.name}),i.jsxs("p",{className:"text-sm",style:{color:l.textSecondary},children:["Amount: ",i.jsxs("span",{className:"font-semibold",children:["₹",b.value.toFixed(2)]})]}),i.jsxs("p",{className:"text-sm",style:{color:l.textSecondary},children:["Percentage: ",i.jsxs("span",{className:"font-semibold",children:[f(b.value),"%"]})]})]})}return null},x=o=>{if(!a)return null;const u=f(o.value);return u>5?`${u}%`:""},d=()=>i.jsxs("div",{className:"flex flex-col gap-2 mt-4",children:[c.map((o,u)=>i.jsxs("div",{className:"flex items-center justify-between text-sm",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("div",{className:"w-3 h-3 rounded-full",style:{backgroundColor:o.color}}),i.jsx("span",{style:{color:l.text},children:o.name})]}),i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsxs("span",{className:"font-semibold",style:{color:l.totalText},children:["₹",o.value.toFixed(2)]}),i.jsxs("span",{className:"w-12 text-right",style:{color:l.textSecondary},children:[f(o.value),"%"]})]})]},u)),i.jsx("div",{className:"pt-2 mt-2 border-t",style:{borderColor:l.border},children:i.jsxs("div",{className:"flex items-center justify-between font-semibold",children:[i.jsx("span",{style:{color:l.totalText},children:"Total"}),i.jsxs("span",{className:"text-blue-600",children:["₹",v.toFixed(2)]})]})})]});return!c||c.length===0?null:i.jsxs("div",{className:"w-full h-full flex flex-col relative",children:[i.jsx("div",{className:"flex-shrink-0",style:{height:"180px"},children:i.jsx(Se,{width:"100%",height:"100%",children:i.jsxs(bt,{children:[i.jsx(oe,{data:c,cx:"50%",cy:"50%",labelLine:!1,label:x,outerRadius:"65%",innerRadius:t?"40%":"0%",fill:"#8884d8",dataKey:"value",paddingAngle:2,children:c.map((o,u)=>i.jsx(G,{fill:o.color},`cell-${u}`))}),i.jsx(Le,{content:i.jsx(g,{})})]})})}),t&&v>0&&i.jsx("div",{className:"absolute top-0 left-0 right-0",style:{height:"180px",pointerEvents:"none"},children:i.jsx("div",{className:"w-full h-full flex items-center justify-center",children:i.jsxs("div",{className:"text-center",children:[i.jsx("p",{className:"text-xs uppercase tracking-wide",style:{color:l.totalLabel},children:"Total"}),i.jsxs("p",{className:"text-lg font-bold",style:{color:l.totalText},children:["₹",v.toFixed(0)]})]})})}),i.jsx("div",{className:"flex-1 overflow-y-auto px-4 pb-2",children:i.jsx(d,{})})]})};export{wt as default};
