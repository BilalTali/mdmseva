import{u as E,r as m,j as e,H as L,b as D}from"./app-DHCAgeO8.js";import{A as U}from"./AuthenticatedLayout-dBQysIGU.js";import{T as n,I as i}from"./TextInput-CA799IWg.js";import{I as d}from"./InputLabel-B9pCy3HC.js";import{P as Z}from"./PrimaryButton-CbFlhqbA.js";import{K as A}from"./transition-jgp50ovQ.js";import"./ApplicationLogo-Da_2dMoK.js";import"./createLucideIcon-DQAdNBRm.js";import"./send-BtT_p_gw.js";function J({mustVerifyEmail:T,status:$,user:a,states:h,districts:j,zones:y,schoolTypes:N}){const{data:t,setData:r,patch:_,errors:o,processing:k,recentlySuccessful:w}=E({name:a.name||"",email:a.email||"",phone:a.phone||"",date_of_birth:a.date_of_birth||"",address:a.address||"",school_name:a.school_name||"",school_type:a.school_type||"",institute_address:a.institute_address||"",school_pincode:a.school_pincode||"",state:a.state||"",district:a.district||"",zone:a.zone||"",district_id:a.district_id||"",zone_id:a.zone_id||""}),[l,u]=m.useState(1),x=3,[S,g]=m.useState(y||[]),[b,p]=m.useState(!1),[v,f]=m.useState(""),C=()=>u(s=>Math.min(x,s+1)),F=()=>u(s=>Math.max(1,s-1)),z=async s=>{if(r("district_id",s),r("zone_id",""),g([]),!!s){p(!0),f("");try{const c=await D.get(`/api/zones/${s}`),P=c.data?.data||c.data||[];g(P)}catch(c){console.error("Failed to load zones:",c),f("Failed to load zones. Please try again."),g([])}finally{p(!1)}}},I=s=>{s.preventDefault(),_(route("profile.update"),{preserveScroll:!0})};return e.jsxs(U,{header:e.jsx("h2",{className:"text-xl font-semibold leading-tight text-[var(--text-primary)]",children:"Profile Settings"}),children:[e.jsx(L,{title:"Profile"}),e.jsx("div",{className:"py-12",children:e.jsxs("div",{className:"mx-auto max-w-4xl space-y-6 sm:px-6 lg:px-8 flex flex-col items-center",children:[e.jsxs("div",{className:"mb-6 grid gap-3 sm:grid-cols-3",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:`flex items-center justify-center w-8 h-8 rounded-full text-sm font-semibold ${l===1?"bg-primary-600 text-white":"bg-secondary-200 dark:bg-secondary-700 text-[var(--text-secondary)]"}`,children:"1"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-semibold text-[var(--text-primary)]",children:"Personal details"}),e.jsx("p",{className:"text-xs text-[var(--text-tertiary)]",children:"Account & contact information"})]})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:`flex items-center justify-center w-8 h-8 rounded-full text-sm font-semibold ${l===2?"bg-primary-600 text-white":"bg-secondary-200 dark:bg-secondary-700 text-[var(--text-secondary)]"}`,children:"2"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-semibold text-[var(--text-primary)]",children:"Institution"}),e.jsx("p",{className:"text-xs text-[var(--text-tertiary)]",children:"School details"})]})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:`flex items-center justify-center w-8 h-8 rounded-full text-sm font-semibold ${l===3?"bg-primary-600 text-white":"bg-secondary-200 dark:bg-secondary-700 text-[var(--text-secondary)]"}`,children:"3"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-semibold text-[var(--text-primary)]",children:"Location"}),e.jsx("p",{className:"text-xs text-[var(--text-tertiary)]",children:"State, district & zone"})]})]})]}),e.jsxs("form",{onSubmit:I,className:"space-y-6",children:[l===1&&e.jsx("div",{className:"bg-[var(--surface-00)] shadow sm:rounded-lg p-6 border border-[var(--border-light)]",children:e.jsxs("section",{className:"max-w-xl",children:[e.jsxs("header",{children:[e.jsx("h2",{className:"text-lg font-medium text-[var(--text-primary)] mb-4",children:"Personal Information"}),e.jsx("p",{className:"mt-1 text-sm text-[var(--text-secondary)]",children:"Update your personal details and contact information."})]}),e.jsxs("div",{className:"mt-6 space-y-4",children:[v&&e.jsx("div",{className:"mb-4 rounded-md border border-red-200 dark:border-red-800 bg-red-50 dark:bg-red-900/50 px-4 py-3 text-sm text-red-700 dark:text-red-400",children:v}),e.jsxs("div",{children:[e.jsx(d,{htmlFor:"name",value:"Full Name"}),e.jsx(n,{id:"name",className:"mt-1 block w-full",value:t.name,onChange:s=>r("name",s.target.value),required:!0,autoComplete:"name"}),e.jsx(i,{className:"mt-2",message:o.name})]}),e.jsxs("div",{children:[e.jsx(d,{htmlFor:"email",value:"Email"}),e.jsx(n,{id:"email",type:"email",className:"mt-1 block w-full",value:t.email,onChange:s=>r("email",s.target.value),required:!0,autoComplete:"username"}),e.jsx(i,{className:"mt-2",message:o.email})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(d,{htmlFor:"phone",value:"Phone Number"}),e.jsx(n,{id:"phone",type:"tel",className:"mt-1 block w-full",value:t.phone,onChange:s=>r("phone",s.target.value),autoComplete:"tel"}),e.jsx(i,{className:"mt-2",message:o.phone})]}),e.jsxs("div",{children:[e.jsx(d,{htmlFor:"date_of_birth",value:"Date of Birth"}),e.jsx(n,{id:"date_of_birth",type:"date",className:"mt-1 block w-full",value:t.date_of_birth,onChange:s=>r("date_of_birth",s.target.value)}),e.jsx(i,{className:"mt-2",message:o.date_of_birth})]})]}),e.jsxs("div",{children:[e.jsx(d,{htmlFor:"address",value:"Address"}),e.jsx("textarea",{id:"address",className:"mt-1 block w-full rounded-md border-[var(--border-light)] dark:bg-gray-900 dark:text-gray-300 shadow-sm focus:border-indigo-500 dark:focus:border-indigo-400 focus:ring-indigo-500 dark:focus:ring-indigo-400",rows:"3",value:t.address,onChange:s=>r("address",s.target.value)}),e.jsx(i,{className:"mt-2",message:o.address})]})]})]})}),l===2&&e.jsx("div",{className:"bg-[var(--surface-00)] shadow sm:rounded-lg p-6 border border-[var(--border-light)]",children:e.jsxs("section",{className:"max-w-xl",children:[e.jsxs("header",{children:[e.jsx("h2",{className:"text-lg font-medium text-[var(--text-primary)] mb-4",children:"Institutional Information"}),e.jsx("p",{className:"mt-1 text-sm text-[var(--text-secondary)]",children:"Update your school and institutional details."})]}),e.jsxs("div",{className:"mt-6 space-y-4",children:[e.jsxs("div",{children:[e.jsx(d,{htmlFor:"udise",value:"UDISE Code"}),e.jsx(n,{id:"udise",className:"mt-1 block w-full bg-gray-100 dark:bg-gray-800",value:a.udise_code||"Not Set",disabled:!0,readOnly:!0}),e.jsx("p",{className:"mt-1 text-xs text-gray-500 dark:text-gray-400",children:"UDISE code cannot be changed once set"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(d,{htmlFor:"school_name",value:"School Name"}),e.jsx(n,{id:"school_name",className:"mt-1 block w-full",value:t.school_name,onChange:s=>r("school_name",s.target.value)}),e.jsx(i,{className:"mt-2",message:o.school_name})]}),e.jsxs("div",{children:[e.jsx(d,{htmlFor:"school_type",value:"School Type"}),e.jsxs("select",{id:"school_type",className:"mt-1 block w-full rounded-md border-[var(--border-light)] dark:bg-secondary-900 dark:text-secondary-300 shadow-sm focus:border-[var(--primary-500)] focus:ring-[var(--primary-500)]",value:t.school_type,onChange:s=>r("school_type",s.target.value),children:[e.jsx("option",{value:"",children:"Select School Type"}),N.map(s=>e.jsx("option",{value:s.value,children:s.label},s.value))]}),e.jsx(i,{className:"mt-2",message:o.school_type})]})]}),e.jsxs("div",{children:[e.jsx(d,{htmlFor:"institute_address",value:"Institute Address"}),e.jsx("textarea",{id:"institute_address",className:"mt-1 block w-full rounded-md border-[var(--border-light)] dark:bg-gray-900 dark:text-gray-300 shadow-sm focus:border-indigo-500 dark:focus:border-indigo-400 focus:ring-indigo-500 dark:focus:ring-indigo-400",rows:"3",value:t.institute_address,onChange:s=>r("institute_address",s.target.value)}),e.jsx(i,{className:"mt-2",message:o.institute_address})]}),e.jsxs("div",{children:[e.jsx(d,{htmlFor:"school_pincode",value:"School Pincode"}),e.jsx(n,{id:"school_pincode",className:"mt-1 block w-full",value:t.school_pincode,onChange:s=>r("school_pincode",s.target.value),maxLength:"10"}),e.jsx(i,{className:"mt-2",message:o.school_pincode})]})]})]})}),l===3&&e.jsx("div",{className:"bg-[var(--surface-00)] shadow sm:rounded-lg p-6 border border-[var(--border-light)]",children:e.jsxs("section",{className:"max-w-xl",children:[e.jsxs("header",{children:[e.jsx("h2",{className:"text-lg font-medium text-[var(--text-primary)] mb-4",children:"Location Information"}),e.jsx("p",{className:"mt-1 text-sm text-[var(--text-secondary)]",children:"Update your location and administrative details."})]}),e.jsx("div",{className:"mt-6 space-y-6",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(d,{htmlFor:"state",value:"State"}),e.jsxs("select",{id:"state",className:"mt-1 block w-full rounded-md border-[var(--border-light)] dark:bg-gray-900 dark:text-gray-300 shadow-sm focus:border-indigo-500 dark:focus:border-indigo-400 focus:ring-indigo-500 dark:focus:ring-indigo-400",value:t.state,onChange:s=>r("state",s.target.value),children:[e.jsx("option",{value:"",children:"Select State"}),h&&h.map(s=>e.jsx("option",{value:s,children:s},s))]}),e.jsx(i,{className:"mt-2",message:o.state})]}),e.jsxs("div",{children:[e.jsx(d,{htmlFor:"district_id",value:"District"}),e.jsxs("select",{id:"district_id",className:"mt-1 block w-full rounded-md border-[var(--border-light)] dark:bg-gray-900 dark:text-gray-300 shadow-sm focus:border-indigo-500 dark:focus:border-indigo-400 focus:ring-indigo-500 dark:focus:ring-indigo-400",value:t.district_id,onChange:s=>z(s.target.value),children:[e.jsx("option",{value:"",children:"Select District"}),j.map(s=>e.jsx("option",{value:s.id,children:s.name},s.id))]}),e.jsx(i,{className:"mt-2",message:o.district_id})]}),e.jsxs("div",{className:"md:col-span-2",children:[e.jsx(d,{htmlFor:"zone_id",value:"Zone"}),e.jsxs("select",{id:"zone_id",className:"mt-1 block w-full rounded-md border-[var(--border-light)] dark:bg-gray-900 dark:text-gray-300 shadow-sm focus:border-indigo-500 dark:focus:border-indigo-400 focus:ring-indigo-500 dark:focus:ring-indigo-400 disabled:bg-gray-100 dark:disabled:bg-gray-800",value:t.zone_id,onChange:s=>r("zone_id",s.target.value),disabled:!t.district_id||b,children:[e.jsx("option",{value:"",children:b?"Loading zones...":t.district_id?"Select Zone":"Select district first"}),S.map(s=>e.jsx("option",{value:s.id,children:s.name},s.id))]}),e.jsx(i,{className:"mt-2",message:o.zone_id})]})]})})]})}),e.jsx("div",{className:"mt-4 w-full max-w-xl",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("button",{type:"button",onClick:F,disabled:l===1,className:`inline-flex items-center rounded-md border px-4 py-2 text-sm font-medium shadow-sm focus:outline-none focus:ring-2 focus:ring-indigo-500 dark:focus:ring-indigo-400 focus:ring-offset-2 dark:focus:ring-offset-gray-800 ${l===1?"cursor-not-allowed border-[var(--border-light)] bg-gray-100 dark:bg-gray-800 text-gray-400 dark:text-gray-500":"border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-800 text-[var(--text-secondary)] hover:bg-gray-50 dark:hover:bg-gray-700"}`,children:"Previous"}),e.jsxs("div",{className:"flex items-center gap-4",children:[l<x&&e.jsx("button",{type:"button",onClick:C,className:"inline-flex items-center rounded-md border border-transparent bg-indigo-600 dark:bg-indigo-500 px-4 py-2 text-sm font-medium text-white shadow-sm hover:bg-indigo-700 dark:hover:bg-indigo-400 focus:outline-none focus:ring-2 focus:ring-indigo-500 dark:focus:ring-indigo-400 focus:ring-offset-2 dark:focus:ring-offset-gray-800",children:"Next"}),l===x&&e.jsx(Z,{disabled:k,children:"Update"}),e.jsx(A,{show:w,enter:"transition ease-in-out duration-300",enterFrom:"opacity-0 translate-y-1",leave:"transition ease-in-out duration-300",leaveTo:"opacity-0 translate-y-1",children:e.jsx("div",{className:"inline-flex items-center rounded-md border border-green-300 dark:border-green-800 bg-green-50 dark:bg-green-900/50 px-3 py-1 text-xs font-semibold text-green-800 dark:text-green-400 shadow-sm",children:e.jsx("span",{children:"Profile updated successfully."})})})]})]})})]})]})})]})}export{J as default};
