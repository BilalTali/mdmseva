import{j as o}from"./app-DHCAgeO8.js";import{u as C}from"./ThemeContext-EnF1JpCF.js";import{R as D,T as v}from"./CategoricalChart-B_DM5-VD.js";import{A as W,a as M}from"./AreaChart-Bfi5mQLk.js";import{L as N,a as O}from"./LineChart-kBUcZiSg.js";import{C as w,X as B,Y as _}from"./CartesianChart-DWSN_jJT.js";import{L}from"./Legend-NZY6pfzZ.js";import"./clsx-B-dksMZM.js";import"./index-Ba4gUWok.js";import"./with-selector-ClQDlPES.js";import"./ActivePoints-CV4672Dv.js";import"./ReactUtils-CHPHKHfT.js";import"./getRadiusAndStrokeWidthFromDot-CJLef0io.js";import"./ErrorBarContext-AjH_zAA5.js";const q=({data:f=[],schoolType:c="both",dateFormat:p="DD/MM",useAreaChart:i=!1})=>{const{theme:x}=C(),r=x==="dark",t={text:r?"#9ca3af":"#374151",grid:r?"#374151":"#e5e7eb",tooltipBg:r?"#1f2937":"#ffffff",tooltipBorder:r?"#374151":"#e5e7eb",tooltipText:r?"#f3f4f6":"#111827",opening:"#3b82f6",closing:"#10b981",primary:"#8b5cf6",middle:"#f59e0b",consumed:"#ef4444"},h=e=>{if(!e)return"";const s=new Date(e),n=s.getDate().toString().padStart(2,"0"),d=(s.getMonth()+1).toString().padStart(2,"0");return p==="DD/MM"?`${n}/${d}`:p==="DD MMM"?`${n} ${["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"][s.getMonth()]}`:e},l=f.map(e=>({...e,displayDate:h(e.date),opening:parseFloat(e.opening)||0,consumed:parseFloat(e.consumed)||0,closing:parseFloat(e.closing)||0,primary_consumed:parseFloat(e.primary_consumed)||0,middle_consumed:parseFloat(e.middle_consumed)||0})),y=c==="primary"||c==="middle",g=c==="middle",u=({active:e,payload:s,label:n})=>e&&s&&s.length?o.jsxs("div",{className:"p-4 rounded-lg shadow-xl border-2",style:{backgroundColor:t.tooltipBg,borderColor:t.tooltipBorder},children:[o.jsxs("p",{className:"font-bold mb-3 pb-2 border-b",style:{color:t.tooltipText,borderColor:t.tooltipBorder},children:["ðŸ“… ",n]}),o.jsx("div",{className:"space-y-1.5",children:s.map((d,m)=>o.jsxs("div",{className:"flex items-center justify-between gap-6 text-sm",children:[o.jsxs("span",{className:"flex items-center gap-2",children:[o.jsx("span",{className:"w-3 h-3 rounded-full shadow-sm",style:{backgroundColor:d.color}}),o.jsxs("span",{className:"font-medium",style:{color:r?"#d1d5db":"#374151"},children:[d.name,":"]})]}),o.jsxs("span",{className:"font-bold",style:{color:t.tooltipText},children:[d.value.toFixed(2)," kg"]})]},m))})]}):null,j=({payload:e})=>o.jsx("div",{className:"flex flex-wrap items-center justify-center gap-4 mt-6 pb-2",children:e.map((s,n)=>o.jsxs("div",{className:"flex items-center gap-2 px-3 py-1.5 rounded-full",style:{backgroundColor:r?"#374151":"#f9fafb"},children:[o.jsx("span",{className:"w-3 h-3 rounded-full",style:{backgroundColor:s.color}}),o.jsx("span",{className:"text-sm font-medium",style:{color:r?"#e5e7eb":"#374151"},children:s.value})]},n))});if(!l||l.length===0)return null;const k={data:l,margin:{top:10,right:30,left:20,bottom:60}},b=i?W:N,a=i?M:O;return o.jsx(D,{width:"100%",height:"100%",children:o.jsxs(b,{...k,children:[o.jsxs("defs",{children:[o.jsxs("linearGradient",{id:"colorOpening",x1:"0",y1:"0",x2:"0",y2:"1",children:[o.jsx("stop",{offset:"5%",stopColor:t.opening,stopOpacity:.3}),o.jsx("stop",{offset:"95%",stopColor:t.opening,stopOpacity:0})]}),o.jsxs("linearGradient",{id:"colorClosing",x1:"0",y1:"0",x2:"0",y2:"1",children:[o.jsx("stop",{offset:"5%",stopColor:t.closing,stopOpacity:.3}),o.jsx("stop",{offset:"95%",stopColor:t.closing,stopOpacity:0})]}),o.jsxs("linearGradient",{id:"colorPrimary",x1:"0",y1:"0",x2:"0",y2:"1",children:[o.jsx("stop",{offset:"5%",stopColor:t.primary,stopOpacity:.3}),o.jsx("stop",{offset:"95%",stopColor:t.primary,stopOpacity:0})]}),o.jsxs("linearGradient",{id:"colorMiddle",x1:"0",y1:"0",x2:"0",y2:"1",children:[o.jsx("stop",{offset:"5%",stopColor:t.middle,stopOpacity:.3}),o.jsx("stop",{offset:"95%",stopColor:t.middle,stopOpacity:0})]})]}),o.jsx(w,{strokeDasharray:"3 3",stroke:t.grid,vertical:!1}),o.jsx(B,{dataKey:"displayDate",stroke:t.text,style:{fontSize:"12px",fontWeight:"500"},angle:-45,textAnchor:"end",height:80,tick:{fill:t.text}}),o.jsx(_,{stroke:t.text,style:{fontSize:"12px",fontWeight:"500"},tick:{fill:t.text},label:{value:"Rice Stock (kg)",angle:-90,position:"insideLeft",style:{fontSize:"13px",fill:t.text,fontWeight:"600"}}}),o.jsx(v,{content:o.jsx(u,{})}),o.jsx(L,{content:o.jsx(j,{})}),o.jsx(a,{type:"monotone",dataKey:"opening",stroke:t.opening,fill:i?"url(#colorOpening)":void 0,strokeWidth:3,name:"Opening Balance",dot:{fill:t.opening,strokeWidth:2,r:5},activeDot:{r:7,strokeWidth:2}}),y&&l[0]?.primary_consumed!==void 0&&o.jsx(a,{type:"monotone",dataKey:"primary_consumed",stroke:t.primary,fill:i?"url(#colorPrimary)":void 0,strokeWidth:2.5,strokeDasharray:"5 5",name:"Primary Consumed",dot:{fill:t.primary,strokeWidth:2,r:4},activeDot:{r:6}}),g&&l[0]?.middle_consumed!==void 0&&o.jsx(a,{type:"monotone",dataKey:"middle_consumed",stroke:t.middle,fill:i?"url(#colorMiddle)":void 0,strokeWidth:2.5,strokeDasharray:"5 5",name:"Middle Consumed",dot:{fill:t.middle,strokeWidth:2,r:4},activeDot:{r:6}}),o.jsx(a,{type:"monotone",dataKey:"consumed",stroke:t.consumed,strokeWidth:3,name:"Total Consumed",dot:{fill:t.consumed,strokeWidth:2,r:5},activeDot:{r:7,strokeWidth:2}}),o.jsx(a,{type:"monotone",dataKey:"closing",stroke:t.closing,fill:i?"url(#colorClosing)":void 0,strokeWidth:4,name:"Closing Balance",dot:{fill:t.closing,strokeWidth:2,r:6,stroke:"#fff"},activeDot:{r:8,strokeWidth:2}})]})})};export{q as default};
