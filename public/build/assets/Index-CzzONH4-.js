import{j as e,H as k,L as x,a as h}from"./app-DhNoL3JN.js";import{A as F}from"./AuthenticatedLayout-D4HZ-Zjq.js";import{C as g}from"./chart-column-C86L0jm6.js";import{U as $}from"./users-ClieAEn6.js";import{P as j}from"./plus-DwoHsNxH.js";import{F as D}from"./SupportChatWidget-C2pfx3sn.js";import{E as R}from"./eye-DHd0bO7j.js";import{F as T}from"./file-down-DAO3Y7BD.js";import{T as S}from"./trash-2-BLnqm2AH.js";import{D as A}from"./download-CM9CPvHt.js";import"./transition-Cfg9tJBG.js";import"./AuthLogo-DOO80UpC.js";import"./createLucideIcon-B4Gf14wH.js";function Q({auth:b,reports:d,schoolType:I,sections:i,enrollment:n,availableStock:N,rollStatements:L,statistics:c,riceConfig:t,riceRates:m,currentMonth:l,currentYear:a,availableMonths:o=[]}){const p=l?new Date(a,l-1,1).toLocaleDateString("en-US",{month:"long"}):"",u=s=>{const[r,_]=s.target.value.split("-");h.get("/rice-reports",{month:r,year:_},{preserveState:!0,preserveScroll:!0})},f=l&&a?`${l} -${a} `:"",y=(s,r)=>{confirm(`Delete rice report for ${r} ? This action cannot be undone.`)&&h.delete(`/ rice - reports / ${s} `,{preserveScroll:!0})},v=s=>{window.location.href=`/ rice - reports / ${s}/download-pdf`},w=s=>{const r=document.createElement("div");return r.innerHTML=s,r.textContent||r.innerText||""};return e.jsxs(F,{user:b.user,header:e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("h2",{className:"font-semibold text-xl text-gray-800 leading-tight",children:"Rice Reports"}),e.jsxs("div",{className:"flex gap-2",children:[o.length>0&&e.jsx("select",{value:f,onChange:u,className:"px-3 py-2 border border-gray-300 rounded-md text-sm focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500",children:o.map(s=>e.jsx("option",{value:`${s.month}-${s.year}`,children:s.label},`${s.month}-${s.year}`))}),l&&a&&e.jsxs("a",{href:`/rice-reports/export?month=${l}&year=${a}&format=xlsx`,className:"inline-flex items-center px-4 py-2 bg-emerald-600 border border-transparent rounded-md font-semibold text-xs text-white uppercase tracking-widest hover:bg-emerald-700 transition",children:[e.jsx(A,{className:"w-4 h-4 mr-2"}),"Export"]}),e.jsxs(x,{href:`/rice-reports/create${l&&a?`?month=${l}&year=${a}`:""}`,className:"inline-flex items-center px-4 py-2 bg-indigo-600 border border-transparent rounded-md font-semibold text-xs text-white uppercase tracking-widest hover:bg-indigo-700 transition",children:[e.jsx(j,{className:"w-4 h-4 mr-2"}),"New Report"]})]})]}),children:[e.jsx(k,{title:"Rice Reports"}),e.jsx("div",{className:"py-12",children:e.jsxs("div",{className:"max-w-7xl mx-auto sm:px-6 lg:px-8 space-y-6",children:[l&&a&&e.jsx("div",{className:"bg-blue-50 border-l-4 border-blue-500 p-4 rounded",children:e.jsxs("p",{className:"text-blue-800 text-sm font-semibold",children:["ðŸ“Š Showing statistics for: ",e.jsxs("span",{className:"font-bold",children:[p," ",a]})]})}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[e.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[e.jsx("p",{className:"text-sm text-gray-600 mb-1",children:"Available Stock"}),e.jsxs("p",{className:"text-3xl font-bold text-green-600",children:[N.toFixed(2)," kg"]})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[e.jsx("p",{className:"text-sm text-gray-600 mb-1",children:"Total Consumed"}),e.jsxs("p",{className:"text-3xl font-bold text-red-600",children:[c.total_rice_consumed?.toFixed(2)||"0.00"," kg"]})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[e.jsx("p",{className:"text-sm text-gray-600 mb-1",children:"Avg Daily Consumption"}),e.jsxs("p",{className:"text-3xl font-bold text-blue-600",children:[c.average_daily_consumption?.toFixed(2)||"0.00"," kg"]})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[e.jsx("p",{className:"text-sm text-gray-600 mb-1",children:"Total Reports"}),e.jsx("p",{className:"text-3xl font-bold text-purple-600",children:c.total_reports||0})]})]}),t&&e.jsx("div",{className:"bg-gradient-to-r from-amber-50 to-orange-50 border border-amber-200 rounded-lg p-6",children:e.jsxs("div",{className:"flex items-start",children:[e.jsx(g,{className:"w-8 h-8 text-amber-600 mr-4 flex-shrink-0"}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("h3",{className:"text-lg font-semibold text-gray-900 mb-3",children:["Rice Configuration - ",p," ",a]}),m&&e.jsxs("div",{className:"mb-4 p-3 bg-white rounded-lg border border-amber-200",children:[e.jsx("h4",{className:"text-sm font-semibold text-amber-900 mb-2",children:"Rice per Student (Daily)"}),e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[i?.includes("primary")&&e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-gray-600",children:"Primary (KG-V)"}),e.jsxs("p",{className:"text-lg font-bold text-blue-700",children:[m.primary?.toFixed(3)||"0.000"," kg"]})]}),i?.includes("middle")&&e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-gray-600",children:"Middle (VI-VIII)"}),e.jsxs("p",{className:"text-lg font-bold text-indigo-700",children:[m.middle?.toFixed(3)||"0.000"," kg"]})]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[i?.includes("primary")&&e.jsxs("div",{className:"p-3 bg-white rounded-lg border border-blue-200",children:[e.jsx("h4",{className:"text-sm font-semibold text-blue-900 mb-2",children:"Primary (KG-5th)"}),e.jsxs("div",{className:"space-y-1 text-xs",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Opening:"}),e.jsxs("span",{className:"font-semibold",children:[t.opening_balance_primary?.toFixed(2)||"0.00"," kg"]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Rice Lifted:"}),e.jsxs("span",{className:"font-semibold text-green-600",children:[t.rice_lifted_primary?.toFixed(2)||"0.00"," kg"]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Rice Arranged:"}),e.jsxs("span",{className:"font-semibold text-amber-600",children:[t.rice_arranged_primary?.toFixed(2)||"0.00"," kg"]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Consumed:"}),e.jsxs("span",{className:"font-semibold text-red-600",children:[t.consumed_primary?.toFixed(2)||"0.00"," kg"]})]}),e.jsxs("div",{className:"flex justify-between pt-1 border-t border-blue-200",children:[e.jsx("span",{className:"text-gray-600 font-medium",children:"Closing:"}),e.jsxs("span",{className:"font-bold text-blue-700",children:[t.closing_balance_primary?.toFixed(2)||"0.00"," kg"]})]})]})]}),i?.includes("middle")&&e.jsxs("div",{className:"p-3 bg-white rounded-lg border border-indigo-200",children:[e.jsx("h4",{className:"text-sm font-semibold text-indigo-900 mb-2",children:"Upper Primary (6th-8th)"}),e.jsxs("div",{className:"space-y-1 text-xs",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Opening:"}),e.jsxs("span",{className:"font-semibold",children:[t.opening_balance_upper_primary?.toFixed(2)||"0.00"," kg"]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Rice Lifted:"}),e.jsxs("span",{className:"font-semibold text-green-600",children:[t.rice_lifted_upper_primary?.toFixed(2)||"0.00"," kg"]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Rice Arranged:"}),e.jsxs("span",{className:"font-semibold text-amber-600",children:[t.rice_arranged_upper_primary?.toFixed(2)||"0.00"," kg"]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Consumed:"}),e.jsxs("span",{className:"font-semibold text-red-600",children:[t.consumed_upper_primary?.toFixed(2)||"0.00"," kg"]})]}),e.jsxs("div",{className:"flex justify-between pt-1 border-t border-indigo-200",children:[e.jsx("span",{className:"text-gray-600 font-medium",children:"Closing:"}),e.jsxs("span",{className:"font-bold text-indigo-700",children:[t.closing_balance_upper_primary?.toFixed(2)||"0.00"," kg"]})]})]})]})]}),e.jsx("div",{className:"mt-4 p-3 bg-gradient-to-r from-purple-100 to-pink-100 rounded-lg border border-purple-300",children:e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-5 gap-3 text-center",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-purple-700",children:"Total Opening"}),e.jsxs("p",{className:"text-sm font-bold text-purple-900",children:[t.total_opening_balance?.toFixed(2)||"0.00"," kg"]})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-purple-700",children:"Total Lifted"}),e.jsxs("p",{className:"text-sm font-bold text-green-700",children:[t.total_rice_lifted?.toFixed(2)||"0.00"," kg"]})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-purple-700",children:"Total Arranged"}),e.jsxs("p",{className:"text-sm font-bold text-amber-700",children:[t.total_rice_arranged?.toFixed(2)||"0.00"," kg"]})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-purple-700",children:"Total Consumed"}),e.jsxs("p",{className:"text-sm font-bold text-red-700",children:[t.total_consumed?.toFixed(2)||"0.00"," kg"]})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-purple-700",children:"Total Closing"}),e.jsxs("p",{className:"text-sm font-bold text-green-700",children:[t.total_closing_balance?.toFixed(2)||"0.00"," kg"]})]})]})}),e.jsxs("p",{className:"text-xs text-amber-700 mt-3 flex items-center",children:[e.jsx("span",{className:"inline-block w-2 h-2 bg-green-500 rounded-full mr-2 animate-pulse"}),"âœ“ All values are synced with live RiceConfiguration data"]})]})]})}),n&&e.jsx("div",{className:"bg-gradient-to-r from-blue-50 to-indigo-50 border border-blue-200 rounded-lg p-6",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx($,{className:"w-8 h-8 text-blue-600 mr-4"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"Current Enrollment"}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[i?.includes("primary")&&e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Primary (I-V)"}),e.jsx("p",{className:"text-2xl font-bold text-blue-700",children:n.primary||0})]}),i?.includes("middle")&&e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Middle (VI-VIII)"}),e.jsx("p",{className:"text-2xl font-bold text-indigo-700",children:n.middle||0})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Total Students"}),e.jsx("p",{className:"text-2xl font-bold text-purple-700",children:(n.primary||0)+(n.middle||0)})]})]})]})]})}),e.jsx("div",{className:"bg-white shadow-sm sm:rounded-lg",children:e.jsxs("div",{className:"p-6",children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Generated Reports"}),d.data.length===0?e.jsxs("div",{className:"text-center py-12",children:[e.jsx(g,{className:"mx-auto h-12 w-12 text-gray-400"}),e.jsx("h3",{className:"mt-2 text-sm font-medium text-gray-900",children:"No reports yet"}),e.jsx("p",{className:"mt-1 text-sm text-gray-500",children:"Get started by generating your first rice consumption report."}),e.jsx("div",{className:"mt-6",children:e.jsxs(x,{href:"/rice-reports/create",className:"inline-flex items-center px-4 py-2 bg-indigo-600 border border-transparent rounded-md font-semibold text-xs text-white uppercase tracking-widest hover:bg-indigo-700",children:[e.jsx(j,{className:"w-4 h-4 mr-2"}),"Generate Report"]})})]}):e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Period"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Opening Balance"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Consumed"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Closing Balance"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Serving Days"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Generated"}),e.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:d.data.map(s=>e.jsxs("tr",{className:"hover:bg-gray-50",children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsxs("div",{className:"text-sm font-medium text-gray-900",children:[s.month_name," ",s.year]})}),e.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:[s.opening_balance," kg"]}),e.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-red-600 font-medium",children:[s.total_rice_consumed," kg"]}),e.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-green-600 font-medium",children:[s.closing_balance," kg"]}),e.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:[s.total_serving_days," days"]}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:new Date(s.created_at).toLocaleDateString()}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium",children:e.jsxs("div",{className:"flex items-center justify-end gap-2",children:[e.jsx(x,{href:`/amount-reports?month=${s.month}&year=${s.year}`,className:"text-blue-600 hover:text-blue-900",title:"View Amount Report",children:e.jsx(D,{className:"w-5 h-5"})}),e.jsx(x,{href:`/rice-reports/${s.id}/view-pdf`,className:"text-indigo-600 hover:text-indigo-900",title:"View PDF",children:e.jsx(R,{className:"w-5 h-5"})}),e.jsx("button",{onClick:()=>v(s.id),className:"text-green-600 hover:text-green-900",title:"Download PDF",children:e.jsx(T,{className:"w-5 h-5"})}),e.jsx("button",{onClick:()=>y(s.id,`${s.month_name} ${s.year}`),className:"text-red-600 hover:text-red-900",title:"Delete",children:e.jsx(S,{className:"w-5 h-5"})})]})})]},s.id))})]})}),d.data.length>0&&d.links&&e.jsxs("div",{className:"mt-4 flex items-center justify-between border-t border-gray-200 pt-4",children:[e.jsxs("div",{className:"text-sm text-gray-700",children:["Showing ",e.jsx("span",{className:"font-medium",children:d.from})," to"," ",e.jsx("span",{className:"font-medium",children:d.to})," of"," ",e.jsx("span",{className:"font-medium",children:d.total})," reports"]}),e.jsx("div",{className:"flex gap-2",children:d.links.map((s,r)=>e.jsx(x,{href:s.url||"#",preserveScroll:!0,className:`px-3 py-2 rounded-md text-sm font-medium ${s.active?"bg-indigo-600 text-white":s.url?"bg-white text-gray-700 hover:bg-gray-50":"bg-gray-100 text-gray-400 cursor-not-allowed"}`,children:w(s.label)},r))})]})]})})]})})]})}export{Q as default};
