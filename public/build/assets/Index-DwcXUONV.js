import{r as p,u as y,j as e,a as j}from"./app-cHtLohZW.js";import{A as T}from"./AdminLayout-DMhJuHco.js";import{S as N}from"./sparkles-IsQu1gLo.js";import{c as i}from"./createLucideIcon-BgoVBqqv.js";import{S as C}from"./save-BpZm23xl.js";import{U as v}from"./upload-MzfBHVLb.js";import{T as F}from"./trash-2-sTL8M92Z.js";import"./AuthenticatedLayout-ICdKFqYf.js";import"./transition-3zuZziW7.js";import"./AuthLogo-DTYP0PHO.js";import"./SupportChatWidget-DGKaH8G_.js";/**
 * @license lucide-react v0.552.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const I=[["path",{d:"M6 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.704.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2z",key:"1oefj6"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5",key:"wfsgrz"}]],d=i("file",I);/**
 * @license lucide-react v0.552.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const P=[["path",{d:"M9.671 4.136a2.34 2.34 0 0 1 4.659 0 2.34 2.34 0 0 0 3.319 1.915 2.34 2.34 0 0 1 2.33 4.033 2.34 2.34 0 0 0 0 3.831 2.34 2.34 0 0 1-2.33 4.033 2.34 2.34 0 0 0-3.319 1.915 2.34 2.34 0 0 1-4.659 0 2.34 2.34 0 0 0-3.32-1.915 2.34 2.34 0 0 1-2.33-4.033 2.34 2.34 0 0 0 0-3.831A2.34 2.34 0 0 1 6.35 6.051a2.34 2.34 0 0 0 3.319-1.915",key:"1i5ecw"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],$=i("settings",P);/**
 * @license lucide-react v0.552.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const M=[["path",{d:"M14.5 2v17.5c0 1.4-1.1 2.5-2.5 2.5c-1.4 0-2.5-1.1-2.5-2.5V2",key:"125lnx"}],["path",{d:"M8.5 2h7",key:"csnxdl"}],["path",{d:"M14.5 16h-5",key:"1ox875"}]],R=i("test-tube",M);/**
 * @license lucide-react v0.552.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const U=[["circle",{cx:"9",cy:"12",r:"3",key:"u3jwor"}],["rect",{width:"20",height:"14",x:"2",y:"5",rx:"7",key:"g7kal2"}]],E=i("toggle-left",U);/**
 * @license lucide-react v0.552.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const z=[["circle",{cx:"15",cy:"12",r:"3",key:"1afu0r"}],["rect",{width:"20",height:"14",x:"2",y:"5",rx:"7",key:"g7kal2"}]],L=i("toggle-right",z);function W({config:l,knowledgeBase:n}){const[c,u]=p.useState("settings"),[s,m]=p.useState(null),[g,h]=p.useState(!1),{data:a,setData:o,post:w,processing:b,errors:f}=y({system_prompt:l?.system_prompt||"",is_enabled:l?.is_enabled??!0,auto_respond:l?.auto_respond??!0,max_tokens:l?.max_tokens||1024,temperature:l?.temperature||.7}),r=y({pdf:null}),k=t=>{t.preventDefault(),w(route("admin.ai-config.update"),{preserveScroll:!0,onSuccess:()=>{alert("AI configuration updated successfully!")}})},_=t=>{if(t.preventDefault(),!r.data.pdf){alert("Please select a PDF file");return}r.post(route("admin.ai-config.upload-pdf"),{preserveScroll:!0,onSuccess:()=>{r.reset(),alert("PDF uploaded and processed successfully!")},onError:x=>{alert(x.pdf||"Failed to upload PDF")}})},A=t=>{j.post(route("admin.ai-config.toggle-pdf",t),{},{preserveScroll:!0})},S=t=>{confirm("Are you sure you want to delete this PDF?")&&j.delete(route("admin.ai-config.delete-pdf",t),{preserveScroll:!0})},D=async()=>{h(!0),m(null);try{const x=await(await fetch(route("admin.ai-config.test-ai"),{method:"POST",headers:{"Content-Type":"application/json","X-CSRF-TOKEN":document.querySelector('meta[name="csrf-token"]').content}})).json();m(x)}catch(t){m({success:!1,message:"Failed to test AI configuration",error:t.message})}finally{h(!1)}};return e.jsx(T,{children:e.jsx("div",{className:"max-w-6xl mx-auto p-6",children:e.jsxs("div",{className:"bg-white rounded-lg shadow-md",children:[e.jsx("div",{className:"border-b px-6 py-4 bg-gradient-to-r from-purple-50 to-blue-50",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"bg-gradient-to-br from-purple-500 to-blue-500 p-2 rounded-lg",children:e.jsx(N,{className:"w-6 h-6 text-white"})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"AI Agent Configuration"}),e.jsx("p",{className:"text-gray-600 mt-1 text-sm",children:"Configure the AI agent for automated support chat responses"})]})]})}),e.jsx("div",{className:"border-b px-6",children:e.jsxs("div",{className:"flex space-x-8",children:[e.jsxs("button",{onClick:()=>u("settings"),className:`py-4 border-b-2 font-medium text-sm transition-colors ${c==="settings"?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700"}`,children:[e.jsx($,{className:"inline w-5 h-5 mr-2"}),"AI Settings"]}),e.jsxs("button",{onClick:()=>u("knowledge"),className:`py-4 border-b-2 font-medium text-sm transition-colors ${c==="knowledge"?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700"}`,children:[e.jsx(d,{className:"inline w-5 h-5 mr-2"}),"Knowledge Base (",n?.length||0,")"]})]})}),e.jsxs("div",{className:"p-6",children:[c==="settings"&&e.jsxs("form",{onSubmit:k,className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between p-4 bg-gradient-to-r from-green-50 to-emerald-50 rounded-lg border border-green-200",children:[e.jsxs("div",{children:[e.jsxs("h3",{className:"font-semibold text-gray-900 flex items-center gap-2",children:[e.jsx(N,{className:"w-5 h-5 text-green-600"}),"Enable AI Agent"]}),e.jsx("p",{className:"text-sm text-gray-600 mt-1",children:"Activate AI-powered automatic responses for user messages"})]}),e.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:a.is_enabled,onChange:t=>o("is_enabled",t.target.checked),className:"sr-only peer"}),e.jsx("div",{className:"w-14 h-7 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-blue-300 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-0.5 after:left-[4px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-6 after:w-6 after:transition-all peer-checked:bg-green-600"})]})]}),e.jsxs("div",{className:"flex items-center justify-between p-4 bg-blue-50 rounded-lg border border-blue-200",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-gray-900",children:"Auto Respond"}),e.jsx("p",{className:"text-sm text-gray-600 mt-1",children:"Automatically reply to new user messages (if AI is enabled)"})]}),e.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:a.auto_respond,onChange:t=>o("auto_respond",t.target.checked),className:"sr-only peer"}),e.jsx("div",{className:"w-14 h-7 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-blue-300 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-0.5 after:left-[4px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-6 after:w-6 after:transition-all peer-checked:bg-blue-600"})]})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["System Prompt ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("p",{className:"text-xs text-gray-500 mb-2",children:"Define the AI's behavior, personality, and how it should respond to users. Be specific about its role and capabilities."}),e.jsx("textarea",{value:a.system_prompt,onChange:t=>o("system_prompt",t.target.value),rows:8,className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent font-mono text-sm",placeholder:"You are a helpful support assistant for MDM SEVA...",required:!0}),f.system_prompt&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:f.system_prompt})]}),e.jsxs("div",{className:"border-t pt-6",children:[e.jsx("h3",{className:"text-lg font-semibold mb-4 text-gray-900",children:"Advanced Settings"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Max Tokens"}),e.jsx("p",{className:"text-xs text-gray-500 mb-2",children:"Maximum length of AI responses (100-4096)"}),e.jsx("input",{type:"number",value:a.max_tokens,onChange:t=>o("max_tokens",parseInt(t.target.value)),min:"100",max:"4096",className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Temperature (",a.temperature,")"]}),e.jsx("p",{className:"text-xs text-gray-500 mb-2",children:"Response creativity: 0 (precise) to 1 (creative)"}),e.jsx("input",{type:"range",value:a.temperature,onChange:t=>o("temperature",parseFloat(t.target.value)),min:"0",max:"1",step:"0.1",className:"w-full h-2 bg-gray-200 rounded-lg appearance-none cursor-pointer"}),e.jsxs("div",{className:"flex justify-between text-xs text-gray-500 mt-1",children:[e.jsx("span",{children:"Precise"}),e.jsx("span",{children:"Balanced"}),e.jsx("span",{children:"Creative"})]})]})]})]}),e.jsxs("div",{className:"border-t pt-6",children:[e.jsxs("button",{type:"button",onClick:D,disabled:g,className:"inline-flex items-center px-4 py-2 bg-purple-600 text-white rounded-lg hover:bg-purple-700 disabled:opacity-50 transition-colors",children:[e.jsx(R,{className:"w-5 h-5 mr-2"}),g?"Testing...":"Test AI Connection"]}),s&&e.jsxs("div",{className:`mt-4 p-4 rounded-lg ${s.success?"bg-green-50 border border-green-200":"bg-red-50 border border-red-200"}`,children:[e.jsx("h4",{className:`font-semibold ${s.success?"text-green-900":"text-red-900"}`,children:s.success?"✓ Test Successful":"✗ Test Failed"}),e.jsx("p",{className:`text-sm mt-1 ${s.success?"text-green-700":"text-red-700"}`,children:s.message}),s.response&&e.jsx("div",{className:"mt-2 p-3 bg-white rounded border border-green-300",children:e.jsx("p",{className:"text-sm font-mono text-gray-700",children:s.response})}),s.error&&e.jsx("p",{className:"text-sm mt-2 font-mono text-red-600",children:s.error})]})]}),e.jsx("div",{className:"flex justify-end border-t pt-6",children:e.jsxs("button",{type:"submit",disabled:b,className:"inline-flex items-center px-6 py-3 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50 font-medium transition-colors shadow-md hover:shadow-lg",children:[e.jsx(C,{className:"w-5 h-5 mr-2"}),b?"Saving...":"Save Configuration"]})})]}),c==="knowledge"&&e.jsxs("div",{className:"space-y-6",children:[e.jsx("form",{onSubmit:_,className:"border-2 border-dashed border-gray-300 rounded-lg p-8 bg-gray-50 hover:bg-gray-100 transition-colors",children:e.jsxs("div",{className:"text-center",children:[e.jsx(v,{className:"mx-auto h-12 w-12 text-gray-400"}),e.jsx("h3",{className:"mt-2 text-sm font-medium text-gray-900",children:"Upload PDF Document"}),e.jsx("p",{className:"mt-1 text-sm text-gray-500",children:"Add documents to the AI knowledge base (Max 10MB)"}),e.jsx("div",{className:"mt-4",children:e.jsx("input",{type:"file",accept:".pdf",onChange:t=>r.setData("pdf",t.target.files[0]),className:"block w-full text-sm text-gray-500 file:mr-4 file:py-2 file:px-4 file:rounded-lg file:border-0 file:text-sm file:font-semibold file:bg-blue-50 file:text-blue-700 hover:file:bg-blue-100 cursor-pointer"})}),e.jsxs("button",{type:"submit",disabled:!r.data.pdf||r.processing,className:"mt-4 inline-flex items-center px-6 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:[e.jsx(v,{className:"w-4 h-4 mr-2"}),r.processing?"Processing...":"Upload & Process PDF"]})]})}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("h3",{className:"text-lg font-semibold flex items-center gap-2",children:[e.jsx(d,{className:"w-5 h-5 text-blue-600"}),"Uploaded Documents (",n?.length||0,")"]}),!n||n.length===0?e.jsxs("div",{className:"text-center py-12 bg-gray-50 rounded-lg border-2 border-dashed border-gray-300",children:[e.jsx(d,{className:"mx-auto h-12 w-12 text-gray-400"}),e.jsx("p",{className:"mt-2 text-sm text-gray-500",children:"No documents uploaded yet"}),e.jsx("p",{className:"text-xs text-gray-400 mt-1",children:"Upload PDFs to build the knowledge base"})]}):n.map(t=>e.jsxs("div",{className:"flex items-center justify-between p-4 border rounded-lg hover:bg-gray-50 transition-colors",children:[e.jsxs("div",{className:"flex items-center space-x-4 flex-1 min-w-0",children:[e.jsx("div",{className:`p-3 rounded-lg ${t.is_active?"bg-green-100":"bg-gray-100"}`,children:e.jsx(d,{className:`w-8 h-8 ${t.is_active?"text-green-600":"text-gray-400"}`})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("h4",{className:"font-medium text-gray-900 truncate",children:t.file_name}),e.jsxs("div",{className:"flex items-center gap-3 mt-1",children:[e.jsx("p",{className:"text-sm text-gray-500",children:t.file_size_human}),e.jsx("span",{className:`text-xs px-2 py-1 rounded-full ${t.is_active?"bg-green-100 text-green-800":"bg-gray-100 text-gray-600"}`,children:t.is_active?"Active":"Inactive"})]})]})]}),e.jsxs("div",{className:"flex items-center space-x-2 ml-4",children:[e.jsx("button",{onClick:()=>A(t.id),className:`p-2 rounded-lg transition-colors ${t.is_active?"text-green-600 hover:bg-green-50":"text-gray-400 hover:bg-gray-100"}`,title:t.is_active?"Deactivate":"Activate",children:t.is_active?e.jsx(L,{className:"w-6 h-6"}):e.jsx(E,{className:"w-6 h-6"})}),e.jsx("button",{onClick:()=>S(t.id),className:"p-2 text-red-600 hover:bg-red-50 rounded-lg transition-colors",title:"Delete",children:e.jsx(F,{className:"w-5 h-5"})})]})]},t.id))]})]})]})]})})})}export{W as default};
