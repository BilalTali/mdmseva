import{j as e,H as j,L as n,a as N}from"./app-DHCAgeO8.js";import{A as u}from"./AuthenticatedLayout-dBQysIGU.js";import{C as c}from"./chart-column-CBUKGc-4.js";import{P as b}from"./package-DRaxT-da.js";import{T as f}from"./trending-up-BePY73Ko.js";import{C as y}from"./calendar-CHi90Qvn.js";import{S as v}from"./scale-DfpI9z0r.js";import{U as w}from"./users-B-4uzz7n.js";import{P as m}from"./plus-D7_72eyU.js";import{E as _}from"./eye-DLndSbX9.js";import{F as k}from"./file-down-Q0YImJ4Q.js";import{T as F}from"./trash-2-r-OwMlc6.js";import"./ApplicationLogo-Da_2dMoK.js";import"./transition-jgp50ovQ.js";import"./createLucideIcon-DQAdNBRm.js";import"./send-BtT_p_gw.js";function K({reports:a,schoolType:R,sections:r,enrollment:d,availableStock:o,rollStatements:T,statistics:i,riceConfig:t,riceRates:x}){const p=s=>{if(typeof s!="string")return"";const l=document.createElement("textarea");return l.innerHTML=s,l.value.replace(/<[^>]*>/g,"")},h=(s,l)=>{confirm(`Are you sure you want to delete the report for ${l}?`)&&N.delete(`/rice-reports/${s}`,{preserveScroll:!0})},g=(s,l="bw")=>{window.open(`/rice-reports/${s}/generate-pdf?theme=${l}&download=1`,"_blank")};return e.jsxs(u,{header:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h2",{className:"text-xl font-semibold leading-tight text-gray-800",children:"Rice Reports"}),e.jsxs(n,{href:"/rice-reports/create",className:"inline-flex items-center px-4 py-2 bg-indigo-600 border border-transparent rounded-md font-semibold text-xs text-white uppercase tracking-widest hover:bg-indigo-700",children:[e.jsx(m,{className:"w-4 h-4 mr-2"}),"Generate New Report"]})]}),children:[e.jsx(j,{title:"Rice Reports"}),e.jsx("div",{className:"py-6",children:e.jsxs("div",{className:"max-w-7xl mx-auto sm:px-6 lg:px-8 space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[e.jsx("div",{className:"bg-white shadow-sm sm:rounded-lg p-6",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"flex-shrink-0 p-3 bg-blue-100 rounded-lg",children:e.jsx(c,{className:"w-6 h-6 text-blue-600"})}),e.jsxs("div",{className:"ml-4",children:[e.jsx("p",{className:"text-sm font-medium text-gray-500",children:"Total Reports"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:i?.total_reports||0})]})]})}),e.jsx("div",{className:"bg-white shadow-sm sm:rounded-lg p-6",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"flex-shrink-0 p-3 bg-green-100 rounded-lg",children:e.jsx(b,{className:"w-6 h-6 text-green-600"})}),e.jsxs("div",{className:"ml-4",children:[e.jsx("p",{className:"text-sm font-medium text-gray-500",children:"Available Stock"}),e.jsxs("p",{className:"text-2xl font-bold text-green-600",children:[o?.toFixed(2)||"0.00"," kg"]}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Live balance"})]})]})}),e.jsx("div",{className:"bg-white shadow-sm sm:rounded-lg p-6",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"flex-shrink-0 p-3 bg-red-100 rounded-lg",children:e.jsx(f,{className:"w-6 h-6 text-red-600"})}),e.jsxs("div",{className:"ml-4",children:[e.jsx("p",{className:"text-sm font-medium text-gray-500",children:"Total Consumed"}),e.jsxs("p",{className:"text-2xl font-bold text-red-600",children:[i?.total_rice_consumed?.toFixed(2)||"0.00"," kg"]}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"All time"})]})]})}),e.jsx("div",{className:"bg-white shadow-sm sm:rounded-lg p-6",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"flex-shrink-0 p-3 bg-purple-100 rounded-lg",children:e.jsx(y,{className:"w-6 h-6 text-purple-600"})}),e.jsxs("div",{className:"ml-4",children:[e.jsx("p",{className:"text-sm font-medium text-gray-500",children:"Avg Daily"}),e.jsxs("p",{className:"text-2xl font-bold text-purple-600",children:[i?.average_daily_consumption?.toFixed(2)||"0.00"," kg"]}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:i?.latest_period||"No reports"})]})]})})]}),t&&e.jsx("div",{className:"bg-gradient-to-r from-amber-50 to-orange-50 border border-amber-200 rounded-lg p-6",children:e.jsxs("div",{className:"flex items-start",children:[e.jsx(v,{className:"w-8 h-8 text-amber-600 mr-4 flex-shrink-0 mt-1"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Rice Configuration Details (Synced)"}),x&&e.jsxs("div",{className:"mb-4 p-3 bg-white rounded-lg border border-amber-200",children:[e.jsx("h4",{className:"text-sm font-semibold text-gray-700 mb-2",children:"Daily Rice Rates per Student"}),e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[r?.includes("primary")&&e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-gray-600",children:"Primary (I-V)"}),e.jsxs("p",{className:"text-lg font-bold text-blue-700",children:[x.primary?.toFixed(3)||"0.000"," kg"]})]}),r?.includes("middle")&&e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-gray-600",children:"Middle (VI-VIII)"}),e.jsxs("p",{className:"text-lg font-bold text-indigo-700",children:[x.middle?.toFixed(3)||"0.000"," kg"]})]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[r?.includes("primary")&&e.jsxs("div",{className:"p-3 bg-white rounded-lg border border-blue-200",children:[e.jsx("h4",{className:"text-sm font-semibold text-blue-900 mb-2",children:"Primary (KG-5th)"}),e.jsxs("div",{className:"space-y-1 text-xs",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Opening:"}),e.jsxs("span",{className:"font-semibold",children:[t.opening_balance_primary?.toFixed(2)||"0.00"," kg"]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Rice Lifted:"}),e.jsxs("span",{className:"font-semibold text-green-600",children:[t.rice_lifted_primary?.toFixed(2)||"0.00"," kg"]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Rice Arranged:"}),e.jsxs("span",{className:"font-semibold text-amber-600",children:[t.rice_arranged_primary?.toFixed(2)||"0.00"," kg"]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Consumed:"}),e.jsxs("span",{className:"font-semibold text-red-600",children:[t.consumed_primary?.toFixed(2)||"0.00"," kg"]})]}),e.jsxs("div",{className:"flex justify-between pt-1 border-t border-blue-200",children:[e.jsx("span",{className:"text-gray-600 font-medium",children:"Closing:"}),e.jsxs("span",{className:"font-bold text-blue-700",children:[t.closing_balance_primary?.toFixed(2)||"0.00"," kg"]})]})]})]}),r?.includes("middle")&&e.jsxs("div",{className:"p-3 bg-white rounded-lg border border-indigo-200",children:[e.jsx("h4",{className:"text-sm font-semibold text-indigo-900 mb-2",children:"Upper Primary (6th-8th)"}),e.jsxs("div",{className:"space-y-1 text-xs",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Opening:"}),e.jsxs("span",{className:"font-semibold",children:[t.opening_balance_upper_primary?.toFixed(2)||"0.00"," kg"]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Rice Lifted:"}),e.jsxs("span",{className:"font-semibold text-green-600",children:[t.rice_lifted_upper_primary?.toFixed(2)||"0.00"," kg"]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Rice Arranged:"}),e.jsxs("span",{className:"font-semibold text-amber-600",children:[t.rice_arranged_upper_primary?.toFixed(2)||"0.00"," kg"]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Consumed:"}),e.jsxs("span",{className:"font-semibold text-red-600",children:[t.consumed_upper_primary?.toFixed(2)||"0.00"," kg"]})]}),e.jsxs("div",{className:"flex justify-between pt-1 border-t border-indigo-200",children:[e.jsx("span",{className:"text-gray-600 font-medium",children:"Closing:"}),e.jsxs("span",{className:"font-bold text-indigo-700",children:[t.closing_balance_upper_primary?.toFixed(2)||"0.00"," kg"]})]})]})]})]}),e.jsx("div",{className:"mt-4 p-3 bg-gradient-to-r from-purple-100 to-pink-100 rounded-lg border border-purple-300",children:e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-5 gap-3 text-center",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-purple-700",children:"Total Opening"}),e.jsxs("p",{className:"text-sm font-bold text-purple-900",children:[t.total_opening_balance?.toFixed(2)||"0.00"," kg"]})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-purple-700",children:"Total Lifted"}),e.jsxs("p",{className:"text-sm font-bold text-green-700",children:[t.total_rice_lifted?.toFixed(2)||"0.00"," kg"]})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-purple-700",children:"Total Arranged"}),e.jsxs("p",{className:"text-sm font-bold text-amber-700",children:[t.total_rice_arranged?.toFixed(2)||"0.00"," kg"]})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-purple-700",children:"Total Consumed"}),e.jsxs("p",{className:"text-sm font-bold text-red-700",children:[t.total_consumed?.toFixed(2)||"0.00"," kg"]})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-purple-700",children:"Total Closing"}),e.jsxs("p",{className:"text-sm font-bold text-green-700",children:[t.total_closing_balance?.toFixed(2)||"0.00"," kg"]})]})]})}),e.jsxs("p",{className:"text-xs text-amber-700 mt-3 flex items-center",children:[e.jsx("span",{className:"inline-block w-2 h-2 bg-green-500 rounded-full mr-2 animate-pulse"}),"âœ“ All values are synced with live RiceConfiguration data"]})]})]})}),d&&e.jsx("div",{className:"bg-gradient-to-r from-blue-50 to-indigo-50 border border-blue-200 rounded-lg p-6",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx(w,{className:"w-8 h-8 text-blue-600 mr-4"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"Current Enrollment"}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[r?.includes("primary")&&e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Primary (I-V)"}),e.jsx("p",{className:"text-2xl font-bold text-blue-700",children:d.primary||0})]}),r?.includes("middle")&&e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Middle (VI-VIII)"}),e.jsx("p",{className:"text-2xl font-bold text-indigo-700",children:d.middle||0})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Total Students"}),e.jsx("p",{className:"text-2xl font-bold text-purple-700",children:(d.primary||0)+(d.middle||0)})]})]})]})]})}),e.jsx("div",{className:"bg-white shadow-sm sm:rounded-lg",children:e.jsxs("div",{className:"p-6",children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Generated Reports"}),a.data.length===0?e.jsxs("div",{className:"text-center py-12",children:[e.jsx(c,{className:"mx-auto h-12 w-12 text-gray-400"}),e.jsx("h3",{className:"mt-2 text-sm font-medium text-gray-900",children:"No reports yet"}),e.jsx("p",{className:"mt-1 text-sm text-gray-500",children:"Get started by generating your first rice consumption report."}),e.jsx("div",{className:"mt-6",children:e.jsxs(n,{href:"/rice-reports/create",className:"inline-flex items-center px-4 py-2 bg-indigo-600 border border-transparent rounded-md font-semibold text-xs text-white uppercase tracking-widest hover:bg-indigo-700",children:[e.jsx(m,{className:"w-4 h-4 mr-2"}),"Generate Report"]})})]}):e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Period"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Opening Balance"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Consumed"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Closing Balance"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Serving Days"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Generated"}),e.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:a.data.map(s=>e.jsxs("tr",{className:"hover:bg-gray-50",children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsxs("div",{className:"text-sm font-medium text-gray-900",children:[s.month_name," ",s.year]})}),e.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:[s.opening_balance," kg"]}),e.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-red-600 font-medium",children:[s.total_rice_consumed," kg"]}),e.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-green-600 font-medium",children:[s.closing_balance," kg"]}),e.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:[s.total_serving_days," days"]}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:new Date(s.created_at).toLocaleDateString()}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium",children:e.jsxs("div",{className:"flex items-center justify-end gap-2",children:[e.jsx(n,{href:`/rice-reports/${s.id}/view-pdf`,className:"text-indigo-600 hover:text-indigo-900",title:"View PDF",children:e.jsx(_,{className:"w-5 h-5"})}),e.jsx("button",{onClick:()=>g(s.id),className:"text-green-600 hover:text-green-900",title:"Download PDF",children:e.jsx(k,{className:"w-5 h-5"})}),e.jsx("button",{onClick:()=>h(s.id,`${s.month_name} ${s.year}`),className:"text-red-600 hover:text-red-900",title:"Delete",children:e.jsx(F,{className:"w-5 h-5"})})]})})]},s.id))})]})}),a.data.length>0&&a.links&&e.jsxs("div",{className:"mt-4 flex items-center justify-between border-t border-gray-200 pt-4",children:[e.jsxs("div",{className:"text-sm text-gray-700",children:["Showing ",e.jsx("span",{className:"font-medium",children:a.from})," to"," ",e.jsx("span",{className:"font-medium",children:a.to})," of"," ",e.jsx("span",{className:"font-medium",children:a.total})," reports"]}),e.jsx("div",{className:"flex gap-2",children:a.links.map((s,l)=>e.jsx(n,{href:s.url||"#",preserveScroll:!0,className:`px-3 py-2 rounded-md text-sm font-medium ${s.active?"bg-indigo-600 text-white":s.url?"bg-white text-gray-700 hover:bg-gray-50":"bg-gray-100 text-gray-400 cursor-not-allowed"}`,children:p(s.label)},l))})]})]})})]})})]})}export{K as default};
