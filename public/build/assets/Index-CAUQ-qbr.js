import{j as e,H as C,L as b,R as O,a as _}from"./app-Bh0pH66B.js";import{A as k}from"./AuthenticatedLayout-2uiU_Dcg.js";import"./transition-Jr0ULKrL.js";import"./AuthLogo-Q8bw7l9m.js";import"./SupportChatWidget-CQ8YWjxb.js";import"./createLucideIcon-Bmg0wOua.js";function K({auth:i,rollStatements:j,filters:E,schoolInfo:c}){const N=j?.data||[],g=i.user.school_type||"primary",y=N.reduce((t,l)=>{const s=`${l.date}|${l.academic_year}`;return t[s]||(t[s]=[]),t[s].push(l),t},{}),f=t=>{confirm("Are you sure you want to delete this roll statement?")&&_.delete(route("roll-statements.destroy",t))},w=t=>new Date(t).toLocaleDateString("en-IN",{day:"2-digit",month:"short",year:"numeric"}),T={kg:"KG",1:"1st",2:"2nd",3:"3rd",4:"4th",5:"5th",6:"6th",7:"7th",8:"8th",9:"9th",10:"10th",11:"11th",12:"12th"},m=(()=>{switch(g){case"primary":return{all:["kg","1","2","3","4","5"],primary:["kg","1","2","3","4","5"],upperPrimary:[]};case"middle":return{all:["kg","1","2","3","4","5","6","7","8"],primary:["kg","1","2","3","4","5"],upperPrimary:["6","7","8"]};case"secondary":return{all:["6","7","8","9","10"],primary:["6","7","8"],upperPrimary:["9","10"]};case"senior_secondary":return{all:["6","7","8","9","10","11","12"],primary:["6","7","8","9","10"],upperPrimary:["11","12"]};default:return{all:["kg","1","2","3","4","5"],primary:["kg","1","2","3","4","5"],upperPrimary:[]}}})(),h=m.all,v=m.primary,R=m.upperPrimary,L=t=>T[t?.toLowerCase()]||t,A=t=>[...t].sort((l,s)=>{const a=l.class?.toLowerCase(),r=s.class?.toLowerCase();return h.indexOf(a)-h.indexOf(r)}),u=(t,l)=>{const s=t.filter(a=>l.includes(a.class?.toLowerCase()));return{boys:s.reduce((a,r)=>a+(parseInt(r.boys)||0),0),girls:s.reduce((a,r)=>a+(parseInt(r.girls)||0),0),total:s.reduce((a,r)=>a+(parseInt(r.total)||0),0)}},x=(()=>{switch(g){case"primary":return{primary:"PRIMARY TOTAL (KG - 5th)",upperPrimary:null};case"middle":return{primary:"PRIMARY TOTAL (KG - 5th)",upperPrimary:"UPPER PRIMARY TOTAL (6th - 8th)"};case"secondary":return{primary:"LOWER SECONDARY TOTAL (6th - 8th)",upperPrimary:"UPPER SECONDARY TOTAL (9th - 10th)"};case"senior_secondary":return{primary:"SECONDARY TOTAL (6th - 10th)",upperPrimary:"HIGHER SECONDARY TOTAL (11th - 12th)"};default:return{primary:"PRIMARY TOTAL",upperPrimary:null}}})();return e.jsxs(k,{user:i.user,children:[e.jsx(C,{title:"All Roll Statements"}),e.jsx("div",{className:"py-8",children:e.jsxs("div",{className:"max-w-5xl mx-auto px-4 sm:px-6 lg:px-8",children:[e.jsxs("div",{className:"mb-6 flex justify-between items-center",children:[e.jsx("h2",{className:"text-2xl font-semibold text-gray-800",children:"All Roll Statements"}),e.jsxs(b,{href:route("roll-statements.create"),className:"inline-flex items-center gap-2 px-6 py-3 bg-blue-600 hover:bg-blue-700 text-white font-semibold rounded-lg shadow-lg transition-colors",children:[e.jsx("i",{className:"fas fa-plus-circle"}),"Create Roll Statement"]})]}),Object.keys(y).length===0?e.jsxs("div",{className:"bg-white rounded-lg shadow-lg p-12 text-center",children:[e.jsx("div",{className:"text-gray-400 mb-4",children:e.jsx("svg",{className:"mx-auto h-24 w-24 text-gray-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})})}),e.jsx("p",{className:"text-xl text-gray-600 font-semibold",children:"No Roll Statements Found"}),e.jsx("p",{className:"text-gray-500 mt-2",children:"Create your first roll statement to get started."}),e.jsxs(b,{href:route("roll-statements.create"),className:"inline-flex items-center gap-2 mt-6 px-6 py-3 bg-blue-600 hover:bg-blue-700 text-white font-semibold rounded-lg shadow-lg transition-colors",children:[e.jsx("i",{className:"fas fa-plus-circle"}),"Create Roll Statement"]})]}):e.jsx(e.Fragment,{children:Object.entries(y).map(([t,l])=>{const[s,a]=t.split("|"),r=A(l),d=u(r,v),o=u(r,R),p={boys:d.boys+o.boys,girls:d.girls+o.girls,total:d.total+o.total},S=r[0]?.id;return e.jsxs("div",{className:"bg-white rounded-lg shadow-2xl mb-12 overflow-hidden border-4 border-gray-800",style:{aspectRatio:"210/297"},children:[e.jsx("div",{className:"h-3 bg-gradient-to-r from-blue-600 via-purple-600 to-blue-600"}),e.jsxs("div",{className:"px-8 py-6 border-b-4 border-double border-gray-800",children:[e.jsxs("div",{className:"text-center mb-4",children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-2 tracking-wide",children:"INSTITUTE ROLL STATEMENT"}),e.jsx("div",{className:"h-1 w-32 bg-gradient-to-r from-blue-600 to-purple-600 mx-auto rounded-full"})]}),e.jsxs("div",{className:"grid grid-cols-3 gap-4 text-center mb-4",children:[e.jsxs("div",{className:"border-2 border-gray-300 rounded-lg p-2",children:[e.jsx("p",{className:"text-xs text-gray-600 font-semibold",children:"STATE"}),e.jsx("p",{className:"text-sm font-bold text-gray-900",children:c?.state||"J&K"})]}),e.jsxs("div",{className:"border-2 border-gray-300 rounded-lg p-2",children:[e.jsx("p",{className:"text-xs text-gray-600 font-semibold",children:"DISTRICT"}),e.jsx("p",{className:"text-sm font-bold text-gray-900",children:c?.district||"Not Set"})]}),e.jsxs("div",{className:"border-2 border-gray-300 rounded-lg p-2",children:[e.jsx("p",{className:"text-xs text-gray-600 font-semibold",children:"ZONE"}),e.jsx("p",{className:"text-sm font-bold text-gray-900",children:c?.zone||"Not Set"})]})]}),e.jsxs("div",{className:"border-2 border-gray-300 rounded-lg p-3 bg-gray-50",children:[e.jsx("p",{className:"text-lg font-bold text-center text-gray-900",children:c?.school_name||i.user.school_name}),e.jsxs("p",{className:"text-xs text-center text-gray-600 mt-1",children:["UDISE: ",e.jsx("span",{className:"font-bold",children:c?.udise_code||i.user.udise})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4 mt-3 text-sm",children:[e.jsxs("div",{className:"text-left",children:[e.jsx("span",{className:"font-semibold text-gray-700",children:"Academic Year:"}),e.jsx("span",{className:"font-bold text-gray-900 ml-2",children:a})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("span",{className:"font-semibold text-gray-700",children:"Date:"}),e.jsx("span",{className:"font-bold text-gray-900 ml-2",children:w(s)})]})]}),r[0]?.last_updated_at&&e.jsxs("div",{className:"mt-2 text-xs text-gray-500 text-center border-t border-gray-200 pt-2",children:[e.jsx("i",{className:"fas fa-clock mr-1"}),"Last Updated: ",r[0].last_updated_at,r[0].updated_by_name&&` by ${r[0].updated_by_name}`]})]}),e.jsx("div",{className:"px-8 py-6",children:e.jsxs("table",{className:"w-full border-2 border-gray-800",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"bg-gray-800 text-white",children:[e.jsx("th",{className:"border-2 border-gray-700 px-3 py-2 text-sm font-bold text-left w-16",children:"S.No"}),e.jsx("th",{className:"border-2 border-gray-700 px-3 py-2 text-sm font-bold text-left",children:"Class"}),e.jsx("th",{className:"border-2 border-gray-700 px-3 py-2 text-sm font-bold text-center w-24",children:"Boys"}),e.jsx("th",{className:"border-2 border-gray-700 px-3 py-2 text-sm font-bold text-center w-24",children:"Girls"}),e.jsx("th",{className:"border-2 border-gray-700 px-3 py-2 text-sm font-bold text-center w-24",children:"Total"})]})}),e.jsxs("tbody",{children:[r.map((n,P)=>e.jsxs(O.Fragment,{children:[e.jsxs("tr",{className:"hover:bg-gray-50",children:[e.jsx("td",{className:"border-2 border-gray-300 px-3 py-2 text-sm text-center",children:P+1}),e.jsx("td",{className:"border-2 border-gray-300 px-3 py-2 text-sm font-semibold",children:L(n.class)}),e.jsx("td",{className:"border-2 border-gray-300 px-3 py-2 text-sm text-center",children:n.boys}),e.jsx("td",{className:"border-2 border-gray-300 px-3 py-2 text-sm text-center",children:n.girls}),e.jsx("td",{className:"border-2 border-gray-300 px-3 py-2 text-sm text-center font-bold",children:n.total})]}),n.class?.toLowerCase()==="5"&&x.primary&&e.jsxs("tr",{className:"bg-blue-100",children:[e.jsxs("td",{colSpan:"2",className:"border-2 border-gray-400 px-3 py-2 text-sm font-bold text-right",children:[x.primary,":"]}),e.jsx("td",{className:"border-2 border-gray-400 px-3 py-2 text-sm font-bold text-center",children:d.boys}),e.jsx("td",{className:"border-2 border-gray-400 px-3 py-2 text-sm font-bold text-center",children:d.girls}),e.jsx("td",{className:"border-2 border-gray-400 px-3 py-2 text-sm font-bold text-center",children:d.total})]})]},n.id)),o.total>0&&x.upperPrimary&&e.jsxs("tr",{className:"bg-green-100",children:[e.jsxs("td",{colSpan:"2",className:"border-2 border-gray-400 px-3 py-2 text-sm font-bold text-right",children:[x.upperPrimary,":"]}),e.jsx("td",{className:"border-2 border-gray-400 px-3 py-2 text-sm font-bold text-center",children:o.boys}),e.jsx("td",{className:"border-2 border-gray-400 px-3 py-2 text-sm font-bold text-center",children:o.girls}),e.jsx("td",{className:"border-2 border-gray-400 px-3 py-2 text-sm font-bold text-center",children:o.total})]}),e.jsxs("tr",{className:"bg-gradient-to-r from-purple-200 via-purple-300 to-purple-200",children:[e.jsx("td",{colSpan:"2",className:"border-4 border-gray-600 px-3 py-3 text-base font-extrabold text-right text-gray-900",children:"GRAND TOTAL:"}),e.jsx("td",{className:"border-4 border-gray-600 px-3 py-3 text-base font-extrabold text-center text-gray-900",children:p.boys}),e.jsx("td",{className:"border-4 border-gray-600 px-3 py-3 text-base font-extrabold text-center text-gray-900",children:p.girls}),e.jsx("td",{className:"border-4 border-gray-600 px-3 py-3 text-base font-extrabold text-center text-gray-900",children:p.total})]})]})]})}),e.jsx("div",{className:"px-8 pb-6",children:e.jsxs("div",{className:"flex justify-center gap-3 pt-4 border-t-2 border-gray-200",children:[e.jsxs(b,{href:route("roll-statements.create"),className:"inline-flex items-center gap-2 px-4 py-2 bg-green-600 hover:bg-green-700 text-white text-sm font-semibold rounded-lg shadow-md transition-colors",children:[e.jsx("i",{className:"fas fa-edit"}),"Edit"]}),e.jsxs("a",{href:route("roll-statements.print",{date:s,academic_year:a}),className:"inline-flex items-center gap-2 px-4 py-2 bg-red-600 hover:bg-red-700 text-white text-sm font-semibold rounded-lg shadow-md transition-colors",target:"_blank",children:[e.jsx("i",{className:"fas fa-file-pdf"}),"Download PDF"]}),e.jsxs("button",{onClick:()=>f(S),className:"inline-flex items-center gap-2 px-4 py-2 bg-orange-600 hover:bg-orange-700 text-white text-sm font-semibold rounded-lg shadow-md transition-colors",children:[e.jsx("i",{className:"fas fa-trash"}),"Delete"]})]})}),e.jsx("div",{className:"h-3 bg-gradient-to-r from-blue-600 via-purple-600 to-blue-600"})]},t)})})]})})]})}export{K as default};
