import{j as o}from"./app-CSPInevx.js";import{u as b}from"./ThemeContext-C1bmRLCA.js";import{y as D,z as v}from"./CategoricalChart-Dhv_fpLi.js";import{A as N,a as M}from"./AreaChart-BSexz3o9.js";import{L as O,a as W}from"./LineChart-Dk5IiA2G.js";import{C as w,X as B,Y as _}from"./CartesianChart-BKJweIOX.js";import{L}from"./Legend-AGNwSfjT.js";import"./clsx-B-dksMZM.js";import"./index-BV1_LFfs.js";import"./with-selector-8Zs4ZpQl.js";import"./ActivePoints-DheLDx6u.js";import"./ReactUtils-CnFCdVAr.js";import"./getRadiusAndStrokeWidthFromDot-Bf65Fbw4.js";import"./ErrorBarContext-DC5chhuA.js";const q=({data:f=[],schoolType:d="both",dateFormat:c="DD/MM",useAreaChart:p=!1})=>{const{theme:x}=b(),r=x==="dark",t={text:r?"#9ca3af":"#374151",grid:r?"#374151":"#e5e7eb",tooltipBg:r?"#1f2937":"#ffffff",tooltipBorder:r?"#374151":"#e5e7eb",tooltipText:r?"#f3f4f6":"#111827",opening:"#3b82f6",closing:"#10b981",primary:"#06b6d4",middle:"#d946ef"},h=e=>{if(!e)return"";const s=new Date(e),a=s.getDate().toString().padStart(2,"0"),i=(s.getMonth()+1).toString().padStart(2,"0");return c==="DD/MM"?`${a}/${i}`:c==="DD MMM"?`${a} ${["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"][s.getMonth()]}`:e},n=f.map(e=>({...e,displayDate:h(e.date),opening:parseFloat(e.opening)||0,consumed:parseFloat(e.consumed)||0,closing:parseFloat(e.closing)||0,primary_consumed:parseFloat(e.primary_consumed)||0,middle_consumed:parseFloat(e.middle_consumed)||0})),y=d==="primary"||d==="middle",g=d==="middle",u=({active:e,payload:s,label:a})=>e&&s&&s.length?o.jsxs("div",{className:"p-4 rounded-lg shadow-xl border-2",style:{backgroundColor:t.tooltipBg,borderColor:t.tooltipBorder},children:[o.jsxs("p",{className:"font-bold mb-3 pb-2 border-b",style:{color:t.tooltipText,borderColor:t.tooltipBorder},children:["ðŸ“… ",a]}),o.jsx("div",{className:"space-y-1.5",children:s.map((i,m)=>o.jsxs("div",{className:"flex items-center justify-between gap-6 text-sm",children:[o.jsxs("span",{className:"flex items-center gap-2",children:[o.jsx("span",{className:"w-3 h-3 rounded-full shadow-sm",style:{backgroundColor:i.color}}),o.jsxs("span",{className:"font-medium",style:{color:r?"#d1d5db":"#374151"},children:[i.name,":"]})]}),o.jsxs("span",{className:"font-bold",style:{color:t.tooltipText},children:[i.value.toFixed(2)," kg"]})]},m))})]}):null,j=({payload:e})=>o.jsx("div",{className:"flex flex-wrap items-center justify-center gap-4 mt-6 pb-2",children:e.map((s,a)=>o.jsxs("div",{className:"flex items-center gap-2 px-3 py-1.5 rounded-full",style:{backgroundColor:r?"#374151":"#f9fafb"},children:[o.jsx("span",{className:"w-3 h-3 rounded-full",style:{backgroundColor:s.color}}),o.jsx("span",{className:"text-sm font-medium",style:{color:r?"#e5e7eb":"#374151"},children:s.value})]},a))});if(!n||n.length===0)return null;const k={data:n,margin:{top:10,right:30,left:20,bottom:60}},C=p?N:O,l=p?M:W;return o.jsx(D,{width:"100%",height:"100%",children:o.jsxs(C,{...k,children:[o.jsxs("defs",{children:[o.jsxs("linearGradient",{id:"colorOpening",x1:"0",y1:"0",x2:"0",y2:"1",children:[o.jsx("stop",{offset:"5%",stopColor:t.opening,stopOpacity:.3}),o.jsx("stop",{offset:"95%",stopColor:t.opening,stopOpacity:0})]}),o.jsxs("linearGradient",{id:"colorClosing",x1:"0",y1:"0",x2:"0",y2:"1",children:[o.jsx("stop",{offset:"5%",stopColor:t.closing,stopOpacity:.3}),o.jsx("stop",{offset:"95%",stopColor:t.closing,stopOpacity:0})]}),o.jsxs("linearGradient",{id:"colorPrimary",x1:"0",y1:"0",x2:"0",y2:"1",children:[o.jsx("stop",{offset:"5%",stopColor:t.primary,stopOpacity:.3}),o.jsx("stop",{offset:"95%",stopColor:t.primary,stopOpacity:0})]}),o.jsxs("linearGradient",{id:"colorMiddle",x1:"0",y1:"0",x2:"0",y2:"1",children:[o.jsx("stop",{offset:"5%",stopColor:t.middle,stopOpacity:.3}),o.jsx("stop",{offset:"95%",stopColor:t.middle,stopOpacity:0})]})]}),o.jsx(w,{strokeDasharray:"3 3",stroke:t.grid,vertical:!1}),o.jsx(B,{dataKey:"displayDate",stroke:t.text,style:{fontSize:"12px",fontWeight:"500"},angle:-45,textAnchor:"end",height:80,tick:{fill:t.text}}),o.jsx(_,{stroke:t.text,style:{fontSize:"12px",fontWeight:"500"},tick:{fill:t.text},label:{value:"Rice Stock (kg)",angle:-90,position:"insideLeft",style:{fontSize:"13px",fill:t.text,fontWeight:"600"}}}),o.jsx(v,{content:o.jsx(u,{})}),o.jsx(L,{content:o.jsx(j,{})}),o.jsx(l,{type:"monotone",dataKey:"opening",stroke:t.opening,fill:"none",strokeWidth:2,strokeDasharray:"5 5",name:"Opening Balance",dot:{fill:t.opening,r:4},activeDot:{r:6}}),y&&n[0]?.primary_consumed!==void 0&&o.jsx(l,{type:"monotone",dataKey:"primary_consumed",stroke:t.primary,fill:"none",strokeWidth:2,strokeDasharray:"3 3",name:"Primary Consumed",dot:!1,activeDot:{r:4}}),g&&n[0]?.middle_consumed!==void 0&&o.jsx(l,{type:"monotone",dataKey:"middle_consumed",stroke:t.middle,fill:"none",strokeWidth:2,strokeDasharray:"3 3",name:"Middle Consumed",dot:!1,activeDot:{r:4}}),o.jsx(l,{type:"monotone",dataKey:"closing",stroke:t.closing,fill:p?"url(#colorClosing)":void 0,strokeWidth:3,name:"Closing Balance",dot:{fill:t.closing,strokeWidth:2,r:4,stroke:"#fff"},activeDot:{r:6,strokeWidth:2}})]})})};export{q as default};
