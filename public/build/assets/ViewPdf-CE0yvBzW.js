import{r as d,j as e,H as k,a as o}from"./app-DHCAgeO8.js";import{A as _}from"./AuthenticatedLayout-dBQysIGU.js";import{C}from"./circle-alert-CTSCcRL4.js";import{P as S}from"./package-DRaxT-da.js";import{T as R}from"./trending-up-BePY73Ko.js";import{C as T}from"./calendar-CHi90Qvn.js";import{E as x}from"./eye-DLndSbX9.js";import{c as h}from"./createLucideIcon-DQAdNBRm.js";import{R as P}from"./refresh-cw-CDdiVQQp.js";import{F as D}from"./file-down-Q0YImJ4Q.js";import"./ApplicationLogo-Da_2dMoK.js";import"./transition-jgp50ovQ.js";import"./send-BtT_p_gw.js";/**
 * @license lucide-react v0.552.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $=[["path",{d:"M7 16.3c2.2 0 4-1.83 4-4.05 0-1.16-.57-2.26-1.71-3.19S7.29 6.75 7 5.3c-.29 1.45-1.14 2.84-2.29 3.76S3 11.1 3 12.25c0 2.22 1.8 4.05 4 4.05z",key:"1ptgy4"}],["path",{d:"M12.56 6.6A10.97 10.97 0 0 0 14 3.02c.5 2.5 2 4.9 4 6.5s3 3.5 3 5.5a6.98 6.98 0 0 1-11.91 4.97",key:"1sl1rz"}]],A=h("droplets",$);/**
 * @license lucide-react v0.552.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const F=[["path",{d:"M12 22a1 1 0 0 1 0-20 10 9 0 0 1 10 9 5 5 0 0 1-5 5h-2.25a1.75 1.75 0 0 0-1.4 2.8l.3.4a1.75 1.75 0 0 1-1.4 2.8z",key:"e79jfc"}],["circle",{cx:"13.5",cy:"6.5",r:".5",fill:"currentColor",key:"1okk4w"}],["circle",{cx:"17.5",cy:"10.5",r:".5",fill:"currentColor",key:"f64h9f"}],["circle",{cx:"6.5",cy:"12.5",r:".5",fill:"currentColor",key:"qy21gx"}],["circle",{cx:"8.5",cy:"7.5",r:".5",fill:"currentColor",key:"fotxhn"}]],U=h("palette",F);function X({report:s,allReports:g,schoolType:I,schoolInfo:L,currentAvailableStock:p,statistics:l}){const[a,j]=d.useState("bw"),[i,y]=d.useState(s.id),[r,c]=d.useState(!1),b=`/rice-reports/${i}/generate-pdf?theme=${a}&preview=1`,n=[{id:"bw",name:"Black & White",color:"bg-gray-700",preview:"Professional"},{id:"blue",name:"Blue Theme",color:"bg-blue-600",preview:"Classic"},{id:"green",name:"Green Theme",color:"bg-green-600",preview:"Fresh"},{id:"purple",name:"Purple Theme",color:"bg-purple-600",preview:"Modern"}],u=t=>j(t),f=t=>{const m=t.target.value;y(m),o.visit(`/rice-reports/${m}/view-pdf`,{preserveScroll:!0})},N=()=>{const t=`/rice-reports/${i}/generate-pdf?theme=${a}&download=1`;window.open(t,"_blank")},w=()=>{window.open(b,"_blank")},v=()=>{confirm("Are you sure you want to regenerate this report? This will recalculate all data.")&&(c(!0),o.post(`/rice-reports/${i}/regenerate`,{},{onFinish:()=>c(!1)}))};return e.jsxs(_,{header:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("h2",{className:"text-xl font-semibold leading-tight text-gray-800",children:["Rice Report - ",s.period]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs("button",{onClick:v,disabled:r,className:"inline-flex items-center px-4 py-2 bg-yellow-600 border border-transparent rounded-md font-semibold text-xs text-white uppercase tracking-widest hover:bg-yellow-700 disabled:opacity-50",children:[e.jsx(P,{className:`w-4 h-4 mr-2 ${r?"animate-spin":""}`}),"Regenerate"]}),e.jsxs("button",{onClick:N,className:"inline-flex items-center px-4 py-2 bg-green-600 border border-transparent rounded-md font-semibold text-xs text-white uppercase tracking-widest hover:bg-green-700",children:[e.jsx(D,{className:"w-4 h-4 mr-2"}),"Download PDF"]})]})]}),children:[e.jsx(k,{title:`Rice Report - ${s.period}`}),e.jsx("div",{className:"py-6",children:e.jsxs("div",{className:"max-w-7xl mx-auto sm:px-6 lg:px-8 space-y-6",children:[l&&e.jsxs("div",{className:"bg-gradient-to-r from-indigo-500 to-purple-600 rounded-lg p-6 text-white",children:[e.jsxs("div",{className:"flex items-center mb-4",children:[e.jsx(C,{className:"w-5 h-5 mr-2"}),e.jsx("p",{className:"text-sm font-medium",children:"Live System Statistics (Real-time Data)"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx(S,{className:"w-8 h-8 mr-3 opacity-80"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm opacity-90",children:"Current Available Stock"}),e.jsxs("p",{className:"text-2xl font-bold",children:[p?.toFixed(2)||"0.00"," kg"]}),e.jsx("p",{className:"text-xs opacity-75 mt-1",children:"Live closing balance"})]})]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx(R,{className:"w-8 h-8 mr-3 opacity-80"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm opacity-90",children:"Total Consumed (All Time)"}),e.jsxs("p",{className:"text-2xl font-bold",children:[l.total_rice_consumed?.toFixed(2)||"0.00"," kg"]}),e.jsx("p",{className:"text-xs opacity-75 mt-1",children:"Calculated from daily records"})]})]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx(T,{className:"w-8 h-8 mr-3 opacity-80"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm opacity-90",children:"Average Daily Consumption"}),e.jsxs("p",{className:"text-2xl font-bold",children:[l.average_daily_consumption?.toFixed(2)||"0.00"," kg"]}),e.jsx("p",{className:"text-xs opacity-75 mt-1",children:"All-time average per day"})]})]})]})]}),e.jsx("div",{className:"bg-white shadow-sm sm:rounded-lg p-6",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:[e.jsx(x,{className:"w-4 h-4 inline mr-2"}),"Select Report"]}),e.jsx("select",{value:i,onChange:f,className:"w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500",children:g.map(t=>e.jsx("option",{value:t.id,children:t.label},t.id))})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:[e.jsx(U,{className:"w-4 h-4 inline mr-2"}),"Select Theme"]}),e.jsx("div",{className:"grid grid-cols-4 gap-2",children:n.map(t=>e.jsxs("button",{onClick:()=>u(t.id),className:`p-3 rounded-lg border-2 transition-all ${a===t.id?"border-indigo-600 shadow-md":"border-gray-200 hover:border-gray-300"}`,children:[e.jsx("div",{className:`w-full h-8 rounded ${t.color} mb-2`}),e.jsx("p",{className:"text-xs font-medium text-gray-700",children:t.name}),e.jsx("p",{className:"text-xs text-gray-500",children:t.preview})]},t.id))})]})]})}),e.jsxs("div",{className:"bg-white shadow-sm sm:rounded-lg p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"PDF Preview"}),e.jsxs("span",{className:"text-sm text-indigo-600 font-medium",children:["Theme: ",n.find(t=>t.id===a)?.name]})]}),e.jsxs("div",{className:"border-2 border-dashed border-indigo-200 rounded-lg p-8 text-center",children:[e.jsx("p",{className:"text-sm text-gray-600 mb-4",children:"Use the buttons above to pick a theme, then click below to open the live preview in a new browser tab."}),e.jsxs("button",{type:"button",onClick:w,className:"inline-flex items-center px-5 py-2.5 bg-indigo-600 text-white rounded-md hover:bg-indigo-700",children:[e.jsx(x,{className:"w-5 h-5 mr-2"}),"Preview PDF"]}),e.jsx("p",{className:"text-xs text-gray-500 mt-3",children:"The preview reflects your latest theme selection instantly."})]})]}),e.jsxs("div",{className:"bg-white shadow-sm sm:rounded-lg p-6",children:[e.jsxs("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:["Section-wise Summary for ",s.period]}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Section"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Students"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Rice Consumed (kg)"})]})}),e.jsxs("tbody",{className:"bg-white divide-y divide-gray-200",children:[e.jsxs("tr",{children:[e.jsx("td",{className:"px-6 py-4 text-sm font-medium text-gray-900",children:"Primary (Class 1-5)"}),e.jsx("td",{className:"px-6 py-4 text-sm text-gray-500",children:s.totals_by_section?.primary?.students||0}),e.jsx("td",{className:"px-6 py-4 text-sm text-gray-500",children:s.totals_by_section?.primary?.formatted_rice||"0.00 kg"})]}),e.jsxs("tr",{children:[e.jsx("td",{className:"px-6 py-4 text-sm font-medium text-gray-900",children:"Middle (Class 6-8)"}),e.jsx("td",{className:"px-6 py-4 text-sm text-gray-500",children:s.totals_by_section?.middle?.students||0}),e.jsx("td",{className:"px-6 py-4 text-sm text-gray-500",children:s.totals_by_section?.middle?.formatted_rice||"0.00 kg"})]}),e.jsxs("tr",{className:"bg-gray-50",children:[e.jsx("td",{className:"px-6 py-4 text-sm font-bold text-gray-900",children:"Grand Total"}),e.jsx("td",{className:"px-6 py-4 text-sm font-bold text-gray-900",children:s.totals_by_section?.grand_total?.students||0}),e.jsx("td",{className:"px-6 py-4 text-sm font-bold text-gray-900",children:s.totals_by_section?.grand_total?.formatted_rice||"0.00 kg"})]})]})]})})]}),e.jsxs("div",{className:"bg-white shadow-sm sm:rounded-lg p-6",children:[e.jsxs("h3",{className:"text-lg font-medium text-gray-900 mb-4 flex items-center",children:[e.jsx(A,{className:"w-5 h-5 mr-2 text-indigo-600"}),"Salt & Condiment Breakdown"]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"text-md font-semibold text-gray-800 mb-3",children:"Primary (Class 1–5)"}),e.jsxs("div",{className:"space-y-2 text-sm",children:[e.jsxs("div",{className:"flex justify-between border-b pb-1",children:[e.jsx("span",{children:"Salt Used:"}),e.jsx("span",{children:s.breakdown?.salt?.primary||"0.00 kg"})]}),e.jsxs("div",{className:"flex justify-between border-b pb-1",children:[e.jsx("span",{children:"Condiments Used:"}),e.jsx("span",{children:s.breakdown?.condiment?.primary||"0.00 kg"})]})]})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-md font-semibold text-gray-800 mb-3",children:"Middle (Class 6–8)"}),e.jsxs("div",{className:"space-y-2 text-sm",children:[e.jsxs("div",{className:"flex justify-between border-b pb-1",children:[e.jsx("span",{children:"Salt Used:"}),e.jsx("span",{children:s.breakdown?.salt?.middle||"0.00 kg"})]}),e.jsxs("div",{className:"flex justify-between border-b pb-1",children:[e.jsx("span",{children:"Condiments Used:"}),e.jsx("span",{children:s.breakdown?.condiment?.middle||"0.00 kg"})]})]})]})]})]}),e.jsxs("div",{className:"bg-white shadow-sm sm:rounded-lg p-6",children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Report Information"}),e.jsxs("dl",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("dt",{className:"text-sm font-medium text-gray-500",children:"Report Period"}),e.jsx("dd",{className:"mt-1 text-sm text-gray-900",children:s.period})]}),e.jsxs("div",{children:[e.jsx("dt",{className:"text-sm font-medium text-gray-500",children:"School Type"}),e.jsx("dd",{className:"mt-1 text-sm text-gray-900 capitalize",children:s.school_type})]}),e.jsxs("div",{children:[e.jsx("dt",{className:"text-sm font-medium text-gray-500",children:"Opening Balance"}),e.jsxs("dd",{className:"mt-1 text-sm text-gray-900",children:[s.opening_balance," kg"]})]}),e.jsxs("div",{children:[e.jsx("dt",{className:"text-sm font-medium text-gray-500",children:"Closing Balance"}),e.jsxs("dd",{className:"mt-1 text-sm text-gray-900",children:[s.closing_balance," kg"]})]}),e.jsxs("div",{children:[e.jsx("dt",{className:"text-sm font-medium text-gray-500",children:"Total Rice Consumed"}),e.jsxs("dd",{className:"mt-1 text-sm text-gray-900",children:[s.total_rice_consumed," kg"]})]}),e.jsxs("div",{children:[e.jsx("dt",{className:"text-sm font-medium text-gray-500",children:"Serving Days"}),e.jsxs("dd",{className:"mt-1 text-sm text-gray-900",children:[s.total_serving_days," days"]})]}),e.jsxs("div",{children:[e.jsx("dt",{className:"text-sm font-medium text-gray-500",children:"Average Daily Consumption"}),e.jsxs("dd",{className:"mt-1 text-sm text-gray-900",children:[s.average_daily_consumption," kg"]})]}),e.jsxs("div",{children:[e.jsx("dt",{className:"text-sm font-medium text-gray-500",children:"Generated On"}),e.jsx("dd",{className:"mt-1 text-sm text-gray-900",children:new Date(s.created_at).toLocaleString()})]})]})]})]})})]})}export{X as default};
