import{j as e,H as C,L as b,R as O,a as k}from"./app-DIoTV-Eu.js";import{A as E}from"./AuthenticatedLayout-A_fvqcBE.js";import"./transition-BmP7I9Uj.js";import"./AuthLogo-HkxrrMy2.js";import"./SupportChatWidget-C_aUtOX2.js";import"./createLucideIcon-Uben-nn_.js";function U({auth:c,rollStatements:j,filters:D,schoolInfo:i}){const N=j?.data||[],g=c.user.school_type||"primary",h=N.reduce((r,l)=>{const t=`${l.date}|${l.academic_year}`;return r[t]||(r[t]=[]),r[t].push(l),r},{}),f=r=>{confirm("Are you sure you want to delete this roll statement?")&&k.delete(route("roll-statements.destroy",r))},w=r=>new Date(r).toLocaleDateString("en-IN",{day:"2-digit",month:"short",year:"numeric"}),T={kg:"KG",1:"1st",2:"2nd",3:"3rd",4:"4th",5:"5th",6:"6th",7:"7th",8:"8th",9:"9th",10:"10th",11:"11th",12:"12th"},m=(()=>{switch(g){case"primary":return{all:["kg","1","2","3","4","5"],primary:["kg","1","2","3","4","5"],upperPrimary:[]};case"middle":return{all:["kg","1","2","3","4","5","6","7","8"],primary:["kg","1","2","3","4","5"],upperPrimary:["6","7","8"]};case"secondary":return{all:["6","7","8","9","10"],primary:["6","7","8"],upperPrimary:["9","10"]};case"senior_secondary":return{all:["6","7","8","9","10","11","12"],primary:["6","7","8","9","10"],upperPrimary:["11","12"]};default:return{all:["kg","1","2","3","4","5"],primary:["kg","1","2","3","4","5"],upperPrimary:[]}}})(),y=m.all,v=m.primary,R=m.upperPrimary,L=r=>T[r?.toLowerCase()]||r,A=r=>[...r].sort((l,t)=>{const s=l.class?.toLowerCase(),a=t.class?.toLowerCase();return y.indexOf(s)-y.indexOf(a)}),u=(r,l)=>{const t=r.filter(s=>l.includes(s.class?.toLowerCase()));return{boys:t.reduce((s,a)=>s+(parseInt(a.boys)||0),0),girls:t.reduce((s,a)=>s+(parseInt(a.girls)||0),0),total:t.reduce((s,a)=>s+(parseInt(a.total)||0),0)}},x=(()=>{switch(g){case"primary":return{primary:"PRIMARY TOTAL (KG - 5th)",upperPrimary:null};case"middle":return{primary:"PRIMARY TOTAL (KG - 5th)",upperPrimary:"UPPER PRIMARY TOTAL (6th - 8th)"};case"secondary":return{primary:"LOWER SECONDARY TOTAL (6th - 8th)",upperPrimary:"UPPER SECONDARY TOTAL (9th - 10th)"};case"senior_secondary":return{primary:"SECONDARY TOTAL (6th - 10th)",upperPrimary:"HIGHER SECONDARY TOTAL (11th - 12th)"};default:return{primary:"PRIMARY TOTAL",upperPrimary:null}}})();return e.jsxs(E,{user:c.user,children:[e.jsx(C,{title:"All Roll Statements"}),e.jsx("div",{className:"py-8",children:e.jsxs("div",{className:"max-w-5xl mx-auto px-4 sm:px-6 lg:px-8",children:[e.jsxs("div",{className:"mb-6 flex justify-between items-center",children:[e.jsx("h2",{className:"text-2xl font-semibold text-gray-800",children:"All Roll Statements"}),e.jsxs(b,{href:route("roll-statements.create"),className:"inline-flex items-center gap-2 px-6 py-3 bg-blue-600 hover:bg-blue-700 text-white font-semibold rounded-lg shadow-lg transition-colors",children:[e.jsx("i",{className:"fas fa-plus-circle"}),"Create Roll Statement"]})]}),Object.keys(h).length===0?e.jsxs("div",{className:"bg-white rounded-lg shadow-lg p-12 text-center",children:[e.jsx("div",{className:"text-gray-400 mb-4",children:e.jsx("svg",{className:"mx-auto h-24 w-24 text-gray-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})})}),e.jsx("p",{className:"text-xl text-gray-600 font-semibold",children:"No Roll Statements Found"}),e.jsx("p",{className:"text-gray-500 mt-2",children:"Create your first roll statement to get started."}),e.jsxs(b,{href:route("roll-statements.create"),className:"inline-flex items-center gap-2 mt-6 px-6 py-3 bg-blue-600 hover:bg-blue-700 text-white font-semibold rounded-lg shadow-lg transition-colors",children:[e.jsx("i",{className:"fas fa-plus-circle"}),"Create Roll Statement"]})]}):e.jsx(e.Fragment,{children:Object.entries(h).map(([r,l])=>{const[t,s]=r.split("|"),a=A(l),d=u(a,v),o=u(a,R),p={boys:d.boys+o.boys,girls:d.girls+o.girls,total:d.total+o.total},S=a[0]?.id;return e.jsxs("div",{className:"bg-white rounded-lg shadow-2xl mb-12 overflow-hidden border-4 border-gray-800",style:{aspectRatio:"210/297"},children:[e.jsx("div",{className:"h-3 bg-gradient-to-r from-blue-600 via-purple-600 to-blue-600"}),e.jsxs("div",{className:"px-8 py-6 border-b-4 border-double border-gray-800",children:[e.jsxs("div",{className:"text-center mb-4",children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-2 tracking-wide",children:"INSTITUTE ROLL STATEMENT"}),e.jsx("div",{className:"h-1 w-32 bg-gradient-to-r from-blue-600 to-purple-600 mx-auto rounded-full"})]}),e.jsxs("div",{className:"grid grid-cols-3 gap-4 text-center mb-4",children:[e.jsxs("div",{className:"border-2 border-gray-300 rounded-lg p-2",children:[e.jsx("p",{className:"text-xs text-gray-600 font-semibold",children:"STATE"}),e.jsx("p",{className:"text-sm font-bold text-gray-900",children:i?.state||"J&K"})]}),e.jsxs("div",{className:"border-2 border-gray-300 rounded-lg p-2",children:[e.jsx("p",{className:"text-xs text-gray-600 font-semibold",children:"DISTRICT"}),e.jsx("p",{className:"text-sm font-bold text-gray-900",children:i?.district||"Not Set"})]}),e.jsxs("div",{className:"border-2 border-gray-300 rounded-lg p-2",children:[e.jsx("p",{className:"text-xs text-gray-600 font-semibold",children:"ZONE"}),e.jsx("p",{className:"text-sm font-bold text-gray-900",children:i?.zone||"Not Set"})]})]}),e.jsxs("div",{className:"border-2 border-gray-300 rounded-lg p-3 bg-gray-50",children:[e.jsx("p",{className:"text-lg font-bold text-center text-gray-900",children:i?.school_name||c.user.school_name}),e.jsxs("p",{className:"text-xs text-center text-gray-600 mt-1",children:["UDISE: ",e.jsx("span",{className:"font-bold",children:i?.udise_code||c.user.udise})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4 mt-3 text-sm",children:[e.jsxs("div",{className:"text-left",children:[e.jsx("span",{className:"font-semibold text-gray-700",children:"Academic Year:"}),e.jsx("span",{className:"font-bold text-gray-900 ml-2",children:s})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("span",{className:"font-semibold text-gray-700",children:"Date:"}),e.jsx("span",{className:"font-bold text-gray-900 ml-2",children:w(t)})]})]})]}),e.jsx("div",{className:"px-8 py-6",children:e.jsxs("table",{className:"w-full border-2 border-gray-800",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"bg-gray-800 text-white",children:[e.jsx("th",{className:"border-2 border-gray-700 px-3 py-2 text-sm font-bold text-left w-16",children:"S.No"}),e.jsx("th",{className:"border-2 border-gray-700 px-3 py-2 text-sm font-bold text-left",children:"Class"}),e.jsx("th",{className:"border-2 border-gray-700 px-3 py-2 text-sm font-bold text-center w-24",children:"Boys"}),e.jsx("th",{className:"border-2 border-gray-700 px-3 py-2 text-sm font-bold text-center w-24",children:"Girls"}),e.jsx("th",{className:"border-2 border-gray-700 px-3 py-2 text-sm font-bold text-center w-24",children:"Total"})]})}),e.jsxs("tbody",{children:[a.map((n,P)=>e.jsxs(O.Fragment,{children:[e.jsxs("tr",{className:"hover:bg-gray-50",children:[e.jsx("td",{className:"border-2 border-gray-300 px-3 py-2 text-sm text-center",children:P+1}),e.jsx("td",{className:"border-2 border-gray-300 px-3 py-2 text-sm font-semibold",children:L(n.class)}),e.jsx("td",{className:"border-2 border-gray-300 px-3 py-2 text-sm text-center",children:n.boys}),e.jsx("td",{className:"border-2 border-gray-300 px-3 py-2 text-sm text-center",children:n.girls}),e.jsx("td",{className:"border-2 border-gray-300 px-3 py-2 text-sm text-center font-bold",children:n.total})]}),n.class?.toLowerCase()==="5"&&x.primary&&e.jsxs("tr",{className:"bg-blue-100",children:[e.jsxs("td",{colSpan:"2",className:"border-2 border-gray-400 px-3 py-2 text-sm font-bold text-right",children:[x.primary,":"]}),e.jsx("td",{className:"border-2 border-gray-400 px-3 py-2 text-sm font-bold text-center",children:d.boys}),e.jsx("td",{className:"border-2 border-gray-400 px-3 py-2 text-sm font-bold text-center",children:d.girls}),e.jsx("td",{className:"border-2 border-gray-400 px-3 py-2 text-sm font-bold text-center",children:d.total})]})]},n.id)),o.total>0&&x.upperPrimary&&e.jsxs("tr",{className:"bg-green-100",children:[e.jsxs("td",{colSpan:"2",className:"border-2 border-gray-400 px-3 py-2 text-sm font-bold text-right",children:[x.upperPrimary,":"]}),e.jsx("td",{className:"border-2 border-gray-400 px-3 py-2 text-sm font-bold text-center",children:o.boys}),e.jsx("td",{className:"border-2 border-gray-400 px-3 py-2 text-sm font-bold text-center",children:o.girls}),e.jsx("td",{className:"border-2 border-gray-400 px-3 py-2 text-sm font-bold text-center",children:o.total})]}),e.jsxs("tr",{className:"bg-gradient-to-r from-purple-200 via-purple-300 to-purple-200",children:[e.jsx("td",{colSpan:"2",className:"border-4 border-gray-600 px-3 py-3 text-base font-extrabold text-right text-gray-900",children:"GRAND TOTAL:"}),e.jsx("td",{className:"border-4 border-gray-600 px-3 py-3 text-base font-extrabold text-center text-gray-900",children:p.boys}),e.jsx("td",{className:"border-4 border-gray-600 px-3 py-3 text-base font-extrabold text-center text-gray-900",children:p.girls}),e.jsx("td",{className:"border-4 border-gray-600 px-3 py-3 text-base font-extrabold text-center text-gray-900",children:p.total})]})]})]})}),e.jsx("div",{className:"px-8 pb-6",children:e.jsxs("div",{className:"flex justify-center gap-3 pt-4 border-t-2 border-gray-200",children:[e.jsxs(b,{href:route("roll-statements.create"),className:"inline-flex items-center gap-2 px-4 py-2 bg-green-600 hover:bg-green-700 text-white text-sm font-semibold rounded-lg shadow-md transition-colors",children:[e.jsx("i",{className:"fas fa-edit"}),"Edit"]}),e.jsxs("a",{href:route("roll-statements.print",{date:t,academic_year:s}),className:"inline-flex items-center gap-2 px-4 py-2 bg-red-600 hover:bg-red-700 text-white text-sm font-semibold rounded-lg shadow-md transition-colors",target:"_blank",children:[e.jsx("i",{className:"fas fa-file-pdf"}),"Download PDF"]}),e.jsxs("button",{onClick:()=>f(S),className:"inline-flex items-center gap-2 px-4 py-2 bg-orange-600 hover:bg-orange-700 text-white text-sm font-semibold rounded-lg shadow-md transition-colors",children:[e.jsx("i",{className:"fas fa-trash"}),"Delete"]})]})}),e.jsx("div",{className:"h-3 bg-gradient-to-r from-blue-600 via-purple-600 to-blue-600"})]},r)})})]})})]})}export{U as default};
