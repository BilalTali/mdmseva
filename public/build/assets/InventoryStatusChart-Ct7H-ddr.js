import{j as e}from"./app-B7rG-o2v.js";import{u as b}from"./ThemeContext-C_64bj3x.js";import{y as h,z as g}from"./CategoricalChart-DyXWjNgU.js";import{B as j,a as c}from"./BarChart-Dq3puo22.js";import{C as y,X as k,Y as C}from"./CartesianChart-BtZRMraS.js";import{L as S}from"./Legend-DqRWwoZL.js";import{C as v}from"./tooltipContext-CGKqoEtg.js";import"./clsx-B-dksMZM.js";import"./index-Ch5_Xa7z.js";import"./with-selector-BN3VHCxf.js";import"./ReactUtils-IXB0nr5u.js";import"./ErrorBarContext-BMMdcQzX.js";const K=({data:r={}})=>{const{theme:u}=b(),s=u==="dark",t={text:s?"#cbd5e1":"#475569",grid:s?"#334155":"#e2e8f0",axis:s?"#94a3b8":"#64748b",tooltipBg:s?"#1e293b":"#ffffff",tooltipBorder:s?"#334155":"#e2e8f0",tooltipText:s?"#ffffff":"#0f172a",tooltipLabel:s?"#cbd5e1":"#475569"},p=(o,i)=>{const m=o/(i||1);return m>=2?"#10b981":m>=1?"#f59e0b":"#ef4444"},a=[{name:"Rice",current:parseFloat(r.rice_current)||0,minimum:parseFloat(r.rice_minimum)||0,unit:"kg"},{name:"Pulses",current:parseFloat(r.pulses_current)||0,minimum:parseFloat(r.pulses_minimum)||0,unit:"kg"},{name:"Vegetables",current:parseFloat(r.vegetables_current)||0,minimum:parseFloat(r.vegetables_minimum)||0,unit:"kg"},{name:"Oil",current:parseFloat(r.oil_current)||0,minimum:parseFloat(r.oil_minimum)||0,unit:"L"},{name:"Salt",current:parseFloat(r.salt_current)||0,minimum:parseFloat(r.salt_minimum)||0,unit:"kg"},{name:"Fuel",current:parseFloat(r.fuel_current)||0,minimum:parseFloat(r.fuel_minimum)||0,unit:"L"}].filter(o=>o.current>0||o.minimum>0),x=({active:o,payload:i,label:m})=>{if(o&&i&&i.length){const l=i[0].payload,n=l.current/(l.minimum||1),d=n>=2?"Good Stock":n>=1?"Adequate Stock":"Low Stock",f=n>=2?"text-green-600 dark:text-green-400":n>=1?"text-orange-600 dark:text-orange-400":"text-red-600 dark:text-red-400";return e.jsxs("div",{className:"p-4 rounded-lg shadow-xl border-2",style:{backgroundColor:t.tooltipBg,borderColor:t.tooltipBorder},children:[e.jsxs("p",{className:"font-bold mb-3 pb-2 border-b",style:{color:t.tooltipText,borderColor:t.tooltipBorder},children:["ðŸ“¦ ",m]}),e.jsxs("div",{className:"space-y-2 text-sm",children:[e.jsxs("div",{className:"flex justify-between gap-6",children:[e.jsx("span",{style:{color:t.tooltipLabel},children:"Current Stock:"}),e.jsxs("span",{className:"font-semibold",style:{color:t.tooltipText},children:[l.current," ",l.unit]})]}),e.jsxs("div",{className:"flex justify-between gap-6",children:[e.jsx("span",{style:{color:t.tooltipLabel},children:"Minimum Required:"}),e.jsxs("span",{className:"font-semibold",style:{color:t.tooltipText},children:[l.minimum," ",l.unit]})]}),e.jsxs("div",{className:"flex justify-between gap-6",children:[e.jsx("span",{style:{color:t.tooltipLabel},children:"Days Supply:"}),e.jsxs("span",{className:"font-semibold",style:{color:t.tooltipText},children:[Math.floor(n*30)," days"]})]}),e.jsx("div",{className:"pt-2 border-t",style:{borderColor:t.tooltipBorder},children:e.jsxs("div",{className:"flex justify-between gap-4 font-bold",children:[e.jsx("span",{style:{color:t.tooltipText},children:"Status:"}),e.jsx("span",{className:f,children:d})]})})]})]})}return null};return!a||a.length===0?null:e.jsx(h,{width:"100%",height:"100%",children:e.jsxs(j,{data:a,margin:{top:10,right:30,left:20,bottom:60},children:[e.jsx(y,{strokeDasharray:"3 3",stroke:t.grid,vertical:!1}),e.jsx(k,{dataKey:"name",stroke:t.axis,style:{fontSize:"12px",fontWeight:"500"},tick:{fill:t.text}}),e.jsx(C,{stroke:t.axis,style:{fontSize:"12px",fontWeight:"500"},tick:{fill:t.text},label:{value:"Stock Level",angle:-90,position:"insideLeft",style:{fontSize:"13px",fill:t.text,fontWeight:"600"}}}),e.jsx(g,{content:e.jsx(x,{})}),e.jsx(S,{wrapperStyle:{color:t.text}}),e.jsx(c,{dataKey:"current",name:"Current Stock",radius:[4,4,0,0],maxBarSize:60,children:a.map((o,i)=>e.jsx(v,{fill:p(o.current,o.minimum)},`cell-${i}`))}),e.jsx(c,{dataKey:"minimum",name:"Minimum Required",fill:s?"rgba(156, 163, 175, 0.3)":"rgba(107, 114, 128, 0.3)",radius:[2,2,0,0],maxBarSize:60})]})})};export{K as default};
