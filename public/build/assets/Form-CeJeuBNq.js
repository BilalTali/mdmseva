import{u as E,r as c,j as e,H as V}from"./app-DhNoL3JN.js";import{A as O}from"./AuthenticatedLayout-D4HZ-Zjq.js";import"./transition-Cfg9tJBG.js";import"./AuthLogo-DOO80UpC.js";import"./SupportChatWidget-C2pfx3sn.js";import"./createLucideIcon-B4Gf14wH.js";function U({auth:v,config:r,schoolType:q,hasPrimary:j,hasMiddle:f}){const y=!!r,_={daily_pulses_primary:1.86,daily_vegetables_primary:1.86,daily_oil_primary:.99,daily_salt_primary:.93,daily_fuel_primary:1.14},p={daily_pulses_middle:2.41,daily_vegetables_middle:2.41,daily_oil_middle:2.2,daily_salt_middle:1.09,daily_fuel_middle:2.06},{data:a,setData:i,post:N,put:k,processing:x,errors:t}=E({year:r?.year||new Date().getFullYear(),month:r?.month||new Date().getMonth()+1,daily_pulses_primary:r?.daily_pulses_primary??_.daily_pulses_primary,daily_vegetables_primary:r?.daily_vegetables_primary??_.daily_vegetables_primary,daily_oil_primary:r?.daily_oil_primary??_.daily_oil_primary,daily_salt_primary:r?.daily_salt_primary??_.daily_salt_primary,daily_fuel_primary:r?.daily_fuel_primary??_.daily_fuel_primary,daily_pulses_middle:r?.daily_pulses_middle??p.daily_pulses_middle,daily_vegetables_middle:r?.daily_vegetables_middle??p.daily_vegetables_middle,daily_oil_middle:r?.daily_oil_middle??p.daily_oil_middle,daily_salt_middle:r?.daily_salt_middle??p.daily_salt_middle,daily_fuel_middle:r?.daily_fuel_middle??p.daily_fuel_middle,salt_percentage_common:r?.salt_percentage_common??5,salt_percentage_chilli:r?.salt_percentage_chilli??35,salt_percentage_turmeric:r?.salt_percentage_turmeric??25,salt_percentage_coriander:r?.salt_percentage_coriander??15,salt_percentage_other:r?.salt_percentage_other??20}),[o,C]=c.useState(100),[w,A]=c.useState(0),[T,F]=c.useState(0),n=d=>{const l=parseFloat(d.salt_percentage_common||0)+parseFloat(d.salt_percentage_chilli||0)+parseFloat(d.salt_percentage_turmeric||0)+parseFloat(d.salt_percentage_coriander||0)+parseFloat(d.salt_percentage_other||0);C(l)};c.useEffect(()=>{n(a)},[]),c.useEffect(()=>{const d=parseFloat(a.daily_pulses_primary||0)+parseFloat(a.daily_vegetables_primary||0)+parseFloat(a.daily_oil_primary||0)+parseFloat(a.daily_salt_primary||0)+parseFloat(a.daily_fuel_primary||0);A(d);const l=parseFloat(a.daily_pulses_middle||0)+parseFloat(a.daily_vegetables_middle||0)+parseFloat(a.daily_oil_middle||0)+parseFloat(a.daily_salt_middle||0)+parseFloat(a.daily_fuel_middle||0);F(l)},[a.daily_pulses_primary,a.daily_vegetables_primary,a.daily_oil_primary,a.daily_salt_primary,a.daily_fuel_primary,a.daily_pulses_middle,a.daily_vegetables_middle,a.daily_oil_middle,a.daily_salt_middle,a.daily_fuel_middle]);const M=d=>{d.preventDefault();const l=g=>{const m=parseFloat(g??0);return Number.isNaN(m)?"":Number(m.toFixed(2))},u={year:a.year,month:a.month,daily_pulses_primary:l(a.daily_pulses_primary),daily_vegetables_primary:l(a.daily_vegetables_primary),daily_oil_primary:l(a.daily_oil_primary),daily_salt_primary:l(a.daily_salt_primary),daily_fuel_primary:l(a.daily_fuel_primary),daily_pulses_middle:l(a.daily_pulses_middle),daily_vegetables_middle:l(a.daily_vegetables_middle),daily_oil_middle:l(a.daily_oil_middle),daily_salt_middle:l(a.daily_salt_middle),daily_fuel_middle:l(a.daily_fuel_middle),salt_percentage_common:l(a.salt_percentage_common),salt_percentage_chilli:l(a.salt_percentage_chilli),salt_percentage_turmeric:l(a.salt_percentage_turmeric),salt_percentage_coriander:l(a.salt_percentage_coriander),salt_percentage_other:l(a.salt_percentage_other)};y?k(route("amount-config.update",r.id),{data:u}):N(route("amount-config.store"),{data:u})},D=[{value:1,label:"January"},{value:2,label:"February"},{value:3,label:"March"},{value:4,label:"April"},{value:5,label:"May"},{value:6,label:"June"},{value:7,label:"July"},{value:8,label:"August"},{value:9,label:"September"},{value:10,label:"October"},{value:11,label:"November"},{value:12,label:"December"}],s=({label:d,name:l,value:u,onChange:g,error:m,type:S="number",step:P="0.01",required:b=!0,helpText:h,onBlur:I})=>e.jsxs("div",{className:"w-full",children:[e.jsxs("label",{htmlFor:l,className:"block text-sm font-medium text-[var(--text-secondary)] mb-1",children:[d," ",b&&e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{id:l,type:S,value:u,onChange:B=>g(l,B.target.value),onBlur:I,step:P,required:b,className:`w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 dark:bg-gray-900 dark:text-gray-100 ${m?"border-red-500 dark:border-red-500":"border-gray-300 dark:border-gray-600"}`}),h&&e.jsx("p",{className:"mt-1 text-xs text-gray-500 dark:text-gray-400",children:h}),m&&e.jsx("p",{className:"mt-1 text-sm text-red-600 dark:text-red-400",children:m})]});return e.jsxs(O,{user:v.user,header:e.jsx("h2",{className:"font-semibold text-xl text-[var(--text-primary)] leading-tight",children:y?"Edit Amount Configuration":"Create Amount Configuration"}),children:[e.jsx(V,{title:y?"Edit Amount Configuration":"Create Amount Configuration"}),e.jsx("div",{className:"py-12",children:e.jsx("div",{className:"max-w-7xl mx-auto sm:px-6 lg:px-8",children:e.jsx("div",{className:"bg-[var(--surface-00)] overflow-hidden shadow-sm sm:rounded-lg",children:e.jsx("div",{className:"p-6",children:e.jsxs("form",{onSubmit:M,className:"space-y-8",children:[e.jsxs("div",{className:"bg-gray-50 dark:bg-gray-900/50 p-6 rounded-lg",children:[e.jsx("h3",{className:"text-lg font-semibold text-[var(--text-primary)] mb-4",children:"Configuration Period"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsxs("label",{htmlFor:"month",className:"block text-sm font-medium text-[var(--text-secondary)] mb-1",children:["Month ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("select",{id:"month",value:a.month,onChange:d=>i("month",d.target.value),className:"w-full px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-indigo-500 dark:bg-gray-900 dark:text-gray-100",required:!0,children:D.map(d=>e.jsx("option",{value:d.value,children:d.label},d.value))}),t.month&&e.jsx("p",{className:"mt-1 text-sm text-red-600 dark:text-red-400",children:t.month})]}),e.jsxs("div",{children:[e.jsxs("label",{htmlFor:"year",className:"block text-sm font-medium text-[var(--text-secondary)] mb-1",children:["Year ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{id:"year",type:"number",value:a.year,onChange:d=>i("year",d.target.value),min:"2020",max:"2100",className:"w-full px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-indigo-500 dark:bg-gray-900 dark:text-gray-100",required:!0}),t.year&&e.jsx("p",{className:"mt-1 text-sm text-red-600 dark:text-red-400",children:t.year})]})]})]}),j&&e.jsxs("div",{className:"bg-indigo-50 dark:bg-indigo-900/20 p-6 rounded-lg",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h3",{className:"text-lg font-semibold text-indigo-900 dark:text-indigo-200",children:"Primary (Class 1-5) - Daily Amount Configuration"}),e.jsxs("div",{className:"bg-indigo-200 dark:bg-indigo-800 px-4 py-2 rounded-lg border border-indigo-400 dark:border-indigo-600",children:[e.jsx("span",{className:"text-sm font-medium text-indigo-800 dark:text-indigo-200 mr-2",children:"Total:"}),e.jsxs("span",{className:"text-lg font-bold text-indigo-900 dark:text-indigo-100",children:["â‚¹ ",w.toFixed(2)]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[e.jsx(s,{label:"Daily Pulses Amount",name:"daily_pulses_primary",value:a.daily_pulses_primary,onChange:i,error:t.daily_pulses_primary,helpText:"Amount in â‚¹"}),e.jsx(s,{label:"Daily Vegetables Amount",name:"daily_vegetables_primary",value:a.daily_vegetables_primary,onChange:i,error:t.daily_vegetables_primary,helpText:"Amount in â‚¹"}),e.jsx(s,{label:"Daily Oil Amount",name:"daily_oil_primary",value:a.daily_oil_primary,onChange:i,error:t.daily_oil_primary,helpText:"Amount in â‚¹"}),e.jsx(s,{label:"Ingredients Amount",name:"daily_salt_primary",value:a.daily_salt_primary,onChange:i,error:t.daily_salt_primary,helpText:"Total salt amount in â‚¹"}),e.jsx(s,{label:"Daily Fuel Amount",name:"daily_fuel_primary",value:a.daily_fuel_primary,onChange:i,error:t.daily_fuel_primary,helpText:"Amount in â‚¹"})]})]}),f&&e.jsxs("div",{className:"bg-purple-50 dark:bg-purple-900/20 p-6 rounded-lg",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h3",{className:"text-lg font-semibold text-purple-900 dark:text-purple-200",children:"Middle (Class 6-8) - Daily Amount Configuration"}),e.jsxs("div",{className:"bg-purple-200 dark:bg-purple-800 px-4 py-2 rounded-lg border border-purple-400 dark:border-purple-600",children:[e.jsx("span",{className:"text-sm font-medium text-purple-800 dark:text-purple-200 mr-2",children:"Total:"}),e.jsxs("span",{className:"text-lg font-bold text-purple-900 dark:text-purple-100",children:["â‚¹ ",T.toFixed(2)]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[e.jsx(s,{label:"Daily Pulses Amount",name:"daily_pulses_middle",value:a.daily_pulses_middle,onChange:i,error:t.daily_pulses_middle,helpText:"Amount in â‚¹"}),e.jsx(s,{label:"Daily Vegetables Amount",name:"daily_vegetables_middle",value:a.daily_vegetables_middle,onChange:i,error:t.daily_vegetables_middle,helpText:"Amount in â‚¹"}),e.jsx(s,{label:"Daily Oil Amount",name:"daily_oil_middle",value:a.daily_oil_middle,onChange:i,error:t.daily_oil_middle,helpText:"Amount in â‚¹"}),e.jsx(s,{label:"Ingredients Amount",name:"daily_salt_middle",value:a.daily_salt_middle,onChange:i,error:t.daily_salt_middle,helpText:"Total salt amount in â‚¹"}),e.jsx(s,{label:"Daily Fuel Amount",name:"daily_fuel_middle",value:a.daily_fuel_middle,onChange:i,error:t.daily_fuel_middle,helpText:"Amount in â‚¹"})]})]}),e.jsxs("div",{className:"bg-gradient-to-r from-green-50 to-emerald-50 dark:from-green-900/20 dark:to-emerald-900/20 p-6 rounded-lg border-2 border-green-300 dark:border-green-700 shadow-sm",children:[e.jsxs("h3",{className:"text-lg font-semibold text-[var(--text-primary)] mb-2 flex items-center",children:[e.jsx("svg",{className:"w-6 h-6 mr-2 text-green-600 dark:text-green-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})}),"Salt & Condiments Percentage Breakdown"]}),e.jsx("div",{className:"bg-white dark:bg-gray-800 p-4 rounded-md mb-4 border border-green-200 dark:border-green-800",children:e.jsxs("p",{className:"text-sm text-[var(--text-secondary)] leading-relaxed",children:[e.jsx("span",{className:"font-semibold text-green-700 dark:text-green-400",children:"âœ“ Unified Configuration:"})," Set the percentage distribution ",e.jsx("span",{className:"font-bold",children:"once"})," below. The same percentages will automatically apply to ",e.jsx("span",{className:"font-semibold",children:"both Primary (I-V)"})," and ",e.jsx("span",{className:"font-semibold",children:"Middle (VI-VIII)"})," students.",e.jsx("span",{className:"block mt-2 text-xs text-[var(--text-secondary)]",children:"ðŸ“Š Total must equal exactly 100%"})]})}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:[e.jsx(s,{label:"Common Salt %",name:"salt_percentage_common",value:a.salt_percentage_common,onChange:i,onBlur:()=>n(a),error:t.salt_percentage_common,helpText:"Default: 30%"}),e.jsx(s,{label:"Chilli Powder %",name:"salt_percentage_chilli",value:a.salt_percentage_chilli,onChange:i,onBlur:()=>n(a),error:t.salt_percentage_chilli,helpText:"Default: 20%"}),e.jsx(s,{label:"Turmeric %",name:"salt_percentage_turmeric",value:a.salt_percentage_turmeric,onChange:i,onBlur:()=>n(a),error:t.salt_percentage_turmeric,helpText:"Default: 20%"}),e.jsx(s,{label:"Ingredients %",name:"salt_percentage_coriander",value:a.salt_percentage_coriander,onChange:i,onBlur:()=>n(a),error:t.salt_percentage_coriander,helpText:"Default: 15%"}),e.jsx(s,{label:"Other Condiments %",name:"salt_percentage_other",value:a.salt_percentage_other,onChange:i,onBlur:()=>n(a),error:t.salt_percentage_other,helpText:"Default: 15%"})]}),e.jsx("div",{className:`mt-4 p-4 rounded-lg border-2 ${Math.abs(o-100)<.01?"bg-green-100 dark:bg-green-900/30 border-green-400 dark:border-green-600":"bg-yellow-100 dark:bg-yellow-900/30 border-yellow-400 dark:border-yellow-600"}`,children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("p",{className:`text-sm font-semibold ${Math.abs(o-100)<.01?"text-green-800 dark:text-green-200":"text-yellow-800 dark:text-yellow-200"}`,children:[e.jsx("span",{className:"mr-2",children:Math.abs(o-100)<.01?"âœ“":"âš "}),"Total (applies to Primary & Middle): ",o.toFixed(2),"%"]}),Math.abs(o-100)<.01?e.jsx("span",{className:"text-green-700 dark:text-green-300 font-bold text-lg",children:"Perfect! âœ“"}):e.jsx("span",{className:"text-yellow-700 dark:text-yellow-300 font-semibold",children:"Must equal 100%"})]})})]}),e.jsxs("div",{className:"flex justify-end space-x-4 pt-6 border-t border-[var(--border-light)]",children:[e.jsx("button",{type:"button",onClick:()=>window.history.back(),className:"px-6 py-2 border border-gray-300 dark:border-gray-600 rounded-lg text-[var(--text-secondary)] hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors",children:"Cancel"}),e.jsx("button",{type:"submit",disabled:x||Math.abs(o-100)>.01,className:"px-6 py-2 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700 disabled:bg-gray-400 disabled:cursor-not-allowed transition-colors flex items-center",children:x?e.jsxs(e.Fragment,{children:[e.jsxs("svg",{className:"animate-spin -ml-1 mr-3 h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[e.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),e.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Saving..."]}):y?"Update Configuration":"Create Configuration"})]})]})})})})})]})}export{U as default};
