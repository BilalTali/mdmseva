import{u as B,r as n,b as k,j as e,H,L as C}from"./app-B7rG-o2v.js";import{G as K}from"./GuestLayout-BHByrMF2.js";import{T as c,I as o}from"./TextInput-QUmBNtsg.js";import{I as d}from"./InputLabel-BbTxcQCR.js";import{P as M}from"./PrimaryButton-pLcSr6Mo.js";import{E as S}from"./eye-off-BKwFsjKk.js";import{E as F}from"./eye-Ce-VFeAv.js";import"./AuthLogo-BstlY2F2.js";import"./ThemeContext-C_64bj3x.js";import"./createLucideIcon-htJommDS.js";function Y(){const{data:r,setData:a,post:L,processing:x,errors:t}=B({name:"",email:"",password:"",password_confirmation:"",phone:"",date_of_birth:"",state:"Jammu and Kashmir",district_id:"",zone_id:"",udise_code:"",school_name:"",school_type:"primary",institute_address:"",school_pincode:""}),[l,m]=n.useState(1),[P,b]=n.useState([]),[z,u]=n.useState([]),[j,f]=n.useState(!1),[_,N]=n.useState(!1),[w,h]=n.useState(""),[p,D]=n.useState(!1),[v,E]=n.useState(!1);n.useEffect(()=>{r.state&&q(r.state)},[r.state]);const q=async s=>{f(!0),h("");try{const i=await k.get("/api/districts",{params:{state:s}});b(i.data.data||[]),a("district_id",""),a("zone_id",""),u([])}catch(i){console.error("Failed to load districts:",i),h("Failed to load districts. Please refresh the page."),b([])}finally{f(!1)}},I=async s=>{if(a("district_id",s),a("zone_id",""),u([]),!!s){N(!0),h("");try{const i=await k.get(`/api/zones/${s}`);u(i.data.data||[])}catch(i){console.error("Failed to load zones:",i),h("Failed to load zones. Please try again."),u([])}finally{N(!1)}}},A=s=>{s.preventDefault();const i=["state","district_id","zone_id"],R=["udise_code","school_name","school_type","institute_address","school_pincode"];L(route("register"),{preserveScroll:!0,onError:Z=>{const g=Object.keys(Z||{});if(g.length!==0){if(g.some(y=>R.includes(y))){m(3);return}if(g.some(y=>i.includes(y))){m(2);return}m(1)}}})};return e.jsxs(K,{children:[e.jsx(H,{title:"Register"}),e.jsxs("div",{className:"mb-6 grid gap-3 sm:grid-cols-3",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:`flex items-center justify-center w-8 h-8 rounded-full text-sm font-semibold ${l===1?"bg-primary-600 text-white":"bg-secondary-200 dark:bg-secondary-700 text-[var(--text-secondary)]"}`,children:"1"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-semibold text-[var(--text-primary)]",children:"Personal details"}),e.jsx("p",{className:"text-xs text-[var(--text-tertiary)]",children:"Account & contact information"})]})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:`flex items-center justify-center w-8 h-8 rounded-full text-sm font-semibold ${l===2?"bg-primary-600 text-white":"bg-secondary-200 dark:bg-secondary-700 text-[var(--text-secondary)]"}`,children:"2"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-semibold text-[var(--text-primary)]",children:"Location"}),e.jsx("p",{className:"text-xs text-[var(--text-tertiary)]",children:"State, district & zone"})]})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:`flex items-center justify-center w-8 h-8 rounded-full text-sm font-semibold ${l===3?"bg-primary-600 text-white":"bg-secondary-200 dark:bg-secondary-700 text-[var(--text-secondary)]"}`,children:"3"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-semibold text-[var(--text-primary)]",children:"School details"}),e.jsx("p",{className:"text-xs text-[var(--text-tertiary)]",children:"Institute details for MDM"})]})]})]}),e.jsxs("form",{onSubmit:A,className:"space-y-6",children:[t.registration&&e.jsx("div",{className:"mb-4 rounded-md border border-red-200 bg-red-50 px-4 py-3 text-sm text-red-700",children:t.registration}),l===1&&e.jsxs("div",{className:"bg-[var(--surface-00)] shadow sm:rounded-lg p-6 border border-[var(--border-light)]",children:[e.jsx("h3",{className:"text-lg font-medium text-[var(--text-primary)] mb-4",children:"Personal Information"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx(d,{htmlFor:"name",value:"Full Name *"}),e.jsx(c,{id:"name",name:"name",value:r.name,className:"mt-1 block w-full",autoComplete:"name",isFocused:!0,onChange:s=>a("name",s.target.value),required:!0}),e.jsx(o,{message:t.name,className:"mt-2"})]}),e.jsxs("div",{children:[e.jsx(d,{htmlFor:"email",value:"Email Address *"}),e.jsx(c,{id:"email",type:"email",name:"email",value:r.email,className:"mt-1 block w-full",autoComplete:"username",onChange:s=>a("email",s.target.value),required:!0}),e.jsx(o,{message:t.email,className:"mt-2"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(d,{htmlFor:"password",value:"Password *"}),e.jsxs("div",{className:"relative",children:[e.jsx(c,{id:"password",type:p?"text":"password",name:"password",value:r.password,className:"mt-1 block w-full pr-10",autoComplete:"new-password",onChange:s=>a("password",s.target.value),required:!0}),e.jsx("button",{type:"button",onClick:()=>D(s=>!s),className:"absolute inset-y-0 right-2 flex items-center text-[var(--text-tertiary)] hover:text-secondary-700 dark:hover:text-secondary-200","aria-label":p?"Hide password":"Show password",children:p?e.jsx(S,{className:"w-5 h-5"}):e.jsx(F,{className:"w-5 h-5"})})]}),e.jsx(o,{message:t.password,className:"mt-2"})]}),e.jsxs("div",{children:[e.jsx(d,{htmlFor:"password_confirmation",value:"Confirm Password *"}),e.jsxs("div",{className:"relative",children:[e.jsx(c,{id:"password_confirmation",type:v?"text":"password",name:"password_confirmation",value:r.password_confirmation,className:"mt-1 block w-full pr-10",autoComplete:"new-password",onChange:s=>a("password_confirmation",s.target.value),required:!0}),e.jsx("button",{type:"button",onClick:()=>E(s=>!s),className:"absolute inset-y-0 right-2 flex items-center text-[var(--text-tertiary)] hover:text-secondary-700 dark:hover:text-secondary-200","aria-label":v?"Hide password":"Show password",children:v?e.jsx(S,{className:"w-5 h-5"}):e.jsx(F,{className:"w-5 h-5"})})]}),e.jsx(o,{message:t.password_confirmation,className:"mt-2"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(d,{htmlFor:"phone",value:"Phone Number"}),e.jsx(c,{id:"phone",type:"tel",name:"phone",value:r.phone,inputMode:"numeric",pattern:"[0-9]{10}",maxLength:10,className:"mt-1 block w-full",onChange:s=>{const i=s.target.value.replace(/\D/g,"").slice(0,10);a("phone",i)}}),e.jsx(o,{message:t.phone,className:"mt-2"})]}),e.jsxs("div",{children:[e.jsx(d,{htmlFor:"date_of_birth",value:"Date of Birth"}),e.jsx(c,{id:"date_of_birth",type:"date",name:"date_of_birth",value:r.date_of_birth,className:"mt-1 block w-full",onChange:s=>a("date_of_birth",s.target.value)}),e.jsx(o,{message:t.date_of_birth,className:"mt-2"})]})]})]})]}),l===2&&e.jsxs("div",{className:"bg-[var(--surface-00)] shadow sm:rounded-lg p-6 border border-[var(--border-light)]",children:[e.jsx("h3",{className:"text-lg font-medium text-[var(--text-primary)] mb-4",children:"Location Information"}),w&&e.jsx("div",{className:"mb-4 bg-error-50 border border-error-200 text-error-600 px-4 py-3 rounded relative",children:e.jsx("span",{className:"block sm:inline",children:w})}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx(d,{htmlFor:"state",value:"State/Union Territory *"}),e.jsxs("select",{id:"state",name:"state",value:r.state,onChange:s=>a("state",s.target.value),className:"mt-1 block w-full border-[var(--border-light)] dark:bg-secondary-900 dark:text-secondary-100 focus:border-[var(--primary-500)] focus:ring-[var(--primary-500)] rounded-md shadow-sm",required:!0,children:[e.jsx("option",{value:"Jammu and Kashmir",children:"Jammu and Kashmir"}),e.jsx("option",{value:"Ladakh",children:"Ladakh"})]}),e.jsx(o,{message:t.state,className:"mt-2"})]}),e.jsxs("div",{children:[e.jsx(d,{htmlFor:"district_id",value:"District *"}),e.jsxs("select",{id:"district_id",name:"district_id",value:r.district_id,onChange:s=>I(s.target.value),disabled:j,className:"mt-1 block w-full border-[var(--border-light)] dark:bg-secondary-900 dark:text-secondary-100 focus:border-[var(--primary-500)] focus:ring-[var(--primary-500)] rounded-md shadow-sm disabled:bg-secondary-100 dark:disabled:bg-secondary-800",required:!0,children:[e.jsx("option",{value:"",children:j?"Loading districts...":"Select District"}),P.map(s=>e.jsx("option",{value:s.id,children:s.name},s.id))]}),e.jsx(o,{message:t.district_id,className:"mt-2"})]}),e.jsxs("div",{children:[e.jsx(d,{htmlFor:"zone_id",value:"Zone *"}),e.jsxs("select",{id:"zone_id",name:"zone_id",value:r.zone_id,onChange:s=>a("zone_id",s.target.value),disabled:!r.district_id||_,className:"mt-1 block w-full border-[var(--border-light)] dark:bg-secondary-900 dark:text-secondary-100 focus:border-[var(--primary-500)] focus:ring-[var(--primary-500)] rounded-md shadow-sm disabled:bg-secondary-100 dark:disabled:bg-secondary-800",required:!0,children:[e.jsx("option",{value:"",children:_?"Loading zones...":r.district_id?"Select Zone":"Select district first"}),z.map(s=>e.jsx("option",{value:s.id,children:s.name},s.id))]}),e.jsx(o,{message:t.zone_id,className:"mt-2"})]})]})]}),l===3&&e.jsxs("div",{className:"bg-[var(--surface-00)] shadow sm:rounded-lg p-6 border border-[var(--border-light)]",children:[e.jsx("h3",{className:"text-lg font-medium text-[var(--text-primary)] mb-4",children:"School Information"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx(d,{htmlFor:"udise_code",value:"UDISE Code *"}),e.jsx(c,{id:"udise_code",type:"text",name:"udise_code",value:r.udise_code,className:"mt-1 block w-full",maxLength:20,onChange:s=>a("udise_code",s.target.value),required:!0}),e.jsx("p",{className:"mt-1 text-sm text-[var(--text-tertiary)]",children:"Unified District Information System for Education code"}),e.jsx(o,{message:t.udise_code,className:"mt-2"})]}),e.jsxs("div",{children:[e.jsx(d,{htmlFor:"school_name",value:"School Name *"}),e.jsx(c,{id:"school_name",type:"text",name:"school_name",value:r.school_name,className:"mt-1 block w-full",onChange:s=>a("school_name",s.target.value),required:!0}),e.jsx(o,{message:t.school_name,className:"mt-2"})]}),e.jsxs("div",{children:[e.jsx(d,{htmlFor:"school_type",value:"School Type *"}),e.jsxs("select",{id:"school_type",name:"school_type",value:r.school_type,onChange:s=>a("school_type",s.target.value),className:"mt-1 block w-full border-[var(--border-light)] dark:bg-secondary-900 dark:text-secondary-100 focus:border-[var(--primary-500)] focus:ring-[var(--primary-500)] rounded-md shadow-sm",required:!0,children:[e.jsx("option",{value:"primary",children:"Primary (Class 1-5)"}),e.jsx("option",{value:"middle",children:"Middle (Class 1-8)"}),e.jsx("option",{value:"secondary",children:"Secondary (Class 1-10/12)"})]}),e.jsx(o,{message:t.school_type,className:"mt-2"})]}),e.jsxs("div",{children:[e.jsx(d,{htmlFor:"institute_address",value:"School Address *"}),e.jsx("textarea",{id:"institute_address",name:"institute_address",value:r.institute_address,className:"mt-1 block w-full border-[var(--border-light)] dark:bg-secondary-900 dark:text-secondary-100 focus:border-[var(--primary-500)] focus:ring-[var(--primary-500)] rounded-md shadow-sm",rows:"3",onChange:s=>a("institute_address",s.target.value),required:!0}),e.jsx(o,{message:t.institute_address,className:"mt-2"})]}),e.jsxs("div",{children:[e.jsx(d,{htmlFor:"school_pincode",value:"Pincode *"}),e.jsx(c,{id:"school_pincode",type:"text",name:"school_pincode",value:r.school_pincode,className:"mt-1 block w-full",maxLength:"6",onChange:s=>a("school_pincode",s.target.value),required:!0}),e.jsx(o,{message:t.school_pincode,className:"mt-2"})]})]})]}),l===1&&e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(C,{href:route("login"),className:"text-sm text-[var(--text-secondary)] hover:text-secondary-900 dark:hover:text-secondary-100 underline",children:"Already registered?"}),e.jsx("button",{type:"button",className:"px-4 py-2 text-sm font-medium rounded-md bg-primary-600 dark:bg-primary-500 text-white hover:bg-primary-700 dark:hover:bg-primary-400",onClick:()=>m(2),children:"Next"})]}),l===2&&e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("button",{type:"button",className:"px-4 py-2 text-sm font-medium rounded-md border border-secondary-300 dark:border-secondary-600 text-[var(--text-secondary)] hover:bg-secondary-50 dark:hover:bg-secondary-700",onClick:()=>m(1),disabled:x,children:"Back"}),e.jsx("button",{type:"button",className:"px-4 py-2 text-sm font-medium rounded-md bg-primary-600 dark:bg-primary-500 text-white hover:bg-primary-700 dark:hover:bg-primary-400",onClick:()=>m(3),disabled:x,children:"Next"})]}),l===3&&e.jsxs("div",{className:"flex flex-col gap-4 sm:flex-row sm:items-center sm:justify-between",children:[e.jsx(C,{href:route("login"),className:"text-sm text-[var(--text-secondary)] hover:text-secondary-900 dark:hover:text-secondary-100 underline",children:"Already registered?"}),e.jsxs("div",{className:"flex gap-3 justify-end",children:[e.jsx("button",{type:"button",className:"px-4 py-2 text-sm font-medium rounded-md border border-secondary-300 dark:border-secondary-600 text-[var(--text-secondary)] hover:bg-secondary-50 dark:hover:bg-secondary-700",onClick:()=>m(2),disabled:x,children:"Back"}),e.jsx(M,{disabled:x,children:x?"Registering...":"Register"})]})]})]})]})}export{Y as default};
