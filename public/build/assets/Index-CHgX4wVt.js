import{r as m,j as e,H as _,L as r,a as c}from"./app-B7rG-o2v.js";import{A as f}from"./AuthenticatedLayout-DsY28lw4.js";import{C as k}from"./calendar-BQDWq3AD.js";import{P as p}from"./package-BcNuP7eA.js";import{c as g}from"./createLucideIcon-htJommDS.js";import{S as v}from"./square-pen-De8Lcpp1.js";import{P as o}from"./plus-D7aV_wba.js";import"./transition-rTlxp94F.js";import"./AuthLogo-BstlY2F2.js";import"./SupportChatWidget-BH2cX72p.js";/**
 * @license lucide-react v0.552.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const F=[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 9.9-1",key:"1mm8w8"}]],C=g("lock-open",F);/**
 * @license lucide-react v0.552.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const L=[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]],h=g("lock",L);function z({auth:y,config:t,currentMonth:i,currentYear:l,activities:M,completedMonths:A,amountConfig:S,canEnterConsumption:P,schoolTypes:u}){const[d,w]=m.useState(i),[x,b]=m.useState(l),n=["January","February","March","April","May","June","July","August","September","October","November","December"],j=(s,a)=>{c.visit(route("monthly-rice-config.index",{month:s,year:a}))},N=()=>{if(!t)return;const s=!t.is_locked;let a=null;s&&(a=prompt("Add a reason for locking this month (optional):")??null),c.post(route("monthly-rice-config.toggle-lock"),{month:t.month,year:t.year,lock:s,reason:a},{preserveScroll:!0})};return e.jsxs(f,{user:y.user,header:e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("h2",{className:"font-semibold text-xl text-gray-800 leading-tight",children:"Monthly Rice Configuration"}),!t&&e.jsxs(r,{href:route("monthly-rice-config.create",{month:i,year:l}),className:"inline-flex items-center px-4 py-2 bg-indigo-600 border border-transparent rounded-md font-semibold text-xs text-white uppercase tracking-widest hover:bg-indigo-700",children:[e.jsx(o,{className:"w-4 h-4 mr-2"}),"Create Configuration"]})]}),children:[e.jsx(_,{title:"Monthly Rice Configuration"}),e.jsx("div",{className:"py-12",children:e.jsxs("div",{className:"max-w-7xl mx-auto sm:px-6 lg:px-8",children:[e.jsx("div",{className:"bg-white overflow-hidden shadow-sm sm:rounded-lg mb-6 p-6",children:e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx(k,{className:"w-6 h-6 text-indigo-600"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("label",{className:"text-sm font-medium text-gray-700 mr-3",children:"Select Month:"}),e.jsx("select",{value:d,onChange:s=>w(parseInt(s.target.value)),className:"border-gray-300 rounded-md shadow-sm focus:border-indigo-500 focus:ring-indigo-500",children:n.map((s,a)=>e.jsx("option",{value:a+1,children:s},a+1))}),e.jsx("select",{value:x,onChange:s=>b(parseInt(s.target.value)),className:"ml-2 border-gray-300 rounded-md shadow-sm focus:border-indigo-500 focus:ring-indigo-500",children:Array.from({length:11},(s,a)=>2020+a).map(s=>e.jsx("option",{value:s,children:s},s))}),e.jsx("button",{onClick:()=>j(d,x),className:"ml-3 inline-flex items-center px-4 py-2 bg-gray-800 border border-transparent rounded-md font-semibold text-xs text-white uppercase tracking-widest hover:bg-gray-700",children:"View"})]})]})}),t?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:`p-4 mb-6 rounded-lg ${t.is_completed?"bg-green-50 border border-green-200":"bg-blue-50 border border-blue-200"}`,children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("div",{className:"flex items-center gap-2",children:t.is_completed?e.jsxs(e.Fragment,{children:[e.jsx(Check,{className:"w-5 h-5 text-green-600"}),e.jsx("span",{className:"text-green-800 font-medium",children:"Month Completed"})]}):e.jsxs(e.Fragment,{children:[e.jsx(p,{className:"w-5 h-5 text-blue-600"}),e.jsx("span",{className:"text-blue-800 font-medium",children:"Month Active"})]})}),t.is_locked&&e.jsxs("div",{className:"flex items-center gap-2 text-yellow-700",children:[e.jsx(h,{className:"w-4 h-4"}),e.jsx("span",{className:"text-sm",children:"Locked"})]})]})}),e.jsxs("div",{className:"bg-white overflow-hidden shadow-sm sm:rounded-lg mb-6",children:[e.jsxs("div",{className:"px-6 py-4 border-b border-gray-200 flex justify-between items-center",children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"Configuration Details"}),e.jsxs("span",{className:"px-3 py-1 rounded-full text-sm font-medium bg-gray-100 text-gray-800",children:["School Type: ",u[t.school_type]]})]}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Metric"}),e.jsx("th",{scope:"col",className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Primary"}),e.jsx("th",{scope:"col",className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Upper Primary"}),e.jsx("th",{scope:"col",className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Total"})]})}),e.jsxs("tbody",{className:"bg-white divide-y divide-gray-200",children:[e.jsxs("tr",{children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900",children:"Daily Consumption Rate"}),e.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500 text-right",children:[t.daily_consumption_primary," g"]}),e.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500 text-right",children:[t.daily_consumption_upper_primary," g"]}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500 text-right",children:"-"})]}),e.jsxs("tr",{className:"bg-gray-50",children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900",children:"Opening Balance"}),e.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500 text-right",children:[parseFloat(t.opening_balance_primary).toFixed(2)," kg"]}),e.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500 text-right",children:[parseFloat(t.opening_balance_upper_primary).toFixed(2)," kg"]}),e.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-bold text-gray-900 text-right",children:[(parseFloat(t.opening_balance_primary)+parseFloat(t.opening_balance_upper_primary)).toFixed(2)," kg"]})]}),e.jsxs("tr",{children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900",children:"Rice Lifted"}),e.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-green-600 text-right",children:["+",parseFloat(t.rice_lifted_primary).toFixed(2)," kg"]}),e.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-green-600 text-right",children:["+",parseFloat(t.rice_lifted_upper_primary).toFixed(2)," kg"]}),e.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-bold text-green-600 text-right",children:["+",(parseFloat(t.rice_lifted_primary)+parseFloat(t.rice_lifted_upper_primary)).toFixed(2)," kg"]})]}),e.jsxs("tr",{children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900",children:"Rice Arranged"}),e.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-blue-600 text-right",children:["+",parseFloat(t.rice_arranged_primary).toFixed(2)," kg"]}),e.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-blue-600 text-right",children:["+",parseFloat(t.rice_arranged_upper_primary).toFixed(2)," kg"]}),e.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-bold text-blue-600 text-right",children:["+",(parseFloat(t.rice_arranged_primary)+parseFloat(t.rice_arranged_upper_primary)).toFixed(2)," kg"]})]}),e.jsxs("tr",{className:"bg-gray-50",children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900",children:"Total Available"}),e.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900 text-right",children:[parseFloat(t.total_available_primary).toFixed(2)," kg"]}),e.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900 text-right",children:[parseFloat(t.total_available_upper_primary).toFixed(2)," kg"]}),e.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-bold text-gray-900 text-right",children:[(parseFloat(t.total_available_primary)+parseFloat(t.total_available_upper_primary)).toFixed(2)," kg"]})]}),e.jsxs("tr",{children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900",children:"Consumed"}),e.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-red-600 text-right",children:["-",parseFloat(t.consumed_primary).toFixed(2)," kg"]}),e.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-red-600 text-right",children:["-",parseFloat(t.consumed_upper_primary).toFixed(2)," kg"]}),e.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-bold text-red-600 text-right",children:["-",(parseFloat(t.consumed_primary)+parseFloat(t.consumed_upper_primary)).toFixed(2)," kg"]})]}),e.jsxs("tr",{className:"bg-gray-100 border-t-2 border-gray-200",children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-base font-bold text-gray-900",children:"Closing Balance"}),e.jsxs("td",{className:`px-6 py-4 whitespace-nowrap text-base font-bold text-right ${parseFloat(t.closing_balance_primary)<0?"text-red-600":"text-gray-900"}`,children:[parseFloat(t.closing_balance_primary).toFixed(2)," kg"]}),e.jsxs("td",{className:`px-6 py-4 whitespace-nowrap text-base font-bold text-right ${parseFloat(t.closing_balance_upper_primary)<0?"text-red-600":"text-gray-900"}`,children:[parseFloat(t.closing_balance_upper_primary).toFixed(2)," kg"]}),e.jsxs("td",{className:`px-6 py-4 whitespace-nowrap text-base font-bold text-right ${parseFloat(t.closing_balance_primary)+parseFloat(t.closing_balance_upper_primary)<0?"text-red-600":"text-gray-900"}`,children:[(parseFloat(t.closing_balance_primary)+parseFloat(t.closing_balance_upper_primary)).toFixed(2)," kg"]})]})]})]})})]}),e.jsxs("div",{className:"bg-white overflow-hidden shadow-sm sm:rounded-lg mb-6 p-6",children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Actions"}),e.jsxs("div",{className:"flex flex-wrap gap-3",children:[!t.is_locked&&e.jsxs(r,{href:route("monthly-rice-config.edit",{month:t.month,year:t.year}),className:"inline-flex items-center px-4 py-2 bg-gray-600 border border-transparent rounded-md font-semibold text-xs text-white uppercase tracking-widest hover:bg-gray-700",children:[e.jsx(v,{className:"w-4 h-4 mr-2"}),"Edit Configuration"]}),e.jsx("button",{onClick:N,className:`inline-flex items-center px-4 py-2 border border-transparent rounded-md font-semibold text-xs uppercase tracking-widest text-white ${t.is_locked?"bg-blue-600 hover:bg-blue-700":"bg-yellow-600 hover:bg-yellow-700"}`,children:t.is_locked?e.jsxs(e.Fragment,{children:[e.jsx(C,{className:"w-4 h-4 mr-2"}),"Unlock Editing"]}):e.jsxs(e.Fragment,{children:[e.jsx(h,{className:"w-4 h-4 mr-2"}),"Lock Editing"]})})]}),e.jsx("p",{className:"text-sm text-gray-500 mt-3",children:"Lock the month when you want to freeze data. Unlock to make corrections even after completion."}),t.is_locked&&t.lock_reason&&e.jsxs("p",{className:"text-sm text-yellow-700 mt-2",children:["Lock reason: ",t.lock_reason]})]}),e.jsx("div",{className:"bg-white overflow-hidden shadow-sm sm:rounded-lg mb-6 p-6",children:e.jsxs("div",{className:"flex flex-col gap-4 md:flex-row md:items-center md:justify-between",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Next: Amount Configuration"}),e.jsxs("p",{className:"text-sm text-gray-600 mt-1",children:["Configure daily ingredient amounts for ",n[t.month-1]," ",t.year," before recording daily consumption."]})]}),e.jsx(r,{href:route("amount-config.index",{month:t.month,year:t.year}),className:"inline-flex items-center justify-center px-5 py-2.5 bg-indigo-600 border border-transparent rounded-md font-semibold text-sm text-white uppercase tracking-widest hover:bg-indigo-700",children:"Proceed to Amount Configuration"})]})}),t.is_completed&&e.jsx("div",{className:"bg-white overflow-hidden shadow-sm sm:rounded-lg mb-6 p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"Month Completed"}),e.jsxs("p",{className:"text-sm text-gray-600 mt-1",children:["Completed on ",new Date(t.completed_at).toLocaleDateString()]})]}),e.jsxs(r,{href:route("monthly-rice-config.create-next"),className:"inline-flex items-center px-4 py-2 bg-indigo-600 border border-transparent rounded-md font-semibold text-xs text-white uppercase tracking-widest hover:bg-indigo-700",children:[e.jsx(o,{className:"w-4 h-4 mr-2"}),"Create Next Month"]})]})})]}):e.jsxs("div",{className:"bg-white overflow-hidden shadow-sm sm:rounded-lg p-12 text-center",children:[e.jsx(p,{className:"w-16 h-16 text-gray-400 mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No Configuration Found"}),e.jsxs("p",{className:"text-gray-600 mb-6",children:["No rice configuration exists for ",n[i-1]," ",l]}),e.jsxs(r,{href:route("monthly-rice-config.create",{month:i,year:l}),className:"inline-flex items-center px-4 py-2 bg-indigo-600 border border-transparent rounded-md font-semibold text-xs text-white uppercase tracking-widest hover:bg-indigo-700",children:[e.jsx(o,{className:"w-4 h-4 mr-2"}),"Create Configuration"]})]})]})})]})}export{z as default};
